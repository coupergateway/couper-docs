{"generatedAt":1712569786738,"generateTime":1669,"contents":[{"_path":"/getting-started/running-couper","_dir":"getting-started","_draft":false,"_partial":false,"_locale":"","title":"Running Couper","description":"Couper is available as docker\nimage from Docker Hub","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"running-couper"},"children":[{"type":"text","value":"Running Couper"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper is available as "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"docker\nimage"}]},{"type":"text","value":" from "},{"type":"element","tag":"a","props":{"href":"https://hub.docker.com/r/coupergateway/couper","rel":["nofollow"]},"children":[{"type":"text","value":"Docker Hub"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Running Couper requires a working "},{"type":"element","tag":"a","props":{"href":"https://www.docker.com/","rel":["nofollow"]},"children":[{"type":"text","value":"Docker"}]},{"type":"text","value":" setup on your\ncomputer. Please visit the "},{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/get-started/","rel":["nofollow"]},"children":[{"type":"text","value":"get started guide"}]},{"type":"text","value":" to get prepared."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To download/install Couper, open a terminal and execute:"}]},{"type":"element","tag":"pre","props":{"className":"language-sh shiki shiki-themes slack-dark","code":"$ docker pull coupergateway/couper\n","language":"sh","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" docker"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" pull"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" coupergateway/couper\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper needs a configuration file to know what to do."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a directory with an empty "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper.hcl"}]},{"type":"text","value":" file."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Copy/paste the following configuration to the file and save it."}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server \"hello\" {\n  endpoint \"/**\" {\n    response {\n      body = \"Hello World!\"\n    }\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"hello\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/**\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      body "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"Hello World!\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cd"}]},{"type":"text","value":" into the directory with the configuration file and start Couper in a docker container:"}]},{"type":"element","tag":"pre","props":{"className":"language-sh shiki shiki-themes slack-dark","code":"$ docker run --rm -p 8080:8080 -v \"$(pwd)\":/conf coupergateway/couper\n{\"addr\":\"0.0.0.0:8080\",\"level\":\"info\",\"message\":\"couper gateway is serving\",\"timestamp\":\"2020-08-27T16:39:18Z\",\"type\":\"couper\"}\n","language":"sh","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" docker"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" run"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" --rm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" -p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 8080"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":":8080"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" -v"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"$("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"pwd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")\":/conf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" coupergateway/couper\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"\"addr\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"\"0.0.0.0:8080\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"\"level\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"\"info\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"\"message\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"\"couper gateway is serving\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"\"timestamp\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"\"2020-08-27T16:39:18Z\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"\"type\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"\"couper\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now Couper is serving on your computer's port "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"8080"}]},{"type":"text","value":". Point your\nbrowser or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"curl"}]},{"type":"text","value":" to "},{"type":"element","tag":"a","props":{"href":"http://localhost:8080/","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"localhost:8080"}]}]},{"type":"text","value":" to see what's going on."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Press "},{"type":"element","tag":"kbd","props":{},"children":[{"type":"text","value":"Ctrl"}]},{"type":"text","value":" + "},{"type":"element","tag":"kbd","props":{},"children":[{"type":"text","value":"C"}]},{"type":"text","value":" to stop the container."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"a","props":{"href":"/configuration/configuration-file"},"children":[{"type":"text","value":"following section"}]},{"type":"text","value":" will give you an introduction into Couper's configuration file."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you prefer to learn about Couper by checking out certain features, visit the "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-examples","rel":["nofollow"]},"children":[{"type":"text","value":"example repository"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.getting-started:2.running-couper.md","_source":"content","_file":"1.getting-started/2.running-couper.md","_extension":"md"},{"_path":"/getting-started/examples","_dir":"getting-started","_draft":false,"_partial":false,"_locale":"","title":"Examples","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"examples"},"children":[{"type":"text","value":"Examples"}]},{"type":"element","tag":"h2","props":{"id":"file-and-web-serving"},"children":[{"type":"text","value":"File and Web Serving"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper contains a Web server for simple file serving and also takes care of the more complex web serving of SPA assets."}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server \"example\" {\n\n  files {\n    document_root = \"htdocs\"\n  }\n\n  spa {\n    bootstrap_file = \"htdocs/index.html\"\n    paths = [\"/**\"]\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"example\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  files"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    document_root "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"htdocs\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  spa"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    bootstrap_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"htdocs/index.html\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    paths "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"/**\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" block configures Couper's file server. It needs to know which directory to serve ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"document_root"}]},{"type":"text","value":")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":" block is responsible for serving the bootstrap document for all paths that match the paths list."}]},{"type":"element","tag":"h2","props":{"id":"exposing-apis"},"children":[{"type":"text","value":"Exposing APIs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper's main concept is exposing APIs via the configuration block "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":", fetching data from upstream or remote services, represented by the configuration block "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server \"example\"{\n\n  endpoint \"/public/**\"{\n\n    proxy {\n      backend {\n        origin = \"https://httpbin.org\"\n        path = \"/**\"\n      }\n    }\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"example\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/public/**\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        origin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"https://httpbin.org\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"/**\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This basic configuration defines an upstream backend service ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"https://httpbin.org"}]},{"type":"text","value":") and \"mounts\" it on the local API endpoint "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/public/**"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An incoming request "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/public/foo"}]},{"type":"text","value":" will result in an outgoing request "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"https://httpbin.org/foo"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"securing-apis"},"children":[{"type":"text","value":"Securing APIs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Access control is controlled by an\n"},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" attribute that can be set for many blocks."}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server \"example\" {\n\n  endpoint \"/private/**\" {\n    access_control = [\"accessToken\"]\n\n    proxy {\n      backend {\n        origin = \"https://httpbin.org\"\n        path = \"/**\"\n      }\n    }\n  }\n\n  definitions {\n    jwt \"accessToken\" {\n      signature_algorithm = \"RS256\"\n      key_file = \"keys/public.pem\"\n    }\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"example\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/private/**\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    access_control "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"accessToken\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        origin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"https://httpbin.org\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"/**\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  definitions"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    jwt"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"accessToken\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      signature_algorithm "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"RS256\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      key_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"keys/public.pem\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This configuration protects the endpoint "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/private/**"}]},{"type":"text","value":" with the access control "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"accessToken\""}]},{"type":"text","value":" configured in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block."}]},{"type":"element","tag":"h2","props":{"id":"routing-path-mapping"},"children":[{"type":"text","value":"Routing: Path Mapping"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"api \"my_api\" {\n  base_path = \"/api/v1\"\n\n  endpoint \"/login/**\" {\n    proxy {\n      backend {\n        origin = \"http://identityprovider:8080\"\n      }\n    }\n  }\n\n  endpoint \"/cart/**\" {\n    proxy {\n      url = \"http://cartservice:8080/api/v1/**\"\n    }\n  }\n\n  endpoint \"/account/{id}\" {\n    proxy {\n      backend {\n        path = \"/user/${request.param.id}/info\"\n        origin = \"http://accountservice:8080\"\n      }\n    }\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"api"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"my_api\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  base_path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"/api/v1\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/login/**\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        origin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"http://identityprovider:8080\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/cart/**\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      url "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"http://cartservice:8080/api/v1/**\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" \"/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"account"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"/{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"/user/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"param"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"/info\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        origin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"http://accountservice:8080\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Incoming request"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Outgoing request"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"/api/v1/login/foo"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"http://identityprovider:8080/login/foo"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"/api/v1/cart/items"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"http://cartservice:8080/api/v1/items"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"/api/v1/account/brenda"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"http://accountservice:8080/user/brenda/info"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"using-variables-and-expressions"},"children":[{"type":"text","value":"Using Variables and Expressions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An example to send an additional header with client request header to a configured\nbackend and gets evaluated on per-request basis:"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server {\n  endpoint \"/\" {\n    proxy {\n      backend {\n        origin = \"https://httpbin.org/\"\n        path = \"/anything\"\n        set_request_headers = {\n          # simple variable lookup\n          x-uuid = request.id\n          # template string\n          user-agent = \"myproxyClient/${request.headers.app-version}\"\n          # expressions and function calls\n          x-env-user = env.USER != \"\" ? to_upper(env.USER) : \"UNKNOWN\"\n        }\n      }\n    }\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        origin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"https://httpbin.org/\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"/anything\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        set_request_headers "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"          # simple variable lookup\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"          x-uuid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" request.id\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"          # template string\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"          user-agent"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"myproxyClient/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"app-version"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"          # expressions and function calls\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"          x-env-user"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" env.USER "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ?"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" to_upper"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"(env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"USER"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":") : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"UNKNOWN\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"file-and-web-serving","depth":2,"text":"File and Web Serving"},{"id":"exposing-apis","depth":2,"text":"Exposing APIs"},{"id":"securing-apis","depth":2,"text":"Securing APIs"},{"id":"routing-path-mapping","depth":2,"text":"Routing: Path Mapping"},{"id":"using-variables-and-expressions","depth":2,"text":"Using Variables and Expressions"}]}},"_type":"markdown","_id":"content:1.getting-started:3.examples.md","_source":"content","_file":"1.getting-started/3.examples.md","_extension":"md"},{"_path":"/getting-started/beta-features","_dir":"getting-started","_draft":false,"_partial":false,"_locale":"","title":"About beta features","description":"We use beta features to have the possibility to develop new, complex features for you while still being able to maintain our compatibility promise.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"about-beta-features"},"children":[{"type":"text","value":"About "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"beta"}]},{"type":"text","value":" features"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We use "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"beta"}]},{"type":"text","value":" features to have the possibility to develop new, complex features for you while still being able to maintain our compatibility promise."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can see beta features as a feature preview. We will announce new beta features in the "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper/blob/master/CHANGELOG.md","rel":["nofollow"]},"children":[{"type":"text","value":"Changelog"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will keep features in beta as long as we collect feedback and are actively working on it. You can expect beta features to evolve."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"They can change with every release."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We recommended you to pin Couper to a specific "},{"type":"element","tag":"a","props":{"href":"https://hub.docker.com/r/coupergateway/couper/tags","rel":["nofollow"]},"children":[{"type":"text","value":"docker tag"}]},{"type":"text","value":" to avoid unintended updates. (Add tests to your code to make sure that nothing is going to break when you want to update to a newer version)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To make you and your colleagues aware that a beta feature is used, we will prefix all configuration items such as config blocks or functions with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_"}]},{"type":"text","value":":"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Feedback more than welcome!"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We need your feedback to make beta features to proper features. Please leave your feedback and questions "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper/discussions","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":", or open an issue. Thank you! :)"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.getting-started:4.beta-features.md","_source":"content","_file":"1.getting-started/4.beta-features.md","_extension":"md"},{"_path":"/configuration/command-line","_dir":"configuration","_draft":false,"_partial":false,"_locale":"","title":"Command Line Interface (CLI)","description":"Configure Couper with cli arguments.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"command-line-interface"},"children":[{"type":"text","value":"Command Line Interface"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper is build as binary called "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper"}]},{"type":"text","value":" with the following commands:"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Command"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"run"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Start the server with given configuration file."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"help"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Print the usage for the given command: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"help run"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"verify"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Verify the syntax of the given configuration file."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"version"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Print the current version and build information."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Most of the following command-line options map to "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"basic-options"},"children":[{"type":"text","value":"Basic Options"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Argument"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Environment"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-f"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper.hcl"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_FILE"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Path to a Couper configuration file."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-d"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_FILE_DIRECTORY"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Path to a directory containing Couper configuration files."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-p"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"8080"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_DEFAULT_PORT"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Sets the default port to the given value and does not override explicit "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"[host:port]"}]},{"type":"text","value":" configurations from file."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-e"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_ENVIRONMENT"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Name of environment in which Couper is currently running."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-watch"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_WATCH"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Watch for configuration file changes and reload on modifications."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-watch-retries"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"5"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_WATCH_RETRIES"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Maximum retry count for configuration reloads which could not bind the configured port."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-watch-retry-delay"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"500ms"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_WATCH_RETRY_DELAY"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Delay "},{"type":"element","tag":"a","props":{"href":"#duration"},"children":[{"type":"text","value":"duration"}]},{"type":"text","value":" before next attempt if an error occurs."}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: Apart from "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"e"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"p"}]},{"type":"text","value":", these options "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"do not"}]},{"type":"text","value":" map to "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: Couper can be started with multiple "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-f <file>"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-d <dir>"}]},{"type":"text","value":" arguments."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Files in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-d <dir>"}]},{"type":"text","value":" are loaded in alphabetical order. Blocks and attributes defined in later files may override those defined earlier. See "},{"type":"element","tag":"a","props":{"href":"/configuration/multiple-files"},"children":[{"type":"text","value":"Merging"}]},{"type":"text","value":" for details."}]},{"type":"element","tag":"duration","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes slack-dark","code":"$ tree\n.\n conf\n  a.hcl\n  b.hcl\n  c.hcl\n devel.hcl\n global.hcl\n\n1 directory, 5 files\n\n$ couper run -f global.hcl -d conf/ -f devel.hcl -log-level=debug\nDEBU[0000] loaded files  [/global.hcl /conf/a.hcl /conf/b.hcl /conf/c.hcl /devel.hcl] \n\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" tree\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" conf\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" a.hcl\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" b.hcl\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" c.hcl\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" devel.hcl\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" global.hcl\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" directory,"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 5"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" files\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" couper"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" run"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" -f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" global.hcl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" -d"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" conf/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" -f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" devel.hcl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" -log-level=debug\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"DEBU[0000]"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" loaded"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" files"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" [/global.hcl "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"/conf/a.hcl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" /conf/b.hcl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" /conf/c.hcl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" /devel.hcl]"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"network-options"},"children":[{"type":"text","value":"Network Options"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"| Argument        | Default | Environment Variable  | Description                                  |\n| "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-bind-address"}]},{"type":"text","value":" | "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"*\""}]},{"type":"text","value":"   | "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_BIND_ADDRESS"}]},{"type":"text","value":" | A comma-separated list of addresses to bind. |"}]},{"type":"element","tag":"h2","props":{"id":"oberservation-options"},"children":[{"type":"text","value":"Oberservation Options"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Argument"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Environment Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-health-path"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/healthz"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_HEALTH_PATH"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Path for health-check requests for all servers and ports."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-log-format"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"common"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_LOG_FORMAT"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Can be set to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"json"}]},{"type":"text","value":" output format. This is the default on containers."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-log-level"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"info"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_LOG_LEVEL"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Set the log-level to one of: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"info"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"panic"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"fatal"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"warn"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"debug"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"trace"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-log-pretty"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_LOG_PRETTY"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Option for "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"json"}]},{"type":"text","value":" log format which pretty prints with basic key coloring."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-request-id-accept-from-header"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_REQUEST_ID_ACCEPT_FROM_HEADER"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Name of a client request HTTP header field that transports the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request.id"}]},{"type":"text","value":" which Couper takes for logging and transport to the backend (if configured)."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-request-id-backend-header"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Couper-Request-ID"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_REQUEST_ID_BACKEND_HEADER"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Name of a HTTP header field which Couper uses to transport the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request.id"}]},{"type":"text","value":" to the backend."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-request-id-client-header"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Couper-Request-ID"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_REQUEST_ID_CLIENT_HEADER"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Name of a HTTP header field which Couper uses to transport the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request.id"}]},{"type":"text","value":" to the client."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-request-id-format"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"common"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_REQUEST_ID_FORMAT"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"If set to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"uuid4"}]},{"type":"text","value":" a "},{"type":"element","tag":"a","props":{"href":"https://www.rfc-editor.org/rfc/rfc4122","rel":["nofollow"]},"children":[{"type":"text","value":"RFC 4122 UUID"}]},{"type":"text","value":" is used for "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request.id"}]},{"type":"text","value":" and related log fields."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-server-timing-header"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_SERVER_TIMING_HEADER"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"If enabled, Couper includes an additional "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Server-Timing","rel":["nofollow"]},"children":[{"type":"text","value":"Server-Timing"}]},{"type":"text","value":" HTTP response header field detailing connection and transport relevant metrics for each backend request."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-beta-metrics"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_BETA_METRICS"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Option to enable the Prometheus "},{"type":"element","tag":"a","props":{"href":"/observation/metrics"},"children":[{"type":"text","value":"metrics"}]},{"type":"text","value":" exporter."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-beta-metrics-port"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"9090"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_BETA_METRICS_PORT"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Prometheus exporter listen port."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-beta-service-name"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_BETA_SERVICE_NAME"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The service name which applies to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"service_name"}]},{"type":"text","value":" metric labels."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"oberservation-environment-variables"},"children":[{"type":"text","value":"Oberservation Environment Variables"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The following environment variables have no corresponding command-line arguments or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Environment Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_ACCESS_LOG_REQUEST_HEADERS"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"User-Agent,Accept,Referer"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A comma separated list of request header names whose values should be logged."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_ACCESS_LOG_RESPONSE_HEADERS"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Cache-Control,Content-Encoding,Content-Type,Location"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A comma separated list of response header names whose values should be logged."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_ACCESS_LOG_TYPE_VALUE"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_access"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value for the log field "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"type"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_BACKEND_LOG_REQUEST_HEADERS"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"User-Agent, Accept, Referer"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A comma separated list of request header names whose values should be logged."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_BACKEND_LOG_RESPONSE_HEADERS"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Cache-Control,Content-Encoding,Content-Type,Location"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A comma separated list of response header names whose values should be logged."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_BACKEND_LOG_TYPE_VALUE"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_backend"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value for the log field "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"type"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_LOG_PARENT_FIELD"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"An option for "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"json"}]},{"type":"text","value":" log format to add all log fields as child properties."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_LOG_TYPE_VALUE"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_daemon"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value for the runtime log field "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"type"}]},{"type":"text","value":"."}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"tls-options"},"children":[{"type":"text","value":"TLS Options"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Argument"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Environment Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-ca-file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_CA_FILE"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Option for adding the given PEM encoded CA certificate to the existing system certificate pool for all outgoing connections."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-https-dev-proxy"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_HTTPS_DEV_PROXY"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"List of TLS port mappings to define the TLS listen port and the target one. A self-signed certificate will be generated on the fly based on the given hostname."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-secure-cookies"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_SECURE_COOKIES"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"If set to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"strip"}]},{"type":"text","value":", the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Secure"}]},{"type":"text","value":" flag is removed from all "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Set-Cookie"}]},{"type":"text","value":" HTTP header fields."}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"profiling-options"},"children":[{"type":"text","value":"Profiling Options"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Argument"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Environment Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-pprof"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_PPROF"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Enables profiling."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-pprof-port"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"6060"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_PPROF_PORT"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Port for profiling interface."}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"timing-environment-variables"},"children":[{"type":"text","value":"Timing Environment Variables"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The following environment variables have no corresponding command-line arguments or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Environment Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_TIMING_IDLE_TIMEOUT"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"60s"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The maximum amount of time to wait for the next request on client connections when keep-alives are enabled."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_TIMING_READ_HEADER_TIMEOUT"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"10s"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The amount of time allowed to read client request headers."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_TIMING_SHUTDOWN_DELAY"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The amount of time the server is marked as unhealthy until calling server close finally."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_TIMING_SHUTDOWN_TIMEOUT"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The maximum amount of time allowed to close the server with all running connections."}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"surrounding-architecture-options"},"children":[{"type":"text","value":"Surrounding Architecture Options"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Argument"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Environment Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-accept-forwarded-url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_ACCEPT_FORWARDED_URL"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Which "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"X-Forwarded-*"}]},{"type":"text","value":" request headers should be accepted to change the "},{"type":"element","tag":"a","props":{"href":"/configuration/variables#request"},"children":[{"type":"text","value":"request variables"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"protocol"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"host"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"port"}]},{"type":"text","value":". Comma-separated list of values. Valid values: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proto"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"host"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"port"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-no-proxy-from-env"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_NO_PROXY_FROM_ENV"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Disables the connect hop to configured "},{"type":"element","tag":"a","props":{"href":"https://godoc.org/golang.org/x/net/http/httpproxy","rel":["nofollow"]},"children":[{"type":"text","value":"proxy via environment"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-xfh"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_XFH"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Global configurations which uses the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"X-Forwarded-Host"}]},{"type":"text","value":" header instead of the request host."}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"basic-options","depth":2,"text":"Basic Options"},{"id":"example","depth":2,"text":"Example"},{"id":"network-options","depth":2,"text":"Network Options"},{"id":"oberservation-options","depth":2,"text":"Oberservation Options","children":[{"id":"oberservation-environment-variables","depth":3,"text":"Oberservation Environment Variables"}]},{"id":"tls-options","depth":2,"text":"TLS Options"},{"id":"profiling-options","depth":2,"text":"Profiling Options"},{"id":"timing-environment-variables","depth":2,"text":"Timing Environment Variables"},{"id":"surrounding-architecture-options","depth":2,"text":"Surrounding Architecture Options"}]}},"_type":"markdown","_id":"content:2.configuration:0.command-line.md","_source":"content","_file":"2.configuration/0.command-line.md","_extension":"md"},{"_path":"/configuration/configuration-file","_dir":"configuration","_draft":false,"_partial":false,"_locale":"","title":"Configuration File","description":"Overview how to configure Couper with its configuration file.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"configuration-file"},"children":[{"type":"text","value":"Configuration File"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The language for Couper's configuration file is "},{"type":"element","tag":"a","props":{"href":"https://github.com/hashicorp/hcl/tree/hcl2#information-model-and-syntax","rel":["nofollow"]},"children":[{"type":"text","value":"HCL 2.0"}]},{"type":"text","value":", a configuration language by HashiCorp."}]},{"type":"element","tag":"h2","props":{"id":"ide-extension"},"children":[{"type":"text","value":"IDE Extension"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper provides its own IDE extension that adds Couper-specific highlighting and autocompletion to Couper's configuration file "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper.hcl"}]},{"type":"text","value":" in Visual Studio Code."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Get it from the "},{"type":"element","tag":"a","props":{"href":"https://marketplace.visualstudio.com/items?itemName=couper.couperconf","rel":["nofollow"]},"children":[{"type":"text","value":"Visual Studio Market Place"}]},{"type":"text","value":" or visit the "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-vscode","rel":["nofollow"]},"children":[{"type":"text","value":"Extension repository"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"file-name"},"children":[{"type":"text","value":"File Name"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The file-ending of your configuration file should be "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".hcl"}]},{"type":"text","value":" to have syntax highlighting within your IDE."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The file name defaults to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper.hcl"}]},{"type":"text","value":" in your working directory. This can be changed with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-f"}]},{"type":"text","value":" command-line flag. With "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-f /opt/couper/my_conf.hcl"}]},{"type":"text","value":" couper changes the working directory to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/opt/couper"}]},{"type":"text","value":" and loads "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"my_conf.hcl"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"basic-file-structure"},"children":[{"type":"text","value":"Basic File Structure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper's configuration file consists of nested configuration blocks that configure\nthe gateway. There are a large number of options, but let's focus on the main structure first:"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server \"my_project\" {\n  files {\n    # ...\n  }\n\n  spa {\n    # ...\n  }\n\n  api {\n    access_control = [\"foo\"]\n    endpoint \"/bar\" {\n      proxy {\n        backend { }\n      }\n      request \"sub-request\" {\n        backend { }\n      }\n      response { }\n    }\n  }\n}\n\ndefinitions {\n  # ...\n}\n\nsettings {\n  # ...\n}\n\ndefaults {\n  # ...\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"my_project\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  files"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"    # ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  spa"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"    # ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  api"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    access_control "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"foo\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/bar\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"        backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" { }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      request"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"sub-request\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"        backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" { }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" { }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"definitions"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"settings"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"defaults"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" main configuration block(s)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" configuration block for file serving."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":" configuration block for Web serving (SPA assets)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" configuration block(s) that bundle(s) endpoints under a certain base path or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":" list."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":" attribute that sets access control for a block context."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" configuration block for Couper's entry points."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" configuration block for a proxy request and response to an origin."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" configuration block for connection to local/remote backend service(s)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" configuration block for a manual request to an origin."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" configuration block for connection to local/remote backend service(s)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"response"}]},{"type":"text","value":" configuration block for a manual client response."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block for predefined configurations, that can be referenced."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" block for server configuration which applies to the running instance."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block for default/fallback values."}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"ide-extension","depth":2,"text":"IDE Extension"},{"id":"file-name","depth":2,"text":"File Name"},{"id":"basic-file-structure","depth":2,"text":"Basic File Structure"}]}},"_type":"markdown","_id":"content:2.configuration:1.configuration-file.md","_source":"content","_file":"2.configuration/1.configuration-file.md","_extension":"md"},{"_path":"/configuration/expressions","_dir":"configuration","_draft":false,"_partial":false,"_locale":"","title":"Expressions","description":"Basic explanation of how to use hcl expressions.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"expressions"},"children":[{"type":"text","value":"Expressions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since we use "},{"type":"element","tag":"a","props":{"href":"https://github.com/hashicorp/hcl/tree/hcl2#information-model-and-syntax","rel":["nofollow"]},"children":[{"type":"text","value":"HCL 2.0"}]},{"type":"text","value":" for our configuration, we are able to use attribute values as expression."}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"// Arithmetic with literals and application-provided variables.\nsum = 1 + addend\n\n// String interpolation and templates.\nmessage = \"Hello, ${name}!\"\n\n// Application-provided functions.\nshouty_message = upper(message)\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"// Arithmetic with literals and application-provided variables.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"sum "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" +"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" addend\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"// String interpolation and templates.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"message "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"Hello, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"!\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"// Application-provided functions.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"shouty_message "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" upper"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"(message)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See "},{"type":"element","tag":"a","props":{"href":"/configuration/functions"},"children":[{"type":"text","value":"functions"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:2.expressions.md","_source":"content","_file":"2.configuration/2.expressions.md","_extension":"md"},{"_path":"/configuration/modifiers","_dir":"configuration","_draft":false,"_partial":false,"_locale":"","title":"Modifiers","description":"A set of `*_headers` attributes to manipulate HTTP header.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"modifiers"},"children":[{"type":"text","value":"Modifiers"}]},{"type":"element","tag":"h2","props":{"id":"request-header"},"children":[{"type":"text","value":"Request Header"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper offers three attributes to manipulate the request header fields. The header\nattributes can be defined unordered within the configuration file but will be\nexecuted ordered as follows:"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Modifier"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Contexts"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"remove_request_headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"List of request header to be removed from the upstream request."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"set_request_headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to set request header in the upstream request."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"add_request_headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to add request header to the upstream request."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"*_request_headers"}]},{"type":"text","value":" are executed from: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"response-header"},"children":[{"type":"text","value":"Response Header"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper offers three attributes to manipulate the response header fields. The header\nattributes can be defined unordered within the configuration file but will be\nexecuted ordered as follows:"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Modifier"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Contexts"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"remove_response_headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/files"},"children":[{"type":"text","value":"Files Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/spa"},"children":[{"type":"text","value":"SPA Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"text","value":"API Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"List of response header to be removed from the client response."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"set_response_headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/files"},"children":[{"type":"text","value":"Files Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/spa"},"children":[{"type":"text","value":"SPA Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"text","value":"API Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to set response header in the client response."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"add_response_headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/files"},"children":[{"type":"text","value":"Files Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/spa"},"children":[{"type":"text","value":"SPA Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"text","value":"API Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to add response header to the client response."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"*_response_headers"}]},{"type":"text","value":" are executed from: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"files"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"set-response-status"},"children":[{"type":"text","value":"Set Response Status"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"set_response_status"}]},{"type":"text","value":" attribute allows to modify the HTTP status code to the\ngiven value."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Modifier"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Contexts"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"set_response_status"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP status code to be set to the client response."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the HTTP status code ist set to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"204"}]},{"type":"text","value":", the response body and the HTTP header\nfield "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Content-Length"}]},{"type":"text","value":" is removed from the client response, and a warning is logged."}]},{"type":"element","tag":"h2","props":{"id":"parameters"},"children":[{"type":"text","value":"Parameters"}]},{"type":"element","tag":"h3","props":{"id":"query-parameter"},"children":[{"type":"text","value":"Query Parameter"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper offers three attributes to manipulate the query parameter. The query\nattributes can be defined unordered within the configuration file but will be\nexecuted ordered as follows:"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Modifier"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Contexts"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"remove_query_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"List of query parameters to be removed from the upstream request URL."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"set_query_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to set query parameters in the upstream request URL."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"add_query_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to add query parameters to the upstream request URL."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"*_query_params"}]},{"type":"text","value":" are executed from: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server \"my_project\" {\n  api {\n    endpoint \"/\" {\n      proxy {\n        backend = \"example\"\n      }\n    }\n  }\n}\n\ndefinitions {\n  backend \"example\" {\n    origin = \"http://example.com\"\n\n    remove_query_params = [\"a\", \"b\"]\n\n    set_query_params = {\n      string = \"string\"\n      multi = [\"foo\", \"bar\"]\n      \"${request.headers.example}\" = \"yes\"\n    }\n\n    add_query_params = {\n      noop = request.headers.noop\n      null = null\n      empty = \"\"\n    }\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"my_project\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  api"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        backend "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"example\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"definitions"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"example\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    origin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"http://example.com\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    remove_query_params "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"a\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"b\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    set_query_params "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"string\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      multi"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"foo\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"bar\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"      \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"example"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"yes\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    add_query_params "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      noop"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" request.headers.noop\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"      null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"null\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      empty"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"form-parameter"},"children":[{"type":"text","value":"Form Parameter"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper offers three attributes to manipulate the form parameter. The form\nattributes can be defined unordered within the configuration file but will be\nexecuted ordered as follows:"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Modifier"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Contexts"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"remove_form_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"List of form parameters to be removed from the upstream request body."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"set_form_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to set form parameters in the upstream request body."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"add_form_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to add form parameters to the upstream request body."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"*_form_params"}]},{"type":"text","value":" are executed from: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"*_form_params"}]},{"type":"text","value":" apply only to requests with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"POST"}]},{"type":"text","value":" method and\nthe "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Content-Type: application/x-www-form-urlencoded"}]},{"type":"text","value":" HTTP header field."}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server \"my_project\" {\n  api {\n    endpoint \"/\" {\n      proxy {\n        backend = \"example\"\n      }\n    }\n  }\n}\n\ndefinitions {\n  backend \"example\" {\n    origin = \"http://example.com\"\n\n    remove_form_params = [\"a\", \"b\"]\n\n    set_form_params = {\n      string = \"string\"\n      multi = [\"foo\", \"bar\"]\n      \"${request.headers.example}\" = \"yes\"\n    }\n\n    add_form_params = {\n      noop = request.headers.noop\n      null = null\n      empty = \"\"\n    }\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"my_project\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  api"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        backend "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"example\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"definitions"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"example\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    origin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"http://example.com\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    remove_form_params "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"a\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"b\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    set_form_params "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"string\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      multi"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"foo\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"bar\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"      \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"example"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"yes\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    add_form_params "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      noop"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" request.headers.noop\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"      null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"null\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      empty"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"request-header","depth":2,"text":"Request Header"},{"id":"response-header","depth":2,"text":"Response Header"},{"id":"set-response-status","depth":2,"text":"Set Response Status"},{"id":"parameters","depth":2,"text":"Parameters","children":[{"id":"query-parameter","depth":3,"text":"Query Parameter"},{"id":"form-parameter","depth":3,"text":"Form Parameter"}]}]}},"_type":"markdown","_id":"content:2.configuration:3.modifiers.md","_source":"content","_file":"2.configuration/3.modifiers.md","_extension":"md"},{"_path":"/configuration/block/api","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"API","description":"The api block bundles endpoints under a certain base_path.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"api"},"children":[{"type":"text","value":"API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" block bundles endpoints under a certain "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"base_path"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If an error occurred for api endpoints the response gets processed\nas JSON error with an error body payload. This can be customized via "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_file"}]},{"type":"text","value":"."}]}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Optional"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"attribute-allowed_methods"},"children":[{"type":"text","value":"Attribute "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"allowed_methods"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The default value "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" can be combined with additional methods. Methods are matched case-insensitively. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Access-Control-Allow-Methods"}]},{"type":"text","value":" is only sent in response to a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/cors"},"children":[{"type":"text","value":"CORS"}]},{"type":"text","value":" preflight request, if the method requested by "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Access-Control-Request-Method"}]},{"type":"text","value":" is an allowed method."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Example:"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"allowed_methods = [\"GET\", \"POST\"]"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"allowed_methods = [\"*\", \"BREW\"]"}]}]},{"type":"element","tag":"h3","props":{"id":"attribute-required_permission"},"children":[{"type":"text","value":"Attribute "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"required_permission"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the value is a string, the same permission applies to all request methods. If there are different permissions for different request methods, use an object with the request methods as keys and string values. Methods not specified in this object are not permitted. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"*\""}]},{"type":"text","value":" is the key for \"all other standard methods\". Methods other than "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HEAD"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"POST"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PUT"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PATCH"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DELETE"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"OPTIONS"}]},{"type":"text","value":" must be specified explicitly. A value "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"\""}]},{"type":"text","value":" means \"no permission required\"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Example:"}]}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"required_permission = \"read\"\n# or\nrequired_permission = { post = \"write\", \"*\" = \"\" }\n# or\nrequired_permission = default(request.path_params.p, \"not_set\")\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"required_permission "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"read\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# or\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"required_permission "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"write\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"*\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# or\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"required_permission "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"(request"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"path_params"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"not_set\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[]\",\"description\":\"Sets predefined [access control](/configuration/access-control) for this block.\",\"name\":\"access_control\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as response headers in the client response.\",\"name\":\"add_response_headers\",\"type\":\"object\"},{\"default\":\"*\",\"description\":\"Sets allowed methods as _default_ for all contained endpoints. Requests with a method that is not allowed result in an error response with a `405 Method Not Allowed` status.\",\"name\":\"allowed_methods\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Configures the path prefix for all requests.\",\"name\":\"base_path\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"[]\",\"description\":\"Disables access controls by name.\",\"name\":\"disable_access_control\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Location of the error file template.\",\"name\":\"error_file\",\"type\":\"string\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the client response.\",\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Permission required to use this API (see [error type](/configuration/error-handling#error-types) `insufficient_permissions`).\",\"name\":\"required_permission\",\"type\":\"string or object (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as response headers in the client response.\",\"name\":\"set_response_headers\",\"type\":\"object\"}]"},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures [CORS](/configuration/block/cors) settings (zero or one).\",\"name\":\"cors\"},{\"description\":\"Configures an [endpoint](/configuration/block/endpoint) (zero or more).\",\"name\":\"endpoint\"},{\"description\":\"Configures an [error handler](/configuration/block/error_handler) (zero or more).\",\"name\":\"error_handler\"}]"},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"attribute-allowed_methods","depth":3,"text":"Attribute allowed_methods"},{"id":"attribute-required_permission","depth":3,"text":"Attribute required_permission"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:api.md","_source":"content","_file":"2.configuration/4.block/api.md","_extension":"md"},{"_path":"/configuration/block/backend_tls","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"TLS (Backend)","description":"TLS settings for the related backend.","draft":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"tls-backend"},"children":[{"type":"text","value":"TLS (Backend)"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tls"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper has a command-line argument to add a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ca-file"}]},{"type":"text","value":" to the backend CA-Pool for all backends.\nHowever, this "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tls"}]},{"type":"text","value":" block allows a more specific pool configuration per backend if the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server_ca_certificate"}]},{"type":"text","value":" or\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server_ca_certificate_file"}]},{"type":"text","value":" is provided."}]},{"type":"element","tag":"h3","props":{"id":"mtls"},"children":[{"type":"text","value":"mTLS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Additionally the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client_certificate"}]},{"type":"text","value":"(or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client_certificate_file"}]},{"type":"text","value":") and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client_private_key"}]},{"type":"text","value":" (or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client_private_key_file"}]},{"type":"text","value":")\nattributes allow the backend to present certificate and key during a TLS handshake to an origin which requires them due to an mTLS setup."}]},{"type":"element","tag":"h4","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"backend \"secured\" {\n    origin = \"https://localhost\"\n\n    tls {\n      server_ca_certificate_file = \"rootCA.crt\"\n      # optional\n      client_certificate_file = \"client.crt\"\n      client_private_key_file = \"client.key\"\n    }\n  }\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"secured\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    origin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"https://localhost\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    tls"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      server_ca_certificate_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"rootCA.crt\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"      # optional\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      client_certificate_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"client.crt\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      client_private_key_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"client.key\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Public part of the client certificate in DER or PEM format. Mutually exclusive with `client_certificate_file`.\",\"name\":\"client_certificate\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the client certificate file in DER or PEM format. Mutually exclusive with `client_certificate`.\",\"name\":\"client_certificate_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Private part of the client certificate in DER or PEM format. Required to complete an mTLS handshake. Mutually exclusive with `client_private_key_file`.\",\"name\":\"client_private_key\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the private part of the client certificate file in DER or PEM format. Required to complete an mTLS handshake. Mutually exclusive with `client_private_key`.\",\"name\":\"client_private_key_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Public part of the certificate authority in DER or PEM format. Mutually exclusive with `server_ca_certificate_file`.\",\"name\":\"server_ca_certificate\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the certificate authority file in DER or PEM format. Mutually exclusive with `server_ca_certificate`.\",\"name\":\"server_ca_certificate_file\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"mtls","depth":3,"text":"mTLS"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:backend_tls.md","_source":"content","_file":"2.configuration/4.block/backend_tls.md","_extension":"md"},{"_path":"/configuration/block/backend","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Backend","description":"The backend defines the connection pool with given origin for outgoing connections.","draft":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"backend"},"children":[{"type":"text","value":"Backend"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block defines the connection to a local/remote backend service."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Backends can be defined in the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":" and referenced by "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/request"},"children":[{"type":"text","value":"Request Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/jwt"},"children":[{"type":"text","value":"JWT Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/beta_oauth2"},"children":[{"type":"text","value":"OAuth2 AC (Beta) Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"text","value":"OIDC Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":" required, if defined in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Key/value pairs to add form parameters to the upstream request body.\",\"name\":\"add_form_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add query parameters to the upstream request URL.\",\"name\":\"add_query_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as request headers in the upstream request.\",\"name\":\"add_request_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as response headers in the client response.\",\"name\":\"add_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Basic auth for the upstream request with format `user:pass`.\",\"name\":\"basic_auth\",\"type\":\"string\"},{\"default\":\"\\\"10s\\\"\",\"description\":\"The total timeout for dialing and connect to the origin.\",\"name\":\"connect_timeout\",\"type\":\"duration\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"false\",\"description\":\"Disables the peer certificate validation. Must not be used in backend refinement.\",\"name\":\"disable_certificate_validation\",\"type\":\"bool\"},{\"default\":\"false\",\"description\":\"Disables reusage of connections to the origin. Must not be used in backend refinement.\",\"name\":\"disable_connection_reuse\",\"type\":\"bool\"},{\"default\":\"\",\"description\":\"Value of the HTTP host header field for the origin request. Since hostname replaces the request host the value will also be used for a server identity check during a TLS handshake with the origin.\",\"name\":\"hostname\",\"type\":\"string\"},{\"default\":\"false\",\"description\":\"Enables the HTTP2 support. Must not be used in backend refinement.\",\"name\":\"http2\",\"type\":\"bool\"},{\"default\":\"0\",\"description\":\"The maximum number of concurrent connections in any state (_active_ or _idle_) to the origin. Must not be used in backend refinement.\",\"name\":\"max_connections\",\"type\":\"number\"},{\"default\":\"\",\"description\":\"URL to connect to for backend requests.\",\"name\":\"origin\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Changeable part of upstream URL.\",\"name\":\"path\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Prefixes all backend request paths with the given prefix.\",\"name\":\"path_prefix\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"A proxy URL for the related origin request.\",\"name\":\"proxy\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"List of names to remove form parameters from the upstream request body.\",\"name\":\"remove_form_params\",\"type\":\"object\"},{\"default\":\"[]\",\"description\":\"List of names to remove query parameters from the upstream request URL.\",\"name\":\"remove_query_params\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the upstream request.\",\"name\":\"remove_request_headers\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the client response.\",\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to set query parameters in the upstream request URL.\",\"name\":\"set_form_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set query parameters in the upstream request URL.\",\"name\":\"set_query_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as request headers in the upstream request.\",\"name\":\"set_request_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as response headers in the client response.\",\"name\":\"set_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Modifies the response status code.\",\"name\":\"set_response_status\",\"type\":\"number\"},{\"default\":\"\\\"300s\\\"\",\"description\":\"The total deadline duration a backend request has for write and read/pipe.\",\"name\":\"timeout\",\"type\":\"duration\"},{\"default\":\"\\\"60s\\\"\",\"description\":\"The duration from writing the full request to the origin and receiving the answer.\",\"name\":\"ttfb_timeout\",\"type\":\"duration\"},{\"default\":\"false\",\"description\":\"Ignores the health state and continues with the outgoing request.\",\"name\":\"use_when_unhealthy\",\"type\":\"bool\"}]"},"children":[]},{"type":"element","tag":"duration","props":{},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a [health check](/configuration/block/health) (zero or one).\",\"name\":\"beta_health\"},{\"description\":\"Configures [rate limiting](/configuration/block/rate_limit) (zero or one).\",\"name\":\"beta_rate_limit\"},{\"description\":\"Configures a [token request authorization](/configuration/block/token_request) (zero or more).\",\"name\":\"beta_token_request\"},{\"description\":\"Configures an [OAuth2 authorization](/configuration/block/oauth2) (zero or one).\",\"name\":\"oauth2\"},{\"description\":\"Configures [OpenAPI validation](/configuration/block/openapi) (zero or one).\",\"name\":\"openapi\"},{\"description\":\"Configures [backend TLS](/configuration/block/backend_tls) (zero or one).\",\"name\":\"tls\"}]"},"children":[]},{"type":"element","tag":"h2","props":{"id":"refining-a-referenced-backend"},"children":[{"type":"text","value":"Refining a referenced backend"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Referenced backends may be \"refined\" by using a labeled "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block in places where an unlabeled "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block would also be allowed, e.g. in a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" block:"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"    proxy {\n      backend \"ref_be\" {      # refine referenced backend\n        path = \"/b\"           # override existing attribute value\n        add_form_params = {   # set new attribute\n          # ...\n        }\n      }\n    }\n\n# ...\n\ndefinitions {\n  backend \"ref_be\" {\n    origin = \"https://example.com\"\n    path = \"/a\"\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"ref_be\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {      "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# refine referenced backend\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"/b\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"           # override existing attribute value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        add_form_params "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {   "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# set new attribute\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"          # ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"definitions"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"ref_be\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    origin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"https://example.com\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"/a\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If an attribute is set in both the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"referenced"}]},{"type":"text","value":" and the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"refining"}]},{"type":"text","value":" block, the value in the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"refining"}]},{"type":"text","value":" block is used."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" Child "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"blocks"}]},{"type":"text","value":" and the following "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"attributes"}]},{"type":"text","value":" are not allowed in refining "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" blocks:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"disable_certificate_validation"}]},{"type":"text","value":","}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"disable_connection_reuse"}]},{"type":"text","value":","}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"http2"}]},{"type":"text","value":" and"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"max_connections"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"refining-a-referenced-backend","depth":2,"text":"Refining a referenced backend"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:backend.md","_source":"content","_file":"2.configuration/4.block/backend.md","_extension":"md"},{"_path":"/configuration/block/basic_auth","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Basic Auth","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"basic-auth"},"children":[{"type":"text","value":"Basic Auth"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"basic_auth"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"required"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The  "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"basic_auth"}]},{"type":"text","value":" block lets you configure basic auth for your gateway. Like all\n"},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"basic_auth"}]},{"type":"text","value":" block is defined in the\n"},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block"}]},{"type":"text","value":" and can be referenced in all configuration\nblocks by its required "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If both "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user"}]},{"type":"text","value":"/"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"password"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"htpasswd_file"}]},{"type":"text","value":" are configured, the incoming\ncredentials from the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Authorization"}]},{"type":"text","value":" request HTTP header field are checked against\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user"}]},{"type":"text","value":"/"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"password"}]},{"type":"text","value":" if the user matches, and against the data in the file referenced\nby "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"htpasswd_file"}]},{"type":"text","value":" otherwise."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user"}]},{"type":"text","value":" is accessible via "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request.context.<label>.user"}]},{"type":"text","value":" variable for successfully authenticated requests."}]},{"type":"element","tag":"h3","props":{"id":"attribute-htpasswd_file"},"children":[{"type":"text","value":"Attribute "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"htpasswd_file"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper uses "},{"type":"element","tag":"a","props":{"href":"https://httpd.apache.org/docs/current/programs/htpasswd.html","rel":["nofollow"]},"children":[{"type":"text","value":"Apache's httpasswd"}]},{"type":"text","value":" file format. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"apr1"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"md5"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bcrypt"}]},{"type":"text","value":" password encryption are supported. The file is loaded once at startup. Restart Couper after you have changed it."}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"The htpasswd file.\",\"name\":\"htpasswd_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The corresponding password.\",\"name\":\"password\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The realm to be sent in a WWW-Authenticate response HTTP header field.\",\"name\":\"realm\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The user name.\",\"name\":\"user\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures an [error handler](/configuration/block/error_handler) (zero or more).\",\"name\":\"error_handler\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"attribute-htpasswd_file","depth":3,"text":"Attribute htpasswd_file"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:basic_auth.md","_source":"content","_file":"2.configuration/4.block/basic_auth.md","_extension":"md"},{"_path":"/configuration/block/beta_oauth2","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"OAuth2 AC (Beta)","description":"The beta_oauth2 block lets you configure the oauth2_authorization_url() function and an access\ncontrol for an OAuth2 Authorization Code Grant Flow redirect endpoint.\nLike all access control types, the beta_oauth2 block is defined in the definitions block and can be referenced in all configuration blocks by its required label.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"oauth2-ac-beta"},"children":[{"type":"text","value":"OAuth2 AC (Beta)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_oauth2"}]},{"type":"text","value":" block lets you configure the "},{"type":"element","tag":"a","props":{"href":"/configuration/functions"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oauth2_authorization_url()"}]},{"type":"text","value":" function"}]},{"type":"text","value":" and an access\ncontrol for an OAuth2 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Authorization Code Grant Flow"}]},{"type":"text","value":" redirect endpoint.\nLike all "},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_oauth2"}]},{"type":"text","value":" block is defined in the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block"}]},{"type":"text","value":" and can be referenced in all configuration blocks by its required "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_oauth2"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":" required"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A nested "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_signing_profile"}]},{"type":"text","value":" block is used to create a client assertion if "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"token_endpoint_auth_method"}]},{"type":"text","value":" is either "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"client_secret_jwt\""}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"private_key_jwt\""}]},{"type":"text","value":"."}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"The authorization server endpoint URL used for authorization.\",\"name\":\"authorization_endpoint\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"References a [backend](/configuration/block/backend) in [definitions](/configuration/block/definitions) for token requests. Mutually exclusive with `backend` block.\",\"name\":\"backend\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The client identifier.\",\"name\":\"client_id\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The client password. Required unless `token_endpoint_auth_method` is `\\\"private_key_jwt\\\"`.\",\"name\":\"client_secret\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"The grant type. Required, to be set to: `\\\"authorization_code\\\"`\",\"name\":\"grant_type\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The Couper endpoint for receiving the authorization code. Relative URL references are resolved against the origin of the current request URL. The origin can be changed with the [`accept_forwarded_url` attribute](/configuration/block/settings) if Couper is running behind a proxy.\",\"name\":\"redirect_uri\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"A space separated list of requested scope values for the access token.\",\"name\":\"scope\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The authorization server endpoint URL used for requesting the token.\",\"name\":\"token_endpoint\",\"type\":\"string\"},{\"default\":\"\\\"client_secret_basic\\\"\",\"description\":\"Defines the method to authenticate the client at the token endpoint. If set to `\\\"client_secret_post\\\"`, the client credentials are transported in the request body. If set to `\\\"client_secret_basic\\\"`, the client credentials are transported via Basic Authentication. If set to `\\\"client_secret_jwt\\\"`, the client is authenticated via a JWT signed with the `client_secret`. If set to `\\\"private_key_jwt\\\"`, the client is authenticated via a JWT signed with its private key (see `jwt_signing_profile` block).\",\"name\":\"token_endpoint_auth_method\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The method to verify the integrity of the authorization code flow. Available values: `\\\"ccm_s256\\\"` (`code_challenge` parameter with `code_challenge_method` `S256`), `\\\"state\\\"` (`state` parameter)\",\"name\":\"verifier_method\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The value of the (unhashed) verifier. E.g. using cookie value created with `oauth2_verifier()` function](../functions)\",\"name\":\"verifier_value\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the authorization server supports the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"code_challenge_method"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"S256"}]},{"type":"text","value":" (a.k.a. PKCE, see RFC 7636), we recommend "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"verifier_method = \"ccm_s256\""}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The HTTP header field "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Accept: application/json"}]},{"type":"text","value":" is automatically added to the token request. This can be modified with "},{"type":"element","tag":"a","props":{"href":"/configuration/modifiers#request-header"},"children":[{"type":"text","value":"request header modifiers"}]},{"type":"text","value":" in a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"backend block"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a [backend](/configuration/block/backend) for token requests (zero or one). Mutually exclusive with `backend` attribute.\",\"name\":\"backend\"},{\"description\":\"Configures an [error handler](/configuration/block/error_handler) (zero or more).\",\"name\":\"error_handler\"},{\"description\":\"Configures a [JWT signing profile](/configuration/block/jwt_signing_profile) to create a client assertion if `token_endpoint_auth_method` is either `\\\"client_secret_jwt\\\"` or `\\\"private_key_jwt\\\"` (zero or one).\",\"name\":\"jwt_signing_profile\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:beta_oauth2.md","_source":"content","_file":"2.configuration/4.block/beta_oauth2.md","_extension":"md"},{"_path":"/configuration/block/client_certificate","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Client Certificate","description":"The `client_certificate` block is part of its parent `tls` block. Enables mTLS configuration.","draft":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"client-certificate"},"children":[{"type":"text","value":"Client Certificate"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client_certificate"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server_tls"},"children":[{"type":"text","value":"tls Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"optional"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Define an optional "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client_certificate"}]},{"type":"text","value":" block with its optional "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":" to enable "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"mTLS"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"mTLS:"}]},{"type":"text","value":" stands for mutual TLS and will extend the normal handshake process with an additional request (client must present the certificate) and verification for the configured client certificate (CA)."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Configuring a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ca_certificate"}]},{"type":"text","value":" is the standard way to specify a client certificate. But you can also provide the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"leaf_certificate"}]},{"type":"text","value":"\nwhich effectively is the client certificate. The server will verify the given client certificate byte by byte against its own leaf certificate.\nA combination of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ca_certificate"}]},{"type":"text","value":"(or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ca_certificate_file"}]},{"type":"text","value":") or/and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"leaf_certificate"}]},{"type":"text","value":"(or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"leaf_certificate_file"}]},{"type":"text","value":") is valid.\nThis covers the use-case where the CA has signed multiple client certificates and you want to limit the access to specific ones."}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"client_certificate \"IOT\" {\n  ca_certificate = \"base64_der\" # PEM or DER encoded\n  # OR\n  ca_certificate_file = \"couperIntermediate.crt\" # PEM\n\n  # OR/AND\n  # trusted client leaf cert\n\n  leaf_certificate = \"base64_der\"\n  # OR\n  leaf_certificate_file = \"couperClient.crt\" # PEM\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"client_certificate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"IOT\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  ca_certificate "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"base64_der\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM or DER encoded\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # OR\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  ca_certificate_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperIntermediate.crt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # OR/AND\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # trusted client leaf cert\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  leaf_certificate "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"base64_der\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # OR\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  leaf_certificate_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperClient.crt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Public part of the certificate authority in DER or PEM format. Mutually exclusive with `ca_certificate_file`.\",\"name\":\"ca_certificate\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the certificate authority file in DER or PEM format. Mutually exclusive with `ca_certificate`.\",\"name\":\"ca_certificate_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Public part of the client certificate in DER or PEM format. Mutually exclusive with `leaf_certificate_file`.\",\"name\":\"leaf_certificate\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the client certificate file in DER or PEM format. Mutually exclusive with `leaf_certificate`.\",\"name\":\"leaf_certificate_file\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example","depth":2,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:client_certificate.md","_source":"content","_file":"2.configuration/4.block/client_certificate.md","_extension":"md"},{"_path":"/configuration/block/cors","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"CORS","description":"The cors block configures the CORS (Cross-Origin Resource Sharing) behavior in Couper.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"cors"},"children":[{"type":"text","value":"CORS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block configures the CORS (Cross-Origin Resource Sharing) behavior in Couper."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cors"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/files"},"children":[{"type":"text","value":"Files Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/spa"},"children":[{"type":"text","value":"SPA Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"text","value":"API Block"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no label"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Access-Control-Allow-Methods"}]},{"type":"text","value":" is only sent in response to a CORS preflight request, if the method requested by "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Access-Control-Request-Method"}]},{"type":"text","value":" is an allowed method (see the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"allowed_method"}]},{"type":"text","value":" attribute for "},{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]}]},{"type":"text","value":" blocks)."}]},{"type":"element","tag":"h3","props":{"id":"attribute-allowed_origins"},"children":[{"type":"text","value":"Attribute "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"allowed_origins"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Can be either of: a string with a single specific origin, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"*\""}]},{"type":"text","value":" (all origins are allowed) or an array of specific origins."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Example:"}]}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"allowed_origins = [\"https://www.example.com\", \"https://www.another.host.org\"]\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"allowed_origins "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"https://www.example.com\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"https://www.another.host.org\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"false\",\"description\":\"Set to `true` if the response can be shared with credentialed requests (containing `Cookie` or `Authorization` HTTP header fields).\",\"name\":\"allow_credentials\",\"type\":\"bool\"},{\"default\":\"\",\"description\":\"An allowed origin or a list of allowed origins.\",\"name\":\"allowed_origins\",\"type\":\"object\"},{\"default\":\"false\",\"description\":\"Set to `true` to disable the inheritance of CORS from parent context.\",\"name\":\"disable\",\"type\":\"bool\"},{\"default\":\"\",\"description\":\"Indicates the time the information provided by the `Access-Control-Allow-Methods` and `Access-Control-Allow-Headers` response HTTP header fields.\",\"name\":\"max_age\",\"type\":\"duration\"}]"},"children":[]},{"type":"element","tag":"duration","props":{},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"attribute-allowed_origins","depth":3,"text":"Attribute allowed_origins"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:cors.md","_source":"content","_file":"2.configuration/4.block/cors.md","_extension":"md"},{"_path":"/configuration/block/defaults","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Defaults","description":"The defaults block lets you define default values.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"defaults"},"children":[{"type":"text","value":"Defaults"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block lets you define default values."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defaults"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no label"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"One or more environment variable assignments. Keys must be either identifiers or simple string expressions.\",\"name\":\"environment_variables\",\"type\":\"object\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Examples:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-examples/blob/master/env-var/README.md","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"environment_variables"}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:defaults.md","_source":"content","_file":"2.configuration/4.block/defaults.md","_extension":"md"},{"_path":"/configuration/block/definitions","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Definitions","description":"Use the definitions block to define configurations you want to reuse.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"definitions"},"children":[{"type":"text","value":"Definitions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block to define configurations you want to reuse."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" is "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"always"}]},{"type":"text","value":" defined in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no label"}]}]}]}]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configure a [backend](/configuration/block/backend) (zero or more).\",\"name\":\"backend\"},{\"description\":\"Configure a [BasicAuth access control](/configuration/block/basic_auth) (zero or more).\",\"name\":\"basic_auth\"},{\"description\":\"Configure a [job](/configuration/block/job) (zero or more).\",\"name\":\"beta_job\"},{\"description\":\"Configure an [OAuth2 assess control](/configuration/block/beta_oauth2) (zero or more).\",\"name\":\"beta_oauth2\"},{\"description\":\"Configure a [JWT access control](/configuration/block/jwt) (zero or more).\",\"name\":\"jwt\"},{\"description\":\"Configure a [JWT signing profile](/configuration/block/jwt_signing_profile) (zero or more).\",\"name\":\"jwt_signing_profile\"},{\"description\":\"Configure an [OIDC access control](/configuration/block/oidc) (zero or more).\",\"name\":\"oidc\"},{\"description\":\"Configure a [proxy](/configuration/block/proxy) (zero or more).\",\"name\":\"proxy\"},{\"description\":\"Configure a [SAML access control](/configuration/block/saml) (zero or more).\",\"name\":\"saml\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:definitions.md","_source":"content","_file":"2.configuration/4.block/definitions.md","_extension":"md"},{"_path":"/configuration/block/endpoint","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Endpoint","description":"endpoint blocks define the entry points of Couper. The required label\ndefines the path suffix for the incoming client request. Each endpoint block must\nproduce an explicit or implicit client response.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"endpoint"},"children":[{"type":"text","value":"Endpoint"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" blocks define the entry points of Couper. The required "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"\ndefines the path suffix for the incoming client request. Each "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" block must\nproduce an explicit or implicit client response."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"text","value":"API Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":" required, defines the path suffix for incoming client requests"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"endpoint-sequence"},"children":[{"type":"text","value":"Endpoint Sequence"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" and/or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" block definitions are sequential based on their "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_responses.*"}]},{"type":"text","value":" variable references\nat load-time they will be executed sequentially. Unexpected responses can be caught with "},{"type":"element","tag":"a","props":{"href":"/configuration/error-handling"},"children":[{"type":"text","value":"error handling"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"attribute-allowed_methods"},"children":[{"type":"text","value":"Attribute "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"allowed_methods"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The default value "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"*\""}]},{"type":"text","value":" can be combined with additional methods. Methods are matched case-insensitively. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Access-Control-Allow-Methods"}]},{"type":"text","value":" is only sent in response to a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/cors"},"children":[{"type":"text","value":"CORS"}]},{"type":"text","value":" preflight request, if the method requested by "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Access-Control-Request-Method"}]},{"type":"text","value":" is an allowed method."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Example:"}]}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"allowed_methods = [\"GET\", \"POST\"]` or `allowed_methods = [\"*\", \"BREW\"]\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"allowed_methods "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"GET\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"POST\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]` or `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"allowed_methods "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"*\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"BREW\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"attribute-required_permission"},"children":[{"type":"text","value":"Attribute "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"required_permission"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Overrides "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"required_permission"}]},{"type":"text","value":" in a containing "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" block. If the value is a string, the same permission applies to all request methods. If there are different permissions for different request methods, use an object with the request methods as keys and string values. Methods not specified in this object are not permitted. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"*\""}]},{"type":"text","value":" is the key for \"all other standard methods\". Methods other than "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HEAD"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"POST"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PUT"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PATCH"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DELETE"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"OPTIONS"}]},{"type":"text","value":" must be specified explicitly. A value "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"\""}]},{"type":"text","value":" means \"no permission required\". For "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" blocks with at least two "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":"s, all endpoints must have either a) no "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"required_permission"}]},{"type":"text","value":" set or b) either "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"required_permission"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"disable_access_control"}]},{"type":"text","value":" set. Otherwise, a configuration error is thrown."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Example:"}]}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"required_permission = \"read\"\n# or\nrequired_permission = { post = \"write\", \"*\" = \"\" }\n# or\nrequired_permission = default(request.path_params.p, \"not_set\")\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"required_permission "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"read\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# or\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"required_permission "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"write\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"*\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# or\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"required_permission "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"(request"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"path_params"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"not_set\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[]\",\"description\":\"Sets predefined access control for this block context.\",\"name\":\"access_control\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to add form parameters to the upstream request body.\",\"name\":\"add_form_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add query parameters to the upstream request URL.\",\"name\":\"add_query_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as request headers in the upstream request.\",\"name\":\"add_request_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as response headers in the client response.\",\"name\":\"add_response_headers\",\"type\":\"object\"},{\"default\":\"*\",\"description\":\"Sets allowed methods overriding a default set in the containing `api` block. Requests with a method that is not allowed result in an error response with a `405 Method Not Allowed` status.\",\"name\":\"allowed_methods\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"[]\",\"description\":\"Disables access controls by name.\",\"name\":\"disable_access_control\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Location of the error file template.\",\"name\":\"error_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"References a [`proxy` block](/configuration/block/proxy) in the [definitions](/configuration/block/definitions).\",\"name\":\"proxy\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"List of names to remove form parameters from the upstream request body.\",\"name\":\"remove_form_params\",\"type\":\"object\"},{\"default\":\"[]\",\"description\":\"List of names to remove query parameters from the upstream request URL.\",\"name\":\"remove_query_params\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the upstream request.\",\"name\":\"remove_request_headers\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the client response.\",\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\"},{\"default\":\"\\\"64MiB\\\"\",\"description\":\"Configures the maximum buffer size while accessing `request.form_body` or `request.json_body` content. Valid units are: `KiB`, `MiB`, `GiB`.\",\"name\":\"request_body_limit\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Permission required to use this endpoint (see [error type](/configuration/error-handling#error-types) `insufficient_permissions`).\",\"name\":\"required_permission\",\"type\":\"string or object (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to set query parameters in the upstream request URL.\",\"name\":\"set_form_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set query parameters in the upstream request URL.\",\"name\":\"set_query_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as request headers in the upstream request.\",\"name\":\"set_request_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as response headers in the client response.\",\"name\":\"set_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Modifies the response status code.\",\"name\":\"set_response_status\",\"type\":\"number\"}]"},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures an [error handler](/configuration/block/error_handler) (zero or more).\",\"name\":\"error_handler\"},{\"description\":\"Configures a [proxy](/configuration/block/proxy) (zero or more).\",\"name\":\"proxy\"},{\"description\":\"Configures a [request](/configuration/block/request) (zero or more).\",\"name\":\"request\"},{\"description\":\"Configures the [response](/configuration/block/response) (zero or one).\",\"name\":\"response\"}]"},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"endpoint-sequence","depth":2,"text":"Endpoint Sequence","children":[{"id":"attribute-allowed_methods","depth":3,"text":"Attribute allowed_methods"},{"id":"attribute-required_permission","depth":3,"text":"Attribute required_permission"}]}]}},"_type":"markdown","_id":"content:2.configuration:4.block:endpoint.md","_source":"content","_file":"2.configuration/4.block/endpoint.md","_extension":"md"},{"_path":"/configuration/block/environment","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Environment","description":"The environment block lets you refine the Couper configuration based on the set\nenvironment.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"environment"},"children":[{"type":"text","value":"Environment"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"environment"}]},{"type":"text","value":" block lets you refine the Couper configuration based on the set\n"},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#basic-options"},"children":[{"type":"text","value":"environment"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"environment"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Overall."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":" required, multiple labels are supported."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"All configuration blocks of Couper."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"environment"}]},{"type":"text","value":" block works like a preprocessor. If the label of an "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"environment"}]},{"type":"text","value":"\nblock does not match the set "},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#basic-options"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_ENVIRONMENT"}]}]},{"type":"text","value":" value, the preprocessor\nremoves this block and its content. Otherwise, the content of the block is added\nto the configuration."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Starting Couper with a configuration containing "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"environment"}]},{"type":"text","value":" blocks will fail, if "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_ENVIRONMENT"}]},{"type":"text","value":"\nis missing or empty. A default value can be set using the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" block"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Considering the following configuration with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_ENVIRONMENT"}]},{"type":"text","value":" value set to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prod"}]}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server {\n  api \"protected\" {\n    endpoint \"/secure\" {\n      environment \"prod\" {\n        access_control = [\"jwt\"]\n      }\n\n      proxy {\n        environment \"prod\" {\n          url = \"https://protected-resource.org\"\n        }\n        environment \"stage\" {\n          url = \"https://test-resource.org\"\n        }\n      }\n    }\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  api"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"protected\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/secure\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      environment"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"prod\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        access_control "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"jwt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"        environment"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"prod\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"          url "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"https://protected-resource.org\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"        environment"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"stage\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"          url "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"https://test-resource.org\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"the result will be:"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server {\n  api \"protected\" {\n    endpoint \"/secure\" {\n      access_control = [\"jwt\"]\n\n      proxy {\n        url = \"https://protected-resource.org\"\n      }\n    }\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  api"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"protected\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/secure\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      access_control "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"jwt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        url "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"https://protected-resource.org\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example","depth":2,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:environment.md","_source":"content","_file":"2.configuration/4.block/environment.md","_extension":"md"},{"_path":"/configuration/block/error_handler","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Error Handler","description":"The error_handler block lets you configure the handling of errors thrown in components configured by the parent blocks.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"error-handler"},"children":[{"type":"text","value":"Error Handler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":" block lets you configure the handling of errors thrown in components configured by the parent blocks."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The error handler label specifies which "},{"type":"element","tag":"a","props":{"href":"/configuration/error-handling#error-types"},"children":[{"type":"text","value":"error type"}]},{"type":"text","value":" should be handled. Multiple labels are allowed. The label can be omitted to catch all relevant errors. This has the same behavior as the error type "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":", that catches all errors explicitly."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Concerning child blocks and attributes, the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":" block is similar to an "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"text","value":"API Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/basic_auth"},"children":[{"type":"text","value":"Basic Auth Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/jwt"},"children":[{"type":"text","value":"JWT Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/beta_oauth2"},"children":[{"type":"text","value":"OAuth2 AC (Beta) Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"text","value":"OIDC Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/saml"},"children":[{"type":"text","value":"SAML Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"optional"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"basic_auth \"ba\" {\n  # ...\n  error_handler \"basic_auth_credentials_missing\" {\n    response {\n      status = 403\n      json_body = {\n        error = \"forbidden\"\n      }\n    }\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"basic_auth"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"ba\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  error_handler"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"basic_auth_credentials_missing\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      status "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 403\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      json_body "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"forbidden\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-examples/blob/master/error-handling-ba/README.md","rel":["nofollow"]},"children":[{"type":"text","value":"Error Handling for Access Controls"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Key/value pairs to add form parameters to the upstream request body.\",\"name\":\"add_form_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add query parameters to the upstream request URL.\",\"name\":\"add_query_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as request headers in the upstream request.\",\"name\":\"add_request_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as response headers in the client response.\",\"name\":\"add_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Location of the error file template.\",\"name\":\"error_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"List of names to remove form parameters from the upstream request body.\",\"name\":\"remove_form_params\",\"type\":\"object\"},{\"default\":\"[]\",\"description\":\"List of names to remove query parameters from the upstream request URL.\",\"name\":\"remove_query_params\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the upstream request.\",\"name\":\"remove_request_headers\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the client response.\",\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to set query parameters in the upstream request URL.\",\"name\":\"set_form_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set query parameters in the upstream request URL.\",\"name\":\"set_query_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as request headers in the upstream request.\",\"name\":\"set_request_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as response headers in the client response.\",\"name\":\"set_response_headers\",\"type\":\"object\"}]"},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a [proxy](/configuration/block/proxy) (zero or more).\",\"name\":\"proxy\"},{\"description\":\"Configures a [request](/configuration/block/request) (zero or more).\",\"name\":\"request\"},{\"description\":\"Configures the [response](/configuration/block/response) (zero or one).\",\"name\":\"response\"}]"},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example","depth":2,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:error_handler.md","_source":"content","_file":"2.configuration/4.block/error_handler.md","_extension":"md"},{"_path":"/configuration/block/files","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Files","description":"The files blocks configure the file serving. Can be defined multiple times as long as the base_path is unique.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"files"},"children":[{"type":"text","value":"Files"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" blocks configure the file serving. Can be defined multiple times as long as the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"base_path"}]},{"type":"text","value":" is unique."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"files"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Optional"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[]\",\"description\":\"Sets predefined access control for this block context.\",\"name\":\"access_control\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as response headers in the client response.\",\"name\":\"add_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Configures the path prefix for all requests.\",\"name\":\"base_path\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Location of the document root (directory).\",\"name\":\"document_root\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Location of the error file template.\",\"name\":\"error_file\",\"type\":\"string\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the client response.\",\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as response headers in the client response.\",\"name\":\"set_response_headers\",\"type\":\"object\"}]"},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures [CORS](/configuration/block/cors) settings (zero or one).\",\"name\":\"cors\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:files.md","_source":"content","_file":"2.configuration/4.block/files.md","_extension":"md"},{"_path":"/configuration/block/health","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Health","description":"Defines a recurring health check request for its backend. Results can be obtained via the backends.<label>.health variables.\nChanges in health states and related requests will be logged. Default User-Agent will be Couper / <version> health-check if not provided\nvia headers attribute. An unhealthy backend will return with a backend_unhealthy error.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"health"},"children":[{"type":"text","value":"Health"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Defines a recurring health check request for its backend. Results can be obtained via the "},{"type":"element","tag":"a","props":{"href":"/configuration/variables#backends"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backends.<label>.health"}]},{"type":"text","value":" variables"}]},{"type":"text","value":".\nChanges in health states and related requests will be logged. Default User-Agent will be "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Couper / <version> health-check"}]},{"type":"text","value":" if not provided\nvia "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"headers"}]},{"type":"text","value":" attribute. An unhealthy backend will return with a "},{"type":"element","tag":"a","props":{"href":"/configuration/error-handling#api-error-types"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_unhealthy"}]}]},{"type":"text","value":" error."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_health"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no label"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[200, 204, 301]\",\"description\":\"One of wanted response status codes.\",\"name\":\"expected_status\",\"type\":\"tuple (int)\"},{\"default\":\"\",\"description\":\"Text which the response body must contain.\",\"name\":\"expected_text\",\"type\":\"string\"},{\"default\":\"2\",\"description\":\"Failed checks needed to consider backend unhealthy.\",\"name\":\"failure_threshold\",\"type\":\"number\"},{\"default\":\"\",\"description\":\"Request HTTP header fields.\",\"name\":\"headers\",\"type\":\"object\"},{\"default\":\"\\\"1s\\\"\",\"description\":\"Time interval for recheck.\",\"name\":\"interval\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"URL path with query on backend host.\",\"name\":\"path\",\"type\":\"string\"},{\"default\":\"\\\"1s\\\"\",\"description\":\"Maximum allowed time limit which is\\tbounded by `interval`.\",\"name\":\"timeout\",\"type\":\"string\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:health.md","_source":"content","_file":"2.configuration/4.block/health.md","_extension":"md"},{"_path":"/configuration/block/job","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Job (Beta)","description":"The beta_job block lets you define recurring requests or sequences with an given interval. The job runs at startup\nand for every interval and has an own log type: job which represents the starting point with an uid for tracing\npurposes.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"job-beta"},"children":[{"type":"text","value":"Job (Beta)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_job"}]},{"type":"text","value":" block lets you define recurring requests or sequences with an given interval. The job runs at startup\nand for every interval and has an own log type: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"job"}]},{"type":"text","value":" which represents the starting point with an uid for tracing\npurposes."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_job"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"required"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"# ...\ndefinitions {\n  beta_job \"update_data\" {\n    # Execute once at the start of Couper and then every minute\n    interval = \"1m\"\n\n    request \"origin\" {\n      url             = \"/api/v1/exports/data\"\n      backend         = \"read\"\n    }\n\n    request \"update\" {\n      url     = \"/update\"\n      body    = backend_responses.origin.body\n      backend = \"write\"\n    }\n  }\n\n  backend \"read\" {\n    origin     = \"${env.MY_ORIGIN}\"\n    basic_auth = env.MY_AUTH\n  }\n\n  backend \"write\" {\n    origin = \"${env.ORIGIN_DATABASE}\"\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"definitions"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  beta_job"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"update_data\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"    # Execute once at the start of Couper and then every minute\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    interval "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"1m\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    request"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"origin\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      url             "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"/api/v1/exports/data\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      backend         "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"read\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    request"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"update\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      url     "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"/update\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      body    "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" backend_responses"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"origin"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"body\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      backend "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"write\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"read\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    origin     "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"MY_ORIGIN"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    basic_auth "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"MY_AUTH\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"write\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    origin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"ORIGIN_DATABASE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Execution interval.\",\"name\":\"interval\",\"type\":\"duration\"}]"},"children":[]},{"type":"element","tag":"duration","props":{},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a [request](/configuration/block/request) (zero or more).\",\"name\":\"request\"}]"},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example","depth":2,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:job.md","_source":"content","_file":"2.configuration/4.block/job.md","_extension":"md"},{"_path":"/configuration/block/jwt_signing_profile","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"JWT Signing Profile","description":"The jwt_signing_profile block lets you configure a JSON Web Token signing\nprofile for your gateway. It is referenced in the jwt_sign() function\nby its required label.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"jwt-signing-profile"},"children":[{"type":"text","value":"JWT Signing Profile"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_signing_profile"}]},{"type":"text","value":" block lets you configure a JSON Web Token signing\nprofile for your gateway. It is referenced in the "},{"type":"element","tag":"a","props":{"href":"/configuration/functions"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_sign()"}]},{"type":"text","value":" function"}]},{"type":"text","value":"\nby its required "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It can also be used (without "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":") in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oauth2"}]}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oidc"}]}]},{"type":"text","value":" or\n"},{"type":"element","tag":"a","props":{"href":"/configuration/block/beta_oauth2"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_oauth2"}]}]},{"type":"text","value":" blocks for "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"token_endpoint_auth_method"}]},{"type":"text","value":"s "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"client_secret_jwt\""}]},{"type":"text","value":"\nor "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"private_key_jwt\""}]},{"type":"text","value":" or in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oauth2"}]}]},{"type":"text","value":" blocks with\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"grant_type = \"urn:ietf:params:oauth:grant-type:jwt-bearer\""}]},{"type":"text","value":", in the absence of an\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"assertion"}]},{"type":"text","value":" attribute, for configuring a self-signed JWT assertion."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_signing_profile"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2"},"children":[{"type":"text","value":"OAuth2 Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/beta_oauth2"},"children":[{"type":"text","value":"OAuth2 AC (Beta) Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"text","value":"OIDC Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"required if defined in defititions"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Claims for the JWT payload, claim values are evaluated per request.\",\"name\":\"claims\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Additional HTTP header fields for the JWT, `typ` has the default value `JWT`, `alg` cannot be set.\",\"name\":\"headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Private key (in PEM format) for `RS*` and `ES*` variants or the secret for `HS*` algorithms. Mutually exclusive with `key_file`.\",\"name\":\"key\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to file containing signing key. Mutually exclusive with `key`. See `key` for more information.\",\"name\":\"key_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Algorithm used for signing: `\\\"RS256\\\"`, `\\\"RS384\\\"`, `\\\"RS512\\\"`, `\\\"HS256\\\"`, `\\\"HS384\\\"`, `\\\"HS512\\\"`, `\\\"ES256\\\"`, `\\\"ES384\\\"`, `\\\"ES512\\\"`.\",\"name\":\"signature_algorithm\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The token's time-to-live, creates the `exp` claim.\",\"name\":\"ttl\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"duration","props":{},"children":[{"type":"element","tag":"hr","props":{},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"jwt_signing_profile \"myjwt\" {\n  signature_algorithm = \"RS256\"\n  key_file = \"priv_key.pem\"\n  ttl = \"600s\"\n  claims = {\n    iss = \"MyAS\"\n    iat = unixtime()\n  }\n  headers = {\n    kid = \"my-jwk-id\"\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"jwt_signing_profile"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"myjwt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  signature_algorithm "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"RS256\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  key_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"priv_key.pem\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  ttl "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"600s\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  claims "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    iss"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"MyAS\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    iat"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" unixtime"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  headers "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    kid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"my-jwk-id\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A detailed example can be found "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-examples/blob/master/creating-jwt/README.md","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example","depth":3,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:jwt_signing_profile.md","_source":"content","_file":"2.configuration/4.block/jwt_signing_profile.md","_extension":"md"},{"_path":"/configuration/block/jwt","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"JWT","description":"The jwt block lets you configure JSON Web Token access control for your gateway.\nLike all access control types, the jwt block is defined in\nthe definitions Block and can be referenced in all configuration blocks by its\nrequired label.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"jwt"},"children":[{"type":"text","value":"JWT"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block lets you configure JSON Web Token access control for your gateway.\nLike all "},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block is defined in\nthe "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" Block"}]},{"type":"text","value":" and can be referenced in all configuration blocks by its\nrequired "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since responses from endpoints protected by JWT access controls are not publicly cacheable, a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Cache-Control: private"}]},{"type":"text","value":" header field is added to the response, unless this feature is disabled with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"disable_private_caching = true"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":" required"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"References a [backend](/configuration/block/backend) in [definitions](/configuration/block/definitions) for JWKS requests. Mutually exclusive with `backend` block.\",\"name\":\"backend\",\"type\":\"string\"},{\"default\":\"false\",\"description\":\"If set to `true` the token is obtained from a `Authorization: Bearer ...` request header. Cannot be used together with `cookie`, `header` or `token_value`.\",\"name\":\"bearer\",\"type\":\"bool\"},{\"default\":\"\",\"description\":\"Object with claims that must be given for a valid token (equals comparison with JWT payload). The claim values are evaluated per request.\",\"name\":\"claims\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Read token value from a cookie. Cannot be used together with `bearer`, `header` or `token_value`\",\"name\":\"cookie\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"false\",\"description\":\"If set to `true`, Couper does not add the `private` directive to the `Cache-Control` HTTP header field value.\",\"name\":\"disable_private_caching\",\"type\":\"bool\"},{\"default\":\"\",\"description\":\"Read token value from the given request header field. Implies `Bearer` if `Authorization` (case-insensitive) is used (deprecated!), otherwise any other header name can be used. Cannot be used together with `bearer`, `cookie` or `token_value`.\",\"name\":\"header\",\"type\":\"string\"},{\"default\":\"\\\"1h\\\"\",\"description\":\"Time period the cached JWK set stays valid after its TTL has passed.\",\"name\":\"jwks_max_stale\",\"type\":\"duration\"},{\"default\":\"\\\"1h\\\"\",\"description\":\"Time period the JWK set stays valid and may be cached.\",\"name\":\"jwks_ttl\",\"type\":\"duration\"},{\"default\":\"\",\"description\":\"URI pointing to a set of [JSON Web Keys (RFC 7517)](https://datatracker.ietf.org/doc/html/rfc7517)\",\"name\":\"jwks_url\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Public key (in PEM format) for `RS*` and `ES*` variants or the secret for `HS*` algorithm. Mutually exclusive with `key_file`.\",\"name\":\"key\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to file containing verification key. Mutually exclusive with `key`. See `key` for more information.\",\"name\":\"key_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Name of claim containing the granted permissions. The claim value must either be a string containing a space-separated list of permissions or a list of string permissions.\",\"name\":\"permissions_claim\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Mapping of granted permissions to additional granted permissions. Maps values from `permissions_claim` and those created from `roles_map`. The map is called recursively. Mutually exclusive with `permissions_map_file`.\",\"name\":\"permissions_map\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Reference to JSON file containing permission mappings. Mutually exclusive with `permissions_map`. See `permissions_map` for more information.\",\"name\":\"permissions_map_file\",\"type\":\"string\"},{\"default\":\"[]\",\"description\":\"List of claim names that must be given for a valid token.\",\"name\":\"required_claims\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Name of claim specifying the roles of the user represented by the token. The claim value must either be a string containing a space-separated list of role values or a list of string role values.\",\"name\":\"roles_claim\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Mapping of roles to granted permissions. Non-mapped roles can be assigned with `*` to specific permissions. Mutually exclusive with `roles_map_file`.\",\"name\":\"roles_map\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Reference to JSON file containing role mappings. Mutually exclusive with `roles_map`. See `roles_map` for more information.\",\"name\":\"roles_map_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Valid values: `RS256`, `RS384`, `RS512`, `HS256`, `HS384`, `HS512`, `ES256`, `ES384`, `ES512`\",\"name\":\"signature_algorithm\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Private key (in PEM format) for `RS*` and `ES*` variants. Mutually exclusive with `signing_key_file`.\",\"name\":\"signing_key\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to file containing signing key. Mutually exclusive with `signing_key`. See `signing_key` for more information.\",\"name\":\"signing_key_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The token's time-to-live (creates the `exp` claim).\",\"name\":\"signing_ttl\",\"type\":\"duration\"},{\"default\":\"\",\"description\":\"Expression to obtain the token. Cannot be used together with `bearer`, `cookie` or `header`.\",\"name\":\"token_value\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The attributes "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bearer"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cookie"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"header"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"token_value"}]},{"type":"text","value":" are mutually exclusive.\nIf all four attributes are missing, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bearer = true"}]},{"type":"text","value":" will be implied, i.e. the token will be read from the incoming "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Authorization: Bearer ..."}]},{"type":"text","value":" header."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Deprecation Note:"}]},{"type":"text","value":" Configuring "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"header = \"Authorization\""}]},{"type":"text","value":" to read from the incoming "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Authorization: Bearer ..."}]},{"type":"text","value":" header is "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"deprecated"}]},{"type":"text","value":". Use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bearer = true"}]},{"type":"text","value":" instead."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the key to verify the signatures of tokens does not change over time, it should be specified via either "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"key"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"key_file"}]},{"type":"text","value":" (together with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"signature_algorithm"}]},{"type":"text","value":").\nOtherwise, a JSON web key set should be referenced via "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwks_url"}]},{"type":"text","value":"; in this case, the tokens need a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"kid"}]},{"type":"text","value":" header."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A JWT access control configured by this block can extract permissions from"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the value of the claim specified by "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"permissions_claim"}]},{"type":"text","value":" and"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the result of mapping the value of the claim specified by "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"roles_claim"}]},{"type":"text","value":" using the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"roles_map"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block may also be referenced by the "},{"type":"element","tag":"a","props":{"href":"/configuration/functions"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_sign()"}]},{"type":"text","value":" function"}]},{"type":"text","value":", if it has a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"signing_ttl"}]},{"type":"text","value":" defined. For "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HS*"}]},{"type":"text","value":" algorithms the signing key is taken from "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"key"}]},{"type":"text","value":"/"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"key_file"}]},{"type":"text","value":", for "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"RS*"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ES*"}]},{"type":"text","value":" algorithms, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"signing_key"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"signing_key_file"}]},{"type":"text","value":" have to be specified."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" A "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"signing_ttl"}]},{"type":"text","value":" cannot have the same label as a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_signing_profile"}]},{"type":"text","value":" block."}]}]},{"type":"element","tag":"duration","props":{},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a [backend](/configuration/block/backend) for JWKS requests (zero or one). Mutually exclusive with `backend` attribute.\",\"name\":\"backend\"},{\"description\":\"Configures an [error handler](/configuration/block/error_handler) (zero or more).\",\"name\":\"error_handler\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:jwt.md","_source":"content","_file":"2.configuration/4.block/jwt.md","_extension":"md"},{"_path":"/configuration/block/oauth2","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"OAuth2","description":"The oauth2 block in the Backend Block context configures an OAuth2 flow to request a bearer token for the backend request.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"oauth2"},"children":[{"type":"text","value":"OAuth2"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oauth2"}]},{"type":"text","value":" block in the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":" context configures an OAuth2 flow to request a bearer token for the backend request."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" The token received from the authorization server's token endpoint is stored "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"per backend"}]},{"type":"text","value":". So even with flows where a user's account characteristics like username/password or email address are involved, there is no way to \"switch\" from one user to another depending on the client request."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oauth2"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no label"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A nested "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_signing_profile"}]},{"type":"text","value":" block is used in two cases:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"to create a client assertion if "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"token_endpoint_auth_method"}]},{"type":"text","value":" is either "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"client_secret_jwt\""}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"private_key_jwt\""}]},{"type":"text","value":"; or"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"to create an assertion if "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"grant_type"}]},{"type":"text","value":" is "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"urn:ietf:params:oauth:grant-type:jwt-bearer\""}]},{"type":"text","value":" and no "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"assertion"}]},{"type":"text","value":" attribute is set."}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"The assertion (JWT for jwt-bearer flow). Required if `grant_type` is `\\\"urn:ietf:params:oauth:grant-type:jwt-bearer\\\"` and no nested `jwt_signing_profile` block is present.\",\"name\":\"assertion\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"References a [backend](/configuration/block/backend) in [definitions](/configuration/block/definitions) for token requests. Mutually exclusive with `backend` block.\",\"name\":\"backend\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The client identifier. Required unless the `grant_type` is `\\\"urn:ietf:params:oauth:grant-type:jwt-bearer\\\"`.\",\"name\":\"client_id\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The client password. Required unless `token_endpoint_auth_method` is `\\\"private_key_jwt\\\"` or the `grant_type` is `\\\"urn:ietf:params:oauth:grant-type:jwt-bearer\\\"`.\",\"name\":\"client_secret\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Required, valid values: `\\\"client_credentials\\\"`, `\\\"password\\\"`, `\\\"urn:ietf:params:oauth:grant-type:jwt-bearer\\\"`.\",\"name\":\"grant_type\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The (service account's) password (for password flow). Required if grant_type is `\\\"password\\\"`.\",\"name\":\"password\",\"type\":\"string\"},{\"default\":\"1\",\"description\":\"The number of retries to get the token and resource, if the resource-request responds with `401 Unauthorized` HTTP status code.\",\"name\":\"retries\",\"type\":\"number\"},{\"default\":\"\",\"description\":\"A space separated list of requested scope values for the access token.\",\"name\":\"scope\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"URL of the token endpoint at the authorization server.\",\"name\":\"token_endpoint\",\"type\":\"string\"},{\"default\":\"\\\"client_secret_basic\\\"\",\"description\":\"Defines the method to authenticate the client at the token endpoint. If set to `\\\"client_secret_post\\\"`, the client credentials are transported in the request body. If set to `\\\"client_secret_basic\\\"`, the client credentials are transported via Basic Authentication. If set to `\\\"client_secret_jwt\\\"`, the client is authenticated via a JWT signed with the `client_secret`. If set to `\\\"private_key_jwt\\\"`, the client is authenticated via a JWT signed with its private key (see `jwt_signing_profile` block).\",\"name\":\"token_endpoint_auth_method\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The (service account's) username (for password flow). Required if grant_type is `\\\"password\\\"`.\",\"name\":\"username\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The HTTP header field "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Accept: application/json"}]},{"type":"text","value":" is automatically added to the token request. This can be modified with "},{"type":"element","tag":"a","props":{"href":"/configuration/modifiers#request-header"},"children":[{"type":"text","value":"request header modifiers"}]},{"type":"text","value":" in a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"backend block"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a [backend](/configuration/block/backend) for token requests (zero or one). Mutually exclusive with `backend` attribute.\",\"name\":\"backend\"},{\"description\":\"Configures a [JWT signing profile](/configuration/block/jwt_signing_profile) to create a client assertion if `token_endpoint_auth_method` is either `\\\"client_secret_jwt\\\"` or `\\\"private_key_jwt\\\"`, or to create an assertion if `grant_type` is `\\\"urn:ietf:params:oauth:grant-type:jwt-bearer\\\"` and no `assertion` attribute is set (zero or one).\",\"name\":\"jwt_signing_profile\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:oauth2.md","_source":"content","_file":"2.configuration/4.block/oauth2.md","_extension":"md"},{"_path":"/configuration/block/oidc","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"OIDC","description":"The oidc block lets you configure the oauth2_authorization_url() function and an access\ncontrol for an OIDC Authorization Code Grant Flow redirect endpoint.\nLike all access control types, the oidc block is defined in the definitions Block and can be referenced in all configuration blocks by its required label.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"oidc"},"children":[{"type":"text","value":"OIDC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oidc"}]},{"type":"text","value":" block lets you configure the "},{"type":"element","tag":"a","props":{"href":"/configuration/functions"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oauth2_authorization_url()"}]},{"type":"text","value":" function"}]},{"type":"text","value":" and an access\ncontrol for an OIDC "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Authorization Code Grant Flow"}]},{"type":"text","value":" redirect endpoint.\nLike all "},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oidc"}]},{"type":"text","value":" block is defined in the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" Block"}]},{"type":"text","value":" and can be referenced in all configuration blocks by its required "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oidc"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":" required"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"any "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" attributes: Do not disable the peer certificate validation with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"disable_certificate_validation = true"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A nested "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_signing_profile"}]},{"type":"text","value":" block is used to create a client assertion if "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"token_endpoint_auth_method"}]},{"type":"text","value":" is either "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"client_secret_jwt\""}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"private_key_jwt\""}]},{"type":"text","value":"."}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"References a default [backend](/configuration/block/backend) in [definitions](/configuration/block/definitions) for OpenID configuration, JWKS, token and userinfo requests. Mutually exclusive with `backend` block.\",\"name\":\"backend\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The client identifier.\",\"name\":\"client_id\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The client password. Required unless `token_endpoint_auth_method` is `\\\"private_key_jwt\\\"`.\",\"name\":\"client_secret\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"References a [backend](/configuration/block/backend) in [definitions](/configuration/block/definitions) for OpenID configuration requests.\",\"name\":\"configuration_backend\",\"type\":\"string\"},{\"default\":\"\\\"1h\\\"\",\"description\":\"Duration a cached OpenID configuration stays valid after its TTL has passed.\",\"name\":\"configuration_max_stale\",\"type\":\"duration\"},{\"default\":\"\\\"1h\\\"\",\"description\":\"The duration to cache the OpenID configuration located at `configuration_url`.\",\"name\":\"configuration_ttl\",\"type\":\"duration\"},{\"default\":\"\",\"description\":\"The OpenID configuration URL.\",\"name\":\"configuration_url\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"\\\"1h\\\"\",\"description\":\"Time period the cached JWK set stays valid after its TTL has passed.\",\"name\":\"jwks_max_stale\",\"type\":\"duration\"},{\"default\":\"\\\"1h\\\"\",\"description\":\"Time period the JWK set stays valid and may be cached.\",\"name\":\"jwks_ttl\",\"type\":\"duration\"},{\"default\":\"\",\"description\":\"References a [backend](/configuration/block/backend) in [definitions](/configuration/block/definitions) for JWKS requests.\",\"name\":\"jwks_uri_backend\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The Couper endpoint for receiving the authorization code. Relative URL references are resolved against the origin of the current request URL. The origin can be changed with the [`accept_forwarded_url` attribute](/configuration/block/settings) if Couper is running behind a proxy.\",\"name\":\"redirect_uri\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"A space separated list of requested scope values for the access token.\",\"name\":\"scope\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"References a [backend](/configuration/block/backend) in [definitions](/configuration/block/definitions) for token requests.\",\"name\":\"token_backend\",\"type\":\"string\"},{\"default\":\"\\\"client_secret_basic\\\"\",\"description\":\"Defines the method to authenticate the client at the token endpoint. If set to `\\\"client_secret_post\\\"`, the client credentials are transported in the request body. If set to `\\\"client_secret_basic\\\"`, the client credentials are transported via Basic Authentication. If set to `\\\"client_secret_jwt\\\"`, the client is authenticated via a JWT signed with the `client_secret`. If set to `\\\"private_key_jwt\\\"`, the client is authenticated via a JWT signed with its private key (see `jwt_signing_profile` block).\",\"name\":\"token_endpoint_auth_method\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"References a [backend](/configuration/block/backend) in [definitions](/configuration/block/definitions) for userinfo requests.\",\"name\":\"userinfo_backend\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The method to verify the integrity of the authorization code flow.\",\"name\":\"verifier_method\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The value of the (unhashed) verifier.\",\"name\":\"verifier_value\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In most cases, referencing one "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" (backend attribute) for all the backend requests sent by the OIDC client is enough.\nYou should only use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"configuration_backend"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwks_uri_backend"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"token_backend"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"userinfo_backend"}]},{"type":"text","value":" if you need to configure a specific behaviour for the respective request (e.g. timeouts)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the OpenID server supports the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"code_challenge_method"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"S256"}]},{"type":"text","value":" the default value for "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"verifier_method"}]},{"type":"text","value":"is "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"ccm_s256\""}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"nonce\""}]},{"type":"text","value":" otherwise."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The HTTP header field "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Accept: application/json"}]},{"type":"text","value":" is automatically added to the token request. This can be modified with "},{"type":"element","tag":"a","props":{"href":"/configuration/modifiers#request-header"},"children":[{"type":"text","value":"request header modifiers"}]},{"type":"text","value":" in a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"backend block"}]},{"type":"text","value":"."}]},{"type":"element","tag":"duration","props":{},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a default [backend](/configuration/block/backend) for OpenID configuration, JWKS, token and userinfo requests. Mutually exclusive with `backend` attribute.\",\"name\":\"backend\"},{\"description\":\"Configures an [error handler](/configuration/block/error_handler) (zero or more).\",\"name\":\"error_handler\"},{\"description\":\"Configures a [JWT signing profile](/configuration/block/jwt_signing_profile) to create a client assertion if `token_endpoint_auth_method` is either `\\\"client_secret_jwt\\\"` or `\\\"private_key_jwt\\\"`.\",\"name\":\"jwt_signing_profile\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:oidc.md","_source":"content","_file":"2.configuration/4.block/oidc.md","_extension":"md"},{"_path":"/configuration/block/openapi","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"OpenAPI","description":"The openapi block configures the backend's proxy behavior to validate outgoing\nand incoming requests to and from the origin, preventing the origin from invalid\nrequests and the Couper client from invalid answers.\nTo do so Couper uses the OpenAPI 3 standard to load\nthe definitions from a given document defined with the file attribute.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"openapi"},"children":[{"type":"text","value":"OpenAPI"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"openapi"}]},{"type":"text","value":" block configures the backend's proxy behavior to validate outgoing\nand incoming requests to and from the origin, preventing the origin from invalid\nrequests and the Couper client from invalid answers.\nTo do so Couper uses the "},{"type":"element","tag":"a","props":{"href":"https://www.openapis.org/","rel":["nofollow"]},"children":[{"type":"text","value":"OpenAPI 3 standard"}]},{"type":"text","value":" to load\nthe definitions from a given document defined with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"file"}]},{"type":"text","value":" attribute."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":" While ignoring request violations an invalid method or path would\nlead to a non-matching "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"route"}]},{"type":"text","value":" which is still required for response validations.\nIn this case the response validation will fail if not ignored, too."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"openapi"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no label"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"OpenAPI YAML definition file.\",\"name\":\"file\",\"type\":\"string\"},{\"default\":\"false\",\"description\":\"Logs request validation results, skips error handling.\",\"name\":\"ignore_request_violations\",\"type\":\"bool\"},{\"default\":\"false\",\"description\":\"Logs response validation results, skips error handling.\",\"name\":\"ignore_response_violations\",\"type\":\"bool\"}]"},"children":[]},{"type":"element","tag":"h3","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"openapi {\n  file = \"openapi.yaml\"\n  ignore_response_violations = true\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"openapi"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"openapi.yaml\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  ignore_response_violations "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can find a detailed example "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-examples/blob/master/backend-validation/README.md","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example","depth":3,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:openapi.md","_source":"content","_file":"2.configuration/4.block/openapi.md","_extension":"md"},{"_path":"/configuration/block/proxy","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Proxy","description":"The proxy block creates and executes a proxy request to a backend service.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"proxy"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" block creates and executes a proxy request to a backend service."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":" Multiple "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"/configuration/block/request"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]}]},{"type":"text","value":" blocks are executed in parallel."}]}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"See "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Label"}]},{"type":"text","value":" description below."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Label:"}]},{"type":"text","value":" If defined in an "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" block or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/request"},"children":[{"type":"text","value":"Request Block"}]},{"type":"text","value":" w/o a label has an implicit name "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"default\""}]},{"type":"text","value":". If defined in the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":", the label of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" is used as reference in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Blocks"}]},{"type":"text","value":" and the name can be defined via "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"name"}]},{"type":"text","value":" attribute. Only "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"one"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" block or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/request"},"children":[{"type":"text","value":"Request Block"}]},{"type":"text","value":" w/ label "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"default\""}]},{"type":"text","value":" per "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":" is allowed."}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Key/value pairs to add form parameters to the upstream request body.\",\"name\":\"add_form_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add query parameters to the upstream request URL.\",\"name\":\"add_query_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as request headers in the upstream request.\",\"name\":\"add_request_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as response headers in the client response.\",\"name\":\"add_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"References a [backend](/configuration/block/backend) in [definitions](/configuration/block/definitions) for the proxy request. Mutually exclusive with `backend` block.\",\"name\":\"backend\",\"type\":\"string\"},{\"default\":\"[]\",\"description\":\"If defined, the response status code will be verified against this list of codes. If the status code not included in this list an `unexpected_status` error will be thrown which can be handled with an [`error_handler`](/configuration/block/error_handler).\",\"name\":\"expected_status\",\"type\":\"tuple (int)\"},{\"default\":\"\\\"default\\\"\",\"description\":\"Defines the proxy request name. Allowed only in the [`definitions` block](/configuration/block/definitions).\",\"name\":\"name\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"List of names to remove form parameters from the upstream request body.\",\"name\":\"remove_form_params\",\"type\":\"object\"},{\"default\":\"[]\",\"description\":\"List of names to remove query parameters from the upstream request URL.\",\"name\":\"remove_query_params\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the upstream request.\",\"name\":\"remove_request_headers\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the client response.\",\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to set query parameters in the upstream request URL.\",\"name\":\"set_form_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set query parameters in the upstream request URL.\",\"name\":\"set_query_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as request headers in the upstream request.\",\"name\":\"set_request_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as response headers in the client response.\",\"name\":\"set_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"URL of the resource to request. May be relative to an origin specified in a referenced or nested `backend` block.\",\"name\":\"url\",\"type\":\"string\"},{\"default\":\"false\",\"description\":\"Allows support for WebSockets. This attribute is only allowed in the \\\"default\\\" proxy block. Other `proxy` blocks, `request` blocks or `response` blocks are not allowed within the current `endpoint` block. Mutually exclusive with `websockets` block.\",\"name\":\"websockets\",\"type\":\"bool\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url"}]},{"type":"text","value":" attribute is specified and its value is an absolute URL, the protocol and host parts must be the same as in the value of the {origin} attribute of the used backend."}]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a [backend](/configuration/block/backend) for the proxy request (zero or one). Mutually exclusive with `backend` attribute.\",\"name\":\"backend\"},{\"description\":\"Configures support for [websockets](/configuration/block/websockets) connections (zero or one). Mutually exclusive with `websockets` attribute.\",\"name\":\"websockets\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:proxy.md","_source":"content","_file":"2.configuration/4.block/proxy.md","_extension":"md"},{"_path":"/configuration/block/rate_limit","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Rate Limit (Beta)","description":"Rate limiting protects backend services. It implements quota management used to avoid cascading failures or to spare resources.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rate-limit-beta"},"children":[{"type":"text","value":"Rate Limit (Beta)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Rate limiting protects backend services. It implements quota management used to avoid cascading failures or to spare resources."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_rate_limit"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"named "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no label"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\\\"wait\\\"\",\"description\":\"If `mode` is set to `block` and the rate limit is exceeded, the client request is immediately answered with HTTP status code `429` (Too Many Requests) and no backend request is made. If `mode` is set to `wait` and the rate limit is exceeded, the request waits for the next free rate limiting period.\",\"name\":\"mode\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Defines the number of allowed backend requests in a period.\",\"name\":\"per_period\",\"type\":\"number\"},{\"default\":\"\",\"description\":\"Defines the rate limit period.\",\"name\":\"period\",\"type\":\"duration\"},{\"default\":\"\\\"sliding\\\"\",\"description\":\"Defines the window of the period. A `fixed` window permits `per_period` requests within `period` after the first request to the parent backend. After the `period` has expired, another `per_period` request is permitted. The sliding window ensures that only `per_period` requests are sent in any interval of length period.\",\"name\":\"period_window\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"duration","props":{},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:rate_limit.md","_source":"content","_file":"2.configuration/4.block/rate_limit.md","_extension":"md"},{"_path":"/configuration/block/request","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Request","description":"The request block creates and executes a request to a backend service.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"request"},"children":[{"type":"text","value":"Request"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" block creates and executes a request to a backend service."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":" Multiple "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" blocks are executed in parallel."}]}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":" A "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/request"},"children":[{"type":"text","value":"Request Block"}]},{"type":"text","value":" w/o a label has an implicit label "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"default\""}]},{"type":"text","value":". Only "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"one"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/request"},"children":[{"type":"text","value":"Request Block"}]},{"type":"text","value":" w/ label "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"default\""}]},{"type":"text","value":" per "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":" is allowed."}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"References a [backend](/configuration/block/backend) in [definitions](/configuration/block/definitions) for the request. Mutually exclusive with `backend` block.\",\"name\":\"backend\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Plain text request body, implicitly sets `Content-Type: text/plain` header field.\",\"name\":\"body\",\"type\":\"string\"},{\"default\":\"[]\",\"description\":\"If defined, the response status code will be verified against this list of codes. If the status code is not included in this list an [`unexpected_status` error](/configuration/error-handling#endpoint-error-types) will be thrown which can be handled with an [`error_handler`](/configuration/error-handling#endpoint-related-error_handler).\",\"name\":\"expected_status\",\"type\":\"tuple (int)\"},{\"default\":\"\",\"description\":\"Form request body, implicitly sets `Content-Type: application/x-www-form-urlencoded` header field.\",\"name\":\"form_body\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Same as `set_request_headers` in [Modifiers - Request Header](/configuration/modifiers#request-header).\",\"name\":\"headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"JSON request body, implicitly sets `Content-Type: application/json` header field.\",\"name\":\"json_body\",\"type\":\"string\"},{\"default\":\"\\\"GET\\\"\",\"description\":\"The request method.\",\"name\":\"method\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Key/value pairs to set query parameters for this request.\",\"name\":\"query_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"URL of the resource to request. May be relative to an origin specified in a referenced or nested `backend` block.\",\"name\":\"url\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url"}]},{"type":"text","value":" attribute is specified and its value is an absolute URL, the protocol and host parts must be the same as in the value of the {origin} attribute of the used backend."}]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a [backend](/configuration/block/backend) for the request (zero or one). Mutually exclusive with `backend` attribute.\",\"name\":\"backend\"}]"},"children":[]},{"type":"element","tag":"h3","props":{"id":"examples"},"children":[{"type":"text","value":"Examples"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"request {\n  url = \"https://httpbin.org/anything\"\n  body = \"foo\"\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  url "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"https://httpbin.org/anything\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  body "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"foo\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-examples/tree/master/custom-requests","rel":["nofollow"]},"children":[{"type":"text","value":"Sending requests"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-examples/tree/master/sending-json","rel":["nofollow"]},"children":[{"type":"text","value":"Sending JSON"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-examples/tree/master/sending-form","rel":["nofollow"]},"children":[{"type":"text","value":"Sending forms"}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"examples","depth":3,"text":"Examples"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:request.md","_source":"content","_file":"2.configuration/4.block/request.md","_extension":"md"},{"_path":"/configuration/block/response","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Response","description":"The response block creates and sends a client response.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"response"},"children":[{"type":"text","value":"Response"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"response"}]},{"type":"text","value":" block creates and sends a client response."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"response"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no label"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The response body can be omitted or must be one of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"body"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"json_body"}]},{"type":"text","value":"."}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Response body which creates implicit default `Content-Type: text/plain` header field.\",\"name\":\"body\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Same as `set_response_headers` in [Modifiers - Response Header](/configuration/modifiers#response-header).\",\"name\":\"headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"JSON response body which creates implicit default `Content-Type: application/json` header field.\",\"name\":\"json_body\",\"type\":\"null, bool, number, string, object, tuple\"},{\"default\":\"200\",\"description\":\"The HTTP status code to return.\",\"name\":\"status\",\"type\":\"number\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:response.md","_source":"content","_file":"2.configuration/4.block/response.md","_extension":"md"},{"_path":"/configuration/block/saml","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"SAML","description":"The saml block lets you configure the saml_sso_url() function and an access\ncontrol for a SAML Assertion Consumer Service (ACS) endpoint.\nLike all access control types, the saml block is defined in\nthe definitions block and can be referenced in all configuration blocks by its\nrequired label.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"saml"},"children":[{"type":"text","value":"SAML"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" block lets you configure the "},{"type":"element","tag":"a","props":{"href":"/configuration/functions"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml_sso_url()"}]},{"type":"text","value":" function"}]},{"type":"text","value":" and an access\ncontrol for a SAML Assertion Consumer Service (ACS) endpoint.\nLike all "},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" block is defined in\nthe "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block"}]},{"type":"text","value":" and can be referenced in all configuration blocks by its\nrequired "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":" required"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A complete example can be found "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-examples/tree/master/saml","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"saml \"SSO\" {\n  idp_metadata_file = \"idp-metadata.xml\"\n  sp_entity_id = env.SP_ENTITY_ID\n  sp_acs_url = \"http://localhost:8080/saml/acs\"\n  array_attributes = [\"eduPersonAffiliation\"] # or [\"memberOf\"]\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"saml"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"SSO\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  idp_metadata_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"idp-metadata.xml\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  sp_entity_id "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"SP_ENTITY_ID\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  sp_acs_url "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"http://localhost:8080/saml/acs\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  array_attributes "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"eduPersonAffiliation\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# or [\"memberOf\"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[]\",\"description\":\"A list of assertion attributes that may have several values. Results in at least an empty array in `request.context.<label>.attributes.<name>`\",\"name\":\"array_attributes\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"File reference to the Identity Provider metadata XML file.\",\"name\":\"idp_metadata_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The URL of the Service Provider's ACS endpoint. Relative URL references are resolved against the origin of the current request URL. The origin can be changed with the [`accept_forwarded_url` attribute](/configuration/block/settings) if Couper is running behind a proxy.\",\"name\":\"sp_acs_url\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The Service Provider's entity ID.\",\"name\":\"sp_entity_id\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Some information from the assertion consumed at the ACS endpoint is provided in the context at "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request.context.<label>"}]},{"type":"text","value":":"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"NameID"}]},{"type":"text","value":" of the assertion's "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Subject"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request.context.<label>.sub"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the session expiry date "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"SessionNotOnOrAfter"}]},{"type":"text","value":" (as UNIX timestamp: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request.context.<label>.exp"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the attributes ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request.context.<label>.attributes.<name>"}]},{"type":"text","value":")"}]}]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures an [error handler](/configuration/block/error_handler) (zero or more).\",\"name\":\"error_handler\"}]"},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example","depth":2,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:saml.md","_source":"content","_file":"2.configuration/4.block/saml.md","_extension":"md"},{"_path":"/configuration/block/server_certificate","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Server Certificate","description":"The `server_certificate` block is part of its parent `tls` block. Enables TLS configuration.","draft":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"server-certificate"},"children":[{"type":"text","value":"Server Certificate"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server_certificate"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server_tls"},"children":[{"type":"text","value":"tls Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"optional"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A configured "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server_certificate"}]},{"type":"text","value":" pub/key pair will be loaded once at startup and served on the related "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" port configured with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"hosts"}]},{"type":"text","value":" attribute."}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server_certificate \"api.example.com\" { #optional label\n  public_key = \"base64_DER\" # kube secret ...\n  # OR\n  public_key_file = \"couperServer.crt\" # PEM\n\n  private_key = \"base64_DER\"\n  # OR\n  private_key_file = \"couperServer.key\" # PEM\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server_certificate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"api.example.com\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"#optional label\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  public_key "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"base64_DER\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # kube secret ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # OR\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  public_key_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperServer.crt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  private_key "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"base64_DER\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # OR\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  private_key_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperServer.key\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Private part of the certificate in DER or PEM format. Mutually exclusive with `private_key_file`.\",\"name\":\"private_key\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the private part of the certificate file in DER or PEM format. Mutually exclusive with `private_key`.\",\"name\":\"private_key_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Public part of the certificate in DER or PEM format. Mutually exclusive with `public_key_file`.\",\"name\":\"public_key\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the certificate file in DER or PEM format. Mutually exclusive with `public_key`.\",\"name\":\"public_key_file\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example","depth":2,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:server_certificate.md","_source":"content","_file":"2.configuration/4.block/server_certificate.md","_extension":"md"},{"_path":"/configuration/block/server_tls","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"TLS (Server)","description":"TLS settings for the related server.","draft":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"tls-server"},"children":[{"type":"text","value":"TLS (Server)"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tls"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tls"}]},{"type":"text","value":" block allows to configure one or more server certificates in the first place.\nThe certificates will be served on all ports within the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"hosts"}]},{"type":"text","value":" list. Enabling "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tls"}]},{"type":"text","value":" also enables the upgrade option to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HTTP2"}]},{"type":"text","value":" protocol."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The simplest configuration is an empty "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tls {}"}]},{"type":"text","value":" block which will serve a self signed certificate\nfor local development."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Multiple "},{"type":"element","tag":"a","props":{"href":"/configuration/block/server_certificate"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server_certificate"}]}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/client_certificate"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client_certificate"}]}]},{"type":"text","value":" blocks are allowed."}]},{"type":"element","tag":"h2","props":{"id":"mtls"},"children":[{"type":"text","value":"mTLS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/client_certificate"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client_certificate"}]}]},{"type":"text","value":" block is defined the server automatically requests and verify a certificate from the client."}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server \"couper\" {\n  hosts = [\"*:443\"]\n\n  tls {\n    server_certificate \"api.example.com\" {\n      public_key_file = \"couperServer.crt\" # PEM\n      private_key_file = \"couperServer.key\" # PEM\n    }\n\n    # mTLS\n\n    client_certificate \"IOT\" {\n      ca_certificate_file = \"couperIntermediate.crt\" # PEM\n      # OR(AND!)\n      leaf_certificate_file = \"couperClient.crt\" # PEM\n    }\n  }\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"couper\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  hosts "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"*:443\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  tls"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    server_certificate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"api.example.com\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      public_key_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperServer.crt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      private_key_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperServer.key\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"    # mTLS\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    client_certificate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"IOT\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      ca_certificate_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperIntermediate.crt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"      # OR(AND!)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      leaf_certificate_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperClient.crt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]}]}]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a [client certificate](/configuration/block/client_certificate) (zero or more).\",\"name\":\"client_certificate\"},{\"description\":\"Configures a [server certificate](/configuration/block/server_certificate) (zero or more).\",\"name\":\"server_certificate\"}]"},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"mtls","depth":2,"text":"mTLS"},{"id":"example","depth":2,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:server_tls.md","_source":"content","_file":"2.configuration/4.block/server_tls.md","_extension":"md"},{"_path":"/configuration/block/server","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Server","description":"The server block is one of the root configuration blocks of Couper's configuration file.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"server"},"children":[{"type":"text","value":"Server"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" block is one of the root configuration blocks of Couper's configuration file."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"optional"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"attribute-hosts"},"children":[{"type":"text","value":"Attribute "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"hosts"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"hosts"}]},{"type":"text","value":" attribute allows to start multiple Couper instances with a single\nconfiguration file. You can add a specific port to your host."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Example:"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"hosts = [\"8080\", \"9090\"]"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"hosts = [\"example.com:9090\", \"*:8080\"]"}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[]\",\"description\":\"The [access controls](/configuration/access-control) to protect the server. Inherited by nested blocks.\",\"name\":\"access_control\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as response headers in the client response.\",\"name\":\"add_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"The path prefix for all requests.\",\"name\":\"base_path\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"[]\",\"description\":\"Disables access controls by name.\",\"name\":\"disable_access_control\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Location of the error file template.\",\"name\":\"error_file\",\"type\":\"string\"},{\"default\":\"[]\",\"description\":\"Mandatory, if there is more than one `server` block.\",\"name\":\"hosts\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the client response.\",\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as response headers in the client response.\",\"name\":\"set_response_headers\",\"type\":\"object\"}]"},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures an API (zero or more).\",\"name\":\"api\"},{\"description\":\"Configures [CORS](/configuration/block/cors) settings (zero or one).\",\"name\":\"cors\"},{\"description\":\"Configures a free [endpoint](/configuration/block/endpoint) (zero or more).\",\"name\":\"endpoint\"},{\"description\":\"Configures file serving (zero or more).\",\"name\":\"files\"},{\"description\":\"Configures an SPA (zero or more).\",\"name\":\"spa\"},{\"description\":\"Configures [server TLS](/configuration/block/server_tls) (zero or one).\",\"name\":\"tls\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"attribute-hosts","depth":3,"text":"Attribute hosts"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:server.md","_source":"content","_file":"2.configuration/4.block/server.md","_extension":"md"},{"_path":"/configuration/block/settings","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Settings","description":"The settings block lets you configure the more basic and global behavior of your\ngateway instance.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"settings"},"children":[{"type":"text","value":"Settings"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" block lets you configure the more basic and global behavior of your\ngateway instance."}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[]\",\"description\":\"Which `X-Forwarded-*` request HTTP header fields should be accepted to change the [request variables](/configuration/variables#request) `url`, `origin`, `protocol`, `host`, `port`. Valid values: `\\\"proto\\\"`, `\\\"host\\\"` and `\\\"port\\\"`. The port in a `X-Forwarded-Port` header takes precedence over a port in `X-Forwarded-Host`. Affects relative URL values for [`sp_acs_url`](/configuration/block/saml) attribute and `redirect_uri` attribute within [`beta_oauth2`](/configuration/block/oauth2) and [`oidc`](/configuration/block/oidc).\",\"name\":\"accept_forwarded_url\",\"type\":\"tuple (string)\"},{\"default\":\"false\",\"description\":\"Enables the Prometheus [metrics](/observation/metrics) exporter.\",\"name\":\"beta_metrics\",\"type\":\"bool\"},{\"default\":\"9090\",\"description\":\"Prometheus exporter listen port.\",\"name\":\"beta_metrics_port\",\"type\":\"number\"},{\"default\":\"\\\"couper\\\"\",\"description\":\"Service name which applies to the `service_name` metric labels.\",\"name\":\"beta_service_name\",\"type\":\"string\"},{\"default\":\"\\\"*\\\"\",\"description\":\"A comma-separated list of addresses to bind.\",\"name\":\"bind_address\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Adds the given PEM encoded CA certificate to the existing system certificate pool for all outgoing connections.\",\"name\":\"ca_file\",\"type\":\"string\"},{\"default\":\"8080\",\"description\":\"Port which will be used if not explicitly specified per host within the [`hosts`](/configuration/block/server) attribute.\",\"name\":\"default_port\",\"type\":\"number\"},{\"default\":\"\",\"description\":\"The [environment](/configuration/command-line#basic-options) Couper is to run in.\",\"name\":\"environment\",\"type\":\"string\"},{\"default\":\"\\\"/healthz\\\"\",\"description\":\"Health path for all configured servers and ports.\",\"name\":\"health_path\",\"type\":\"string\"},{\"default\":\"[]\",\"description\":\"TLS port mappings to define the TLS listen port and the target one. Self-signed certificates will be generated on the fly based on the given hostname. Certificates will be held in memory.\",\"name\":\"https_dev_proxy\",\"type\":\"tuple (string)\"},{\"default\":\"\\\"common\\\"\",\"description\":\"Tab/field based colored logs or JSON logs: `\\\"common\\\"` or `\\\"json\\\"`.\",\"name\":\"log_format\",\"type\":\"string\"},{\"default\":\"\\\"info\\\"\",\"description\":\"Sets the log level: `\\\"panic\\\"`, `\\\"fatal\\\"`, `\\\"error\\\"`, `\\\"warn\\\"`, `\\\"info\\\"`, `\\\"debug\\\"`, `\\\"trace\\\"`.\",\"name\":\"log_level\",\"type\":\"string\"},{\"default\":\"false\",\"description\":\"Global option for `json` log format which pretty prints with basic key coloring.\",\"name\":\"log_pretty\",\"type\":\"bool\"},{\"default\":\"false\",\"description\":\"Disables the connect hop to configured [proxy via environment](https://godoc.org/golang.org/x/net/http/httpproxy).\",\"name\":\"no_proxy_from_env\",\"type\":\"bool\"},{\"default\":\"false\",\"description\":\"Enables [profiling](https://github.com/google/pprof/blob/main/doc/README.md#pprof).\",\"name\":\"pprof\",\"type\":\"bool\"},{\"default\":\"6060\",\"description\":\"Port for profiling interface.\",\"name\":\"pprof_port\",\"type\":\"number\"},{\"default\":\"\",\"description\":\"Client request HTTP header field that transports the `request.id` which Couper takes for logging and transport to the backend (if configured).\",\"name\":\"request_id_accept_from_header\",\"type\":\"string\"},{\"default\":\"\\\"Couper-Request-ID\\\"\",\"description\":\"HTTP header field which Couper uses to transport the `request.id` to the backend.\",\"name\":\"request_id_backend_header\",\"type\":\"string\"},{\"default\":\"\\\"Couper-Request-ID\\\"\",\"description\":\"HTTP header field which Couper uses to transport the `request.id` to the client.\",\"name\":\"request_id_client_header\",\"type\":\"string\"},{\"default\":\"\\\"common\\\"\",\"description\":\"If set to `\\\"uuid4\\\"` an RFC 4122 UUID is used for `request.id` and related log fields. Valid values: `\\\"common\\\"` or `\\\"uuid4\\\"`.\",\"name\":\"request_id_format\",\"type\":\"string\"},{\"default\":\"\\\"\\\"\",\"description\":\"If set to `\\\"strip\\\"`, the `Secure` flag is removed from all `Set-Cookie` HTTP header fields. Valid values: `\\\"\\\"` or `\\\"strip\\\"`.\",\"name\":\"secure_cookies\",\"type\":\"string\"},{\"default\":\"false\",\"description\":\"If enabled, Couper includes an additional [Server-Timing](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Server-Timing) HTTP response header field detailing connection and transport relevant metrics for each backend request.\",\"name\":\"server_timing_header\",\"type\":\"bool\"},{\"default\":\"false\",\"description\":\"Whether to use the `X-Forwarded-Host` header as the request host.\",\"name\":\"xfh\",\"type\":\"bool\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:settings.md","_source":"content","_file":"2.configuration/4.block/settings.md","_extension":"md"},{"_path":"/configuration/block/spa","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"SPA","description":"The spa blocks configure the Web serving for SPA assets. Can be defined multiple times as long as the base_path+paths is unique.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"spa"},"children":[{"type":"text","value":"SPA"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":" blocks configure the Web serving for SPA assets. Can be defined multiple times as long as the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"base_path"}]},{"type":"text","value":"+"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"paths"}]},{"type":"text","value":" is unique."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"spa"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Optional"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"spa {\n    base_path = \"/my-app\" # mounts on /my-app(/**,/special)\n    bootstrap_file = \"./htdocs/index.html\"\n    paths = [\"/**\", \"/special\"]\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"spa"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    base_path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"/my-app\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # mounts on /my-app(/**,/special)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    bootstrap_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"./htdocs/index.html\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    paths "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"/**\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"/special\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"bootstrap-data"},"children":[{"type":"text","value":"Bootstrap Data"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As it could get complicated to configure an SPA based on its environment (urls, clientIDs, ...) Couper can\ninject those environment based values into the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bootstrap_file"}]},{"type":"text","value":" before serving it to the client."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bootstrap_data_placeholder"}]},{"type":"text","value":" will be replaced with the evaluated value of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bootstrap_data"}]},{"type":"text","value":".\nThis happens on startup and is meant to inject "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" values."}]},{"type":"element","tag":"h3","props":{"id":"bootstrap_data-example"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bootstrap_data"}]},{"type":"text","value":" Example"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"# couper.hcl\nspa {\n    bootstrap_file = \"./htdocs/index.html\"\n    paths = [\"/**\"]\n    bootstrap_data = {\n      url: env.MY_API_URL,\n      prop: \"value\",\n    }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# couper.hcl\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"spa"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    bootstrap_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"./htdocs/index.html\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    paths "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"/**\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    bootstrap_data "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      url: env.MY_API_URL,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      prop: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"value\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-html shiki shiki-themes slack-dark","code":"<!-- ./htdocs/index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <script>\n      try {\n        window.AppConfig = __BOOTSTRAP_DATA__;\n      } catch(e) {\n        console.warn('DEVELOPMENT MODE: ', e)\n        window.AppConfig = {} // fallback for local development\n      }\n    </script>\n  </head>\n  <body>App</body>\n</html>\n","language":"html","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"<!-- ./htdocs/index.html -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"<!"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"DOCTYPE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" html"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" lang"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"en\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"head"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"      try"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        window"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"AppConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"__BOOTSTRAP_DATA__"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"      } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"warn"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"'DEVELOPMENT MODE: '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        window"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"AppConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = {} "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"// fallback for local development\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"head"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"App"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The result would be the following snippet. Just place this "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<script>"}]},{"type":"text","value":" tag before all other script references in the head tag.\nThen the application can access the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"window.AppConfig"}]},{"type":"text","value":" object to bootstrap its configuration."}]},{"type":"element","tag":"pre","props":{"className":"language-html shiki shiki-themes slack-dark","code":"<!-- ... -->\n  <script>\n    try {\n      window.AppConfig = {\n        \"url\": \"https://docs.couper.io/\",\n        \"prop\": \"value\",\n      };\n    } catch(e) {\n      console.warn('DEVELOPMENT MODE: ', e)\n      window.AppConfig = {} // fallback for local development\n    }\n  </script>\n<!-- ... -->\n","language":"html","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"<!-- ... -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"    try"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      window"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"AppConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"        \"url\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"https://docs.couper.io/\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"        \"prop\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"value\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"      };\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"warn"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"'DEVELOPMENT MODE: '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      window"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"AppConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = {} "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"// fallback for local development\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"<!-- ... -->\n"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[]\",\"description\":\"Sets predefined [access control](/configuration/access-control) for `spa` block context.\",\"name\":\"access_control\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as response headers in the client response.\",\"name\":\"add_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Configures the path prefix for all requests.\",\"name\":\"base_path\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"JSON object which replaces the placeholder from `bootstrap_file` content.\",\"name\":\"bootstrap_data\",\"type\":\"object\"},{\"default\":\"\\\"__BOOTSTRAP_DATA__\\\"\",\"description\":\"String which will be replaced with `bootstrap_data`.\",\"name\":\"bootstrap_data_placeholder\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Location of the bootstrap file.\",\"name\":\"bootstrap_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"[]\",\"description\":\"Disables access controls by name.\",\"name\":\"disable_access_control\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of SPA paths that need the bootstrap file.\",\"name\":\"paths\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the client response.\",\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as response headers in the client response.\",\"name\":\"set_response_headers\",\"type\":\"object\"}]"},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures [CORS](/configuration/block/cors) settings (zero or one).\",\"name\":\"cors\"}]"},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"bootstrap-data","depth":2,"text":"Bootstrap Data","children":[{"id":"bootstrap_data-example","depth":3,"text":"bootstrap_data Example"}]}]}},"_type":"markdown","_id":"content:2.configuration:4.block:spa.md","_source":"content","_file":"2.configuration/4.block/spa.md","_extension":"md"},{"_path":"/configuration/block/token_request","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Token Request (Beta)","description":"The beta_token_request block in the Backend Block context configures a request to get a token used to authorize backend requests.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"token-request-beta"},"children":[{"type":"text","value":"Token Request (Beta)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_token_request"}]},{"type":"text","value":" block in the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":" context configures a request to get a token used to authorize backend requests."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_token_request"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":" A "},{"type":"element","tag":"a","props":{"href":"/configuration/block/token_request"},"children":[{"type":"text","value":"Token Request (Beta) Block"}]},{"type":"text","value":" w/o a label has an implicit label "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"default\""}]},{"type":"text","value":". Only "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"one"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"/configuration/block/token_request"},"children":[{"type":"text","value":"Token Request (Beta) Block"}]},{"type":"text","value":" w/ label "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"default\""}]},{"type":"text","value":" per "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":" is allowed."}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"References a [backend](/configuration/block/backend) in [definitions](/configuration/block/definitions) for the token request. Mutually exclusive with `backend` block.\",\"name\":\"backend\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Creates implicit default `Content-Type: text/plain` header field.\",\"name\":\"body\",\"type\":\"string\"},{\"default\":\"[]\",\"description\":\"If defined, the response status code will be verified against this list of status codes, If the status code is unexpected a `beta_backend_token_request` error can be handled with an `error_handler`.\",\"name\":\"expected_status\",\"type\":\"tuple (int)\"},{\"default\":\"\",\"description\":\"Creates implicit default `Content-Type: application/x-www-form-urlencoded` header field.\",\"name\":\"form_body\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Sets the given request HTTP header fields.\",\"name\":\"headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Creates implicit default `Content-Type: application/json` header field.\",\"name\":\"json_body\",\"type\":\"null, bool, number, string, object, tuple\"},{\"default\":\"\\\"GET\\\"\",\"description\":\"The request method.\",\"name\":\"method\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Sets the URL query parameters.\",\"name\":\"query_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"The token to be stored in `backends.<backend_name>.tokens.<token_request_name>`.\",\"name\":\"token\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The time span for which the token is to be stored.\",\"name\":\"ttl\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"URL of the resource to request the token from. May be relative to an origin specified in a referenced or nested `backend` block.\",\"name\":\"url\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url"}]},{"type":"text","value":" attribute is specified and its value is an absolute URL, the protocol and host parts must be the same as in the value of the {origin} attribute of the used backend."}]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a [backend](/configuration/block/backend) for the token request (zero or one). Mutually exclusive with `backend` attribute.\",\"name\":\"backend\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:token_request.md","_source":"content","_file":"2.configuration/4.block/token_request.md","_extension":"md"},{"_path":"/configuration/block/websockets","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"WebSockets","description":"The websockets block activates support for WebSocket connections in Couper.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"websockets"},"children":[{"type":"text","value":"WebSockets"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"websockets"}]},{"type":"text","value":" block activates support for WebSocket connections in Couper."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"websockets"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no label"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Key/value pairs to add as request headers in the upstream request.\",\"name\":\"add_request_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as response headers in the client response.\",\"name\":\"add_response_headers\",\"type\":\"object\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the upstream request.\",\"name\":\"remove_request_headers\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the client response.\",\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as request headers in the upstream request.\",\"name\":\"set_request_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as response headers in the client response.\",\"name\":\"set_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"The total deadline [duration](#duration) a WebSocket connection has to exist.\",\"name\":\"timeout\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"duration","props":{},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:websockets.md","_source":"content","_file":"2.configuration/4.block/websockets.md","_extension":"md"},{"_path":"/configuration/variables","_dir":"configuration","_draft":false,"_partial":false,"_locale":"","title":"Variables","description":"Powerful usage for different kinds of variables.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"variables"},"children":[{"type":"text","value":"Variables"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The configuration file allows the use of some predefined variables. There are two phases when those variables get evaluated.\nThe first phase is at config load which is currently related to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" and simple "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"function"}]},{"type":"text","value":" usage.\nThe second evaluation will happen during the request/response handling."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" are the environment variables."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" is the client request."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_requests"}]},{"type":"text","value":" contains all modified backend requests."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_responses"}]},{"type":"text","value":" contains all original backend responses."}]}]},{"type":"element","tag":"h2","props":{"id":"couper"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper"}]}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"version"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Couper's version number."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"1.9.2\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"environment"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The "},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#basic-options"},"children":[{"type":"text","value":"environment"}]},{"type":"text","value":" Couper currently runs in."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"prod\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"env"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"env"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Environment variables can be accessed everywhere within the configuration file\nsince these references get evaluated at start."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You may provide default values by means of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"environment_variables"}]},{"type":"text","value":" in the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/defaults"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block"}]},{"type":"text","value":":"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"// ...\n   origin = env.ORIGIN\n// ...\ndefaults {\n  environment_variables = {\n    ORIGIN = \"http://localhost/\"\n    TIMEOUT = \"3s\"\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"   origin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"ORIGIN\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"defaults"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  environment_variables "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    ORIGIN"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"http://localhost/\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    TIMEOUT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"3s\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"request"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"id"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Unique request ID."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"method"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP method."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"GET\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"headers.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP request header value for requested lower-case key."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cookies.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value from "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Cookie"}]},{"type":"text","value":" request header for requested key ( last wins!)."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"query.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Query parameter values."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"path_params.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value from a named path parameter defined within an endpoint path label."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request message body."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"form_body.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parameter in a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"application/x-www-form-urlencoded"}]},{"type":"text","value":" body."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"json_body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access JSON decoded message body. Media type must be "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"application/json"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"application/*+json"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"context.granted_permissions"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Permissions granted to the requester as yielded by access controls (see e.g. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"permissions_claim"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"roles_claim"}]},{"type":"text","value":" in the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/jwt"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block"}]},{"type":"text","value":")."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"[\"perm1\", \"perm2\"]"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"context.required_permission"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Permission required to perform the requested operation (value of the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"required_permission"}]},{"type":"text","value":" attribute of "},{"type":"element","tag":"a","props":{"href":"#endpoint-block"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]}]},{"type":"text","value":" (or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]}]},{"type":"text","value":") block)."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"context.<name>.<property_name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request context containing information from the "},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request URL."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"https://www.example.com/path/to?q=val&a=1\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"origin"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Origin of the request URL."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"https://www.example.com\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"protocol"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request protocol."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"https\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"host"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Host of the request URL."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"www.example.com\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"port"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Port of the request URL."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"443"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"path"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request URL path."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"/path/to\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The value of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"context.<name>"}]},{"type":"text","value":" depends on the type of block referenced by "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<name>"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/basic_auth"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"basic_auth"}]},{"type":"text","value":" block"}]},{"type":"text","value":" and successfully authenticated request the variable contains the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user"}]},{"type":"text","value":" name."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/jwt"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block"}]},{"type":"text","value":" the variable contains claims from the JWT used for "},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/saml"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" block"}]},{"type":"text","value":" the variable contains"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sub"}]},{"type":"text","value":": The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"NameID"}]},{"type":"text","value":" of the SAML assertion."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"exp"}]},{"type":"text","value":": Optional expiration date (value of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"SessionNotOnOrAfter"}]},{"type":"text","value":" of the SAML assertion)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"attributes"}]},{"type":"text","value":": A map of attributes from the SAML assertion."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For an "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_oauth2"}]},{"type":"text","value":" block"}]},{"type":"text","value":", the variable contains the response from the token endpoint, e.g."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_token"}]},{"type":"text","value":": The access token retrieved from the token endpoint."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"token_type"}]},{"type":"text","value":": The token type."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"expires_in"}]},{"type":"text","value":": The token lifetime."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"scope"}]},{"type":"text","value":": The granted scope (if different from the requested scope)."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"and for an "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oidc"}]},{"type":"text","value":" block"}]},{"type":"text","value":" additionally:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"id_token"}]},{"type":"text","value":": The ID token."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"id_token_claims"}]},{"type":"text","value":": A map of claims from the ID token."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"userinfo"}]},{"type":"text","value":": A map of properties retrieved from the userinfo endpoint (if the recommended endpoint is available)."}]}]},{"type":"element","tag":"h2","props":{"id":"beta_token_response"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_token_response"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Only available in the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/token_request"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_token_request"}]},{"type":"text","value":" block"}]},{"type":"text","value":" context, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_token_response"}]},{"type":"text","value":" allows access to the current token response (see "},{"type":"element","tag":"a","props":{"href":"#backend_responses"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_responses"}]}]},{"type":"text","value":" for available properties)."}]},{"type":"element","tag":"h2","props":{"id":"backends"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backends"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backends.<label>"}]},{"type":"text","value":" allows access to backend information."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"health"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The current "},{"type":"element","tag":"a","props":{"href":"/configuration/block/health"},"children":[{"type":"text","value":"health state"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{\"error\": \"\", \"healthy\": true, \"state\": \"healthy\"}"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_tokens.<token_request_name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The token obtained by the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/token_request"},"children":[{"type":"text","value":"token request"}]},{"type":"text","value":" with name "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<token_request_name>"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_token"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The token obtained by the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/token_request"},"children":[{"type":"text","value":"token request"}]},{"type":"text","value":" with name "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"default\""}]},{"type":"text","value":", if configured."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"backend"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Only available in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block context, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" allows access to the current backend information (see "},{"type":"element","tag":"a","props":{"href":"#backends"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backends"}]}]},{"type":"text","value":" for available properties)."}]},{"type":"element","tag":"h2","props":{"id":"backend_request"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_request"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_request"}]},{"type":"text","value":" holds information about the current backend request. It is only\navailable in a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block"}]},{"type":"text","value":", and has the same attributes as a backend request in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_requests.<label>"}]},{"type":"text","value":" (see "},{"type":"element","tag":"a","props":{"href":"#backend_requests"},"children":[{"type":"text","value":"backend_requests"}]},{"type":"text","value":" below)."}]},{"type":"element","tag":"h2","props":{"id":"backend_requests"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_requests"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_requests"}]},{"type":"text","value":" is an object with all backend requests and their attributes.\nTo access a specific request use the related label. "},{"type":"element","tag":"a","props":{"href":"/configuration/block/request"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]}]},{"type":"text","value":" and\n"},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]}]},{"type":"text","value":" blocks without a label will be available as "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":".\nTo access the HTTP method of the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" request use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_requests.default.method"}]},{"type":"text","value":" ."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"id"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Unique request ID."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"method"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP method."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"GET\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"headers.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP request header value for requested lower-case key."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cookies.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value from "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Cookie"}]},{"type":"text","value":" request header for requested key ( last wins!)."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"query.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Query parameter values."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request message body."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"form_body.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parameter in a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"application/x-www-form-urlencoded"}]},{"type":"text","value":" body."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"json_body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access JSON decoded message body. Media type must be "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"application/json"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"application/*+json"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"context.<name>.<property_name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request context containing claims from JWT used for "},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" or information from a SAML assertion, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<name>"}]},{"type":"text","value":" being the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/jwt"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block's"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/saml"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" block's"}]},{"type":"text","value":" label and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"property_name"}]},{"type":"text","value":" being the claim's or assertion information's name."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request URL."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"https://www.example.com/path/to?q=val&a=1\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"origin"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Origin of the backend request URL."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"https://www.example.com\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"protocol"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request protocol."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"https\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"host"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Host of the backend request URL."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"www.example.com\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"port"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Port of the backend request URL."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"443"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"path"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request URL path."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"/path/to\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"backend_response"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_response"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_response"}]},{"type":"text","value":" represents the current backend response.  It is only\navailable in a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block"}]},{"type":"text","value":", and has the same attributes as a backend response in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_responses.<label>"}]},{"type":"text","value":" (see "},{"type":"element","tag":"a","props":{"href":"#backend_responses"},"children":[{"type":"text","value":"backend_responses"}]},{"type":"text","value":" below)."}]},{"type":"element","tag":"h2","props":{"id":"backend_responses"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_responses"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_responses"}]},{"type":"text","value":" is an object with all backend responses and their attributes.\nUse the related label to access a specific response.\n"},{"type":"element","tag":"a","props":{"href":"/configuration/block/request"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]}]},{"type":"text","value":" blocks without a label will be available as "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":".\nTo access the HTTP status code of the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" response use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_responses.default.status"}]},{"type":"text","value":" ."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"status"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP status code."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"200"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"headers.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP response header value for requested lower-case key."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cookies.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value from "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Set-Cookie"}]},{"type":"text","value":" response header for requested key ( last wins!)."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The response message body."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"json_body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access JSON decoded message body. Media type must be "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"application/json"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"application/*+json"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"path-parameter"},"children":[{"type":"text","value":"Path Parameter"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An endpoint label could be defined as "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint \"/app/{section}/{project}/view\" { ... }"}]},{"type":"text","value":"\nto access the named path parameter "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"section"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"project"}]},{"type":"text","value":" via "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request.path_params.*"}]},{"type":"text","value":".\nThe values would map as following for the request path: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/app/nature/plant-a-tree/view"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Value"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request.path_params.section"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nature"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request.path_params.project"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"plant-a-tree"}]}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"couper","depth":2,"text":"couper"},{"id":"env","depth":2,"text":"env"},{"id":"request","depth":2,"text":"request"},{"id":"beta_token_response","depth":2,"text":"beta_token_response"},{"id":"backends","depth":2,"text":"backends"},{"id":"backend","depth":2,"text":"backend"},{"id":"backend_request","depth":2,"text":"backend_request"},{"id":"backend_requests","depth":2,"text":"backend_requests"},{"id":"backend_response","depth":2,"text":"backend_response"},{"id":"backend_responses","depth":2,"text":"backend_responses"},{"id":"path-parameter","depth":2,"text":"Path Parameter"}]}},"_type":"markdown","_id":"content:2.configuration:5.variables.md","_source":"content","_file":"2.configuration/5.variables.md","_extension":"md"},{"_path":"/configuration/functions","_dir":"configuration","_draft":false,"_partial":false,"_locale":"","title":"Functions","description":"Overview of usable function expressions","indexTable":true,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"functions"},"children":[{"type":"text","value":"Functions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This functions can be used and combined as standalone call with all kind of hcl expressions. But some of them requires a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" reference."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Arguments"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"base64_decode"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Decodes Base64 data, as specified in RFC 4648."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"encoded"}]},{"type":"text","value":" (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"base64_decode(\"Zm9v\")"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"base64_encode"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Encodes Base64 data, as specified in RFC 4648."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"decoded"}]},{"type":"text","value":" (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"base64_encode(\"foo\")"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"can"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Tries to evaluate the expression given in its first argument."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"expression"}]},{"type":"text","value":" (expression)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{ for k in [\"not_there\", \"method\", \"path\"] : k => request[k] if can(request[k]) }"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"contains"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Determines whether a given list contains a given single value as one of its elements."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"list"}]},{"type":"text","value":" (tuple or list), "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"value"}]},{"type":"text","value":" (various)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"contains([1,2,3], 2)"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"default"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Returns the first of the given arguments that is not null or an empty string. If no argument matches, the last argument is returned."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"arg..."}]},{"type":"text","value":" (various)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"default(request.cookies.foo, \"bar\")"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"join"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Concatenates together the string elements of one or more lists with a given separator."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sep"}]},{"type":"text","value":" (string), "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"lists..."}]},{"type":"text","value":" (tuples or lists)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"join(\"-\", [0,1,2,3])"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"json_decode"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parses the given JSON string and, if it is valid, returns the value it represents."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"encoded"}]},{"type":"text","value":" (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"json_decode(\"{\\\"foo\\\": 1}\")"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"json_encode"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Returns a JSON serialization of the given value."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"val"}]},{"type":"text","value":" (various)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"json_encode(request.context.myJWT)"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_sign"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Creates and signs a JSON Web Token (JWT) from information from a referenced "},{"type":"element","tag":"a","props":{"href":"/configuration/block/jwt_signing_profile"},"children":[{"type":"text","value":"JWT Signing Profile Block"}]},{"type":"text","value":" (or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/jwt"},"children":[{"type":"text","value":"JWT Block"}]},{"type":"text","value":" with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"signing_ttl"}]},{"type":"text","value":") and additional claims provided as a function parameter."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"label"}]},{"type":"text","value":" (string), "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"claims"}]},{"type":"text","value":" (object)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_sign(\"myJWT\")"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"keys"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Takes a map and returns a sorted list of the map keys."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"inputMap"}]},{"type":"text","value":" (object or map)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"keys(request.headers)"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"length"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Returns the number of elements in the given collection."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"collection"}]},{"type":"text","value":" (tuple, list or map; "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"no object"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"length([0,1,2,3])"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"lookup"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Performs a dynamic lookup into a map. The default (third argument) is returned if the key (second argument) is not found in the inputMap (first argument)."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"inputMap"}]},{"type":"text","value":" (object or map), "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"key"}]},{"type":"text","value":" (string), "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" (various)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"lookup({a = 1}, \"b\", \"def\")"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"merge"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object or tuple"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Deep-merges two or more of either objects or tuples. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"null"}]},{"type":"text","value":" arguments are ignored. An attribute value with a different type than the current value is set as the new value. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"merge()"}]},{"type":"text","value":" with no parameters returns "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"null"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"arg..."}]},{"type":"text","value":" (object or tuple)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"merge(request.headers, { x-additional = \"myval\" })"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oauth2_authorization_url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Creates an OAuth2 authorization URL from a referenced "},{"type":"element","tag":"a","props":{"href":"/configuration/block/beta_oauth2"},"children":[{"type":"text","value":"OAuth2 AC (Beta) Block"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"text","value":"OIDC Block"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"label"}]},{"type":"text","value":" (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oauth2_authorization_url(\"myOAuth2\")"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oauth2_verifier"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Creates a cryptographically random key as specified in RFC 7636, applicable for all verifier methods; e.g. to be set as a cookie and read into "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"verifier_value"}]},{"type":"text","value":". Multiple calls of this function in the same client request context return the same value."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oauth2_verifier()"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"relative_url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Returns a relative URL by retaining "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"path"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"query"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"fragment"}]},{"type":"text","value":" components.  The input URL "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"s"}]},{"type":"text","value":" must begin with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/<path>"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"//<authority>"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"http://"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"https://"}]},{"type":"text","value":", otherwise an error is thrown."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"s"}]},{"type":"text","value":" (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"relative_url(\"https://httpbin.org/anything?query#fragment\") // returns \"/anything?query#fragment\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml_sso_url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Creates a SAML SingleSignOn URL (including the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"SAMLRequest"}]},{"type":"text","value":" parameter) from a referenced "},{"type":"element","tag":"a","props":{"href":"/configuration/block/saml"},"children":[{"type":"text","value":"SAML Block"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"label"}]},{"type":"text","value":" (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml_sso_url(\"mySAML\")"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"set_intersection"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list or tuple"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Returns a new set containing the elements that exist in all of the given sets."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sets..."}]},{"type":"text","value":" (tuple or list)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"set_intersection([\"A\", \"B\", \"C\"], [\"B\", D\"])"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"split"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"tuple"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Divides a given string by a given separator, returning a list of strings containing the characters between the separator sequences."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sep"}]},{"type":"text","value":" (string), "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"str"}]},{"type":"text","value":" (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"split(\" \", \"foo bar qux\")"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"substr"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Extracts a sequence of characters from another string and creates a new string. The \""},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"offset"}]},{"type":"text","value":"\" index may be negative, in which case it is relative to the end of the given string. The \""},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"length"}]},{"type":"text","value":"\" may be "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-1"}]},{"type":"text","value":", in which case the remainder of the string after the given offset will be returned."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"str"}]},{"type":"text","value":" (string), "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"offset"}]},{"type":"text","value":" (integer), "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"length"}]},{"type":"text","value":" (integer)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"substr(\"abcdef\", 3, -1)"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"to_lower"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Converts a given string to lowercase."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"s"}]},{"type":"text","value":" (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"to_lower(request.cookies.name)"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"to_number"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Converts its argument to a number value. Only numbers, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"null"}]},{"type":"text","value":", and strings containing decimal representations of numbers can be converted to number. All other values will produce an error."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"num"}]},{"type":"text","value":" (string or number)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"to_number(\"1,23\")"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"to_number(env.PI)"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"to_upper"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Converts a given string to uppercase."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"s"}]},{"type":"text","value":" (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"to_upper(\"CamelCase\")"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"trim"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Removes any whitespace characters from the start and end of the given string."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"str"}]},{"type":"text","value":" (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"trim(\" foo \")"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"unixtime"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Retrieves the current UNIX timestamp in seconds."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"unixtime()"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url_decode"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"URL-decodes a given string according to RFC 3986."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"s"}]},{"type":"text","value":" (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url_decode(\"abc%25%26%2C123\")"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url_encode"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"URL-encodes a given string according to RFC 3986."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"s"}]},{"type":"text","value":" (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url_encode(\"abc%&,123\")"}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:6.functions.md","_source":"content","_file":"2.configuration/6.functions.md","_extension":"md"},{"_path":"/configuration/error-handling","_dir":"configuration","_draft":false,"_partial":false,"_locale":"","title":"Errors","description":"Handling different error types.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"errors"},"children":[{"type":"text","value":"Errors"}]},{"type":"element","tag":"h2","props":{"id":"introduction"},"children":[{"type":"text","value":"Introduction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Errors can occur in various places: due to invalid client requests or problems on the backend and network side.\nCouper specifies some generic error categories (like "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"configuration"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":") to help you identify the occurring problems faster."}]},{"type":"element","tag":"h2","props":{"id":"error-messages"},"children":[{"type":"text","value":"Error messages"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Error messages are only sent to the client as a summary.\nDetailed information is provided via log message. This way, all information can be viewed without accidentally revealing confidential information."}]},{"type":"element","tag":"h2","props":{"id":"access-control-error_handler"},"children":[{"type":"text","value":"Access control "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Access control errors in particular require special handling, e.g. sending a specific response for missing login credentials.\nFor this purpose every access control definition of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"basic_auth"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oidc"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml2"}]},{"type":"text","value":" can define one or multiple "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":" blocks"}]},{"type":"text","value":" with one or more defined error type labels listed below."}]},{"type":"element","tag":"h2","props":{"id":"permissions-related-error_handler"},"children":[{"type":"text","value":"Permissions related "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Required permissions are configured for "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" blocks. So errors caused by insufficient permissions can be handled at API or endpoint levels."}]},{"type":"element","tag":"h2","props":{"id":"endpoint-related-error_handler"},"children":[{"type":"text","value":"Endpoint related "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint#endpoint-sequence"},"children":[{"type":"text","value":"sequence"}]},{"type":"text","value":", a simple "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" error can be handled in combination with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"expected_status"}]},{"type":"text","value":" attribute for "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]},{"type":"text","value":"\nand "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" block definitions and an "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":" block"}]},{"type":"text","value":" with the "},{"type":"element","tag":"a","props":{"href":"#endpoint-error-types"},"children":[{"type":"text","value":"related"}]},{"type":"text","value":" type label."}]},{"type":"element","tag":"h2","props":{"id":"error-types"},"children":[{"type":"text","value":"Error types"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All errors have a specific type. You can find it in the log field "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_type"}]},{"type":"text","value":". Furthermore, errors can be associated with a list of less specific types. Your error handlers will be evaluated from the most to the least specific one. Only the first matching error handler is executed."}]},{"type":"element","tag":"h3","props":{"id":"access-control-error-types"},"children":[{"type":"text","value":"Access control error types"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The following table documents error types that can be handled in the respective access control blocks ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"basic_auth"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_oauth2"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oidc"}]},{"type":"text","value":"):"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type (and super types)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default handling"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access control related errors."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"403"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"basic_auth"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"basic_auth"}]},{"type":"text","value":" related errors, e.g. unknown user or wrong password."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"401"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"WWW-Authenticate: Basic"}]},{"type":"text","value":" header."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"basic_auth_credentials_missing"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"basic_auth"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Client does not provide any credentials."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"401"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"WWW-Authenticate: Basic"}]},{"type":"text","value":" header."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" related errors."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"401"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_token_missing"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"No token provided with configured token source."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"401"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_token_expired"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Given token is valid but expired."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"401"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt_token_invalid"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The token is syntactically not a JWT, or not sufficient, e.g. because required claims are missing or have unexpected values."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"401"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" (or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml2"}]},{"type":"text","value":") ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" related errors."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"403"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oauth2"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_oauth2"}]},{"type":"text","value":"/"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oidc"}]},{"type":"text","value":" related errors."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"403"}]},{"type":"text","value":"."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"api-error-types"},"children":[{"type":"text","value":"API error types"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The following table documents error types that can be handled in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" blocks:"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type (and super types)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default handling"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"All catchable backend related errors."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"502"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_openapi_validation"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request or response is invalid."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status code "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"400"}]},{"type":"text","value":" for invalid backend request or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"502"}]},{"type":"text","value":" for invalid backend response."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_timeout"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A backend request timed out."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"504"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_unhealthy"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A backend is unhealthy and will not send the request."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"502"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_backend_token_request"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A token request for the backend has failed."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"502"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access control related errors."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"403"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"insufficient_permissions"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The permission required for the requested operation is not in the permissions granted to the requester."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"403"}]},{"type":"text","value":"."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"endpoint-error-types"},"children":[{"type":"text","value":"Endpoint error types"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The following table documents error types that can be handled in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" blocks:"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type (and super types)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default handling"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"All catchable backend related errors."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"502"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_openapi_validation"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request or response is invalid."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status code "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"400"}]},{"type":"text","value":" for invalid backend request or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"502"}]},{"type":"text","value":" for invalid backend response."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_timeout"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A backend request timed out."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"504"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend_unhealthy"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A backend is unhealthy and will not send the request."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"502"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_backend_token_request"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A token request for the backend has failed."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"502"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access control related errors."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"403"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_backend_rate_limit_exceeded"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend rate limit related errors."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"429"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"insufficient_permissions"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The permission required for the requested operation is not in the permissions granted to the requester."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"403"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"All catchable "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" related errors."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"502"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sequence"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" block request has been failed while depending on another one."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"502"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"unexpected_status"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":")"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" block response status code does not match the to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"expected_status"}]},{"type":"text","value":" list."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Send error template with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"502"}]},{"type":"text","value":"."}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"introduction","depth":2,"text":"Introduction"},{"id":"error-messages","depth":2,"text":"Error messages"},{"id":"access-control-error_handler","depth":2,"text":"Access control error_handler"},{"id":"permissions-related-error_handler","depth":2,"text":"Permissions related error_handler"},{"id":"endpoint-related-error_handler","depth":2,"text":"Endpoint related error_handler"},{"id":"error-types","depth":2,"text":"Error types","children":[{"id":"access-control-error-types","depth":3,"text":"Access control error types"},{"id":"api-error-types","depth":3,"text":"API error types"},{"id":"endpoint-error-types","depth":3,"text":"Endpoint error types"}]}]}},"_type":"markdown","_id":"content:2.configuration:7.error-handling.md","_source":"content","_file":"2.configuration/7.error-handling.md","_extension":"md"},{"_path":"/configuration/multiple-files","_dir":"configuration","_draft":false,"_partial":false,"_locale":"","title":"Merge of Configuration File(s)","description":"For more complex situations you can configure Couper with multiple files.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"merging"},"children":[{"type":"text","value":"Merging"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper supports merging of blocks and attributes from multiple configuration files\n(see "},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#basic-options"},"children":[{"type":"text","value":"Basic Options of Command Line Interface"}]},{"type":"text","value":")."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging"},"children":[{"type":"text","value":"Merging"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#general-rules-of-merging"},"children":[{"type":"text","value":"General Rules of Merging"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging-of-server-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" Blocks"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging-of-definitions-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" Blocks"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging-of-defaults-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" Blocks"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging-of-settings-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" Blocks"}]}]}]},{"type":"element","tag":"h2","props":{"id":"general-rules-of-merging"},"children":[{"type":"text","value":"General Rules of Merging"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When merging, all attributes (except "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"environment_variables"}]},{"type":"text","value":" in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block) replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Blocks that cannot have labels (eg. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" etc.) replace existing blocks with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Blocks with optional labels (eg. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" etc.) are merged recursively with blocks with the same label (blocks without a label are merged with blocks with the same name and no label in each context), if any, otherwise they are added. Only one unlabeled block of the same type is allowed in each context (eg. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" blocks in a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" block)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Blocks with required label (eg. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":") replace existing blocks with the same name and label in each context, if any, otherwise they are added."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Blocks with (optional) multiple labels (eg. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":") replace existing blocks with identical labels, if any, otherwise they are added."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Currently, here is no way to remove an attribute or a block from the configuration."}]},{"type":"element","tag":"h2","props":{"id":"merging-of-server-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" blocks are merged:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" blocks replace existing blocks with the same name, if any, otherwise, they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" blocks replace existing blocks with the same label, if any, otherwise they are added."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" blocks are merged:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block replaces existing "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block, if any, otherwise a new "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block is added."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" blocks are merged:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block replaces existing "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block, if any, otherwise a new "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" blocks replace existing blocks with the same label, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":" blocks replace existing blocks with identical labels, if any, otherwise they are added."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" An "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":" block cannot be replaced in or added to an "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" block. Therefore, the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" block must be completely replaced."}]},{"type":"element","tag":"h2","props":{"id":"merging-of-definitions-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" blocks are merged recursively, if any, otherwise a new "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All blocks inside a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block replace existing blocks with the same name and label."}]}]},{"type":"element","tag":"h2","props":{"id":"merging-of-defaults-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" blocks are merged recursively, if any, otherwise a new "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes inside a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block (except "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"environment_variables"}]},{"type":"text","value":") replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Single values of an "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"environment_variables"}]},{"type":"text","value":" attribute replace existing values with the same key, if any, otherwise they are added."}]}]},{"type":"element","tag":"h2","props":{"id":"merging-of-settings-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" blocks are merged recursively, if any, otherwise a new "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes inside a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" block replace existing attributes with the same name, if any, otherwise they are added."}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"general-rules-of-merging","depth":2,"text":"General Rules of Merging"},{"id":"merging-of-server-blocks","depth":2,"text":"Merging of server Blocks"},{"id":"merging-of-definitions-blocks","depth":2,"text":"Merging of definitions Blocks"},{"id":"merging-of-defaults-blocks","depth":2,"text":"Merging of defaults Blocks"},{"id":"merging-of-settings-blocks","depth":2,"text":"Merging of settings Blocks"}]}},"_type":"markdown","_id":"content:2.configuration:8.multiple-files.md","_source":"content","_file":"2.configuration/8.multiple-files.md","_extension":"md"},{"_path":"/configuration/access-control","_dir":"configuration","_draft":false,"_partial":false,"_locale":"","title":"Access Control","description":"List of configurable access control layer blocks.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"access-control"},"children":[{"type":"text","value":"Access Control"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The configuration of access controls is twofold in Couper: You define the particular\ntype such as "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"basic_auth"}]},{"type":"text","value":" in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]}]},{"type":"text","value":", each with a distinct label\n(must not be one of the reserved names: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"granted_permissions"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"required_permission"}]},{"type":"text","value":")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Anywhere in the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" block"}]},{"type":"text","value":" those labels can be used in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":"\nlist to protect the respective block."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":" Access permissions are inherited by nested blocks."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also disable access control for blocks with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"disable_access_control"}]},{"type":"text","value":": With "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"disable_access_control = [\"bar\"]"}]},{"type":"text","value":",\nthe "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":" named "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bar"}]},{"type":"text","value":" will be disabled for the corresponding block context."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All access controls have an option to handle "},{"type":"element","tag":"a","props":{"href":"/configuration/error-handling#access-control-error_handler"},"children":[{"type":"text","value":"related errors"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"blocks"},"children":[{"type":"text","value":"Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/basic_auth"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"basic_auth"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/beta_oauth2"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_oauth2"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/jwt"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"jwt"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oidc"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/saml"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saml"}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"blocks","depth":3,"text":"Blocks"}]}},"_type":"markdown","_id":"content:2.configuration:9.access-control.md","_source":"content","_file":"2.configuration/9.access-control.md","_extension":"md"},{"_path":"/observation/health","_dir":"observation","_draft":false,"_partial":false,"_locale":"","title":"Health Check","description":"The health check will answer with status 200 OK on every port with the configured\nhealth_path setting or the\nCOUPER_HEALTH_PATH environment variable.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"health-check"},"children":[{"type":"text","value":"Health Check"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The health check will answer with status "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"200 OK"}]},{"type":"text","value":" on every port with the configured\n"},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"health_path"}]},{"type":"text","value":" setting"}]},{"type":"text","value":" or the\n"},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#observation-options"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_HEALTH_PATH"}]},{"type":"text","value":" environment variable"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As soon as the gateway instance receives a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"SIGINT"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"SIGTERM"}]},{"type":"text","value":" the check will return a status\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"500 Internal Server Error"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A shutdown delay ("},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#timing-environment-variables"},"children":[{"type":"text","value":"environment variable "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_TIMING_SHUTDOWN_DELAY"}]}]},{"type":"text","value":")\nallows the server to finish all running requests and gives a load balancer time to pick another gateway instance.\nAfter this delay the server goes into shutdown mode and no new requests will be accepted."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The shutdown timings ("},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#timing-environment-variables"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"COUPER_TIMING_SHUTDOWN_TIMEOUT"}]}]},{"type":"text","value":")\ndefault to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" which means no delaying with development setups."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.observation:health.md","_source":"content","_file":"3.observation/health.md","_extension":"md"},{"_path":"/observation/logging","_dir":"observation","_draft":false,"_partial":false,"_locale":"","title":"Logging","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"logging"},"children":[{"type":"text","value":"Logging"}]},{"type":"element","tag":"h2","props":{"id":"introduction"},"children":[{"type":"text","value":"Introduction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Upon the execution of Couper all log events are sent to the standard output. You can adjust the appearance and verbosity of the logs with a variety of "},{"type":"element","tag":"a","props":{"href":"/observation/logging#settings"},"children":[{"type":"text","value":"Settings"}]},{"type":"text","value":". There are different "},{"type":"element","tag":"a","props":{"href":"#log-types"},"children":[{"type":"text","value":"Log Types"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"#fields"},"children":[{"type":"text","value":"Fields"}]},{"type":"text","value":" containing useful information."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We aspire to make Couper as stable as possible so these logs are still subject to change."}]}]},{"type":"element","tag":"h2","props":{"id":"log-types"},"children":[{"type":"text","value":"Log Types"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_access"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Provides information about the frontend side of things. Compare "},{"type":"element","tag":"a","props":{"href":"#access-fields"},"children":[{"type":"text","value":"Access Fields"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_access_tls"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Provides information about connections via configured "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"text","value":"https_dev_proxy"}]},{"type":"text","value":". Compare "},{"type":"element","tag":"a","props":{"href":"#access-fields"},"children":[{"type":"text","value":"Access Fields"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_backend"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Provides information about the backend side of things. Compare "},{"type":"element","tag":"a","props":{"href":"#backend-fields"},"children":[{"type":"text","value":"Backend Fields"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_daemon"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Provides background information about the execution of Couper. Each printed log of this type contains a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"message"}]},{"type":"text","value":" entry describing the current actions of Couper. Compare "},{"type":"element","tag":"a","props":{"href":"#daemon-fields"},"children":[{"type":"text","value":"Daemon Fields"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_job"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Provides information about "},{"type":"element","tag":"a","props":{"href":"/configuration/block/job"},"children":[{"type":"text","value":"jobs"}]},{"type":"text","value":". See "},{"type":"element","tag":"a","props":{"href":"#job-fields"},"children":[{"type":"text","value":"Job Fields"}]},{"type":"text","value":"."}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"fields"},"children":[{"type":"text","value":"Fields"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Given the large amount of information contained in some logs, it might come handy to change the format or log level (see "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"text","value":"Settings"}]},{"type":"text","value":")."}]},{"type":"element","tag":"h3","props":{"id":"common-fields"},"children":[{"type":"text","value":"Common Fields"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These fields are part of all "},{"type":"element","tag":"a","props":{"href":"#log-types"},"children":[{"type":"text","value":"Log Types"}]},{"type":"text","value":" and therefore mentioned separately to avoid unnecessary redundancy."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"build"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"GIT short hash during build time."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"level\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Configured log level, determines verbosity of log."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"message"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Context based, mainly used in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_daemon"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"timestamp\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request starting time."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"type\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#log-types"},"children":[{"type":"text","value":"Log Type"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"version\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Release version."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"access-fields"},"children":[{"type":"text","value":"Access Fields"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These fields are found in the "},{"type":"element","tag":"a","props":{"href":"#log-types"},"children":[{"type":"text","value":"Log Types"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_access"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_access_tls"}]},{"type":"text","value":" in addition to the "},{"type":"element","tag":"a","props":{"href":"#common-fields"},"children":[{"type":"text","value":"Common Fields"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"auth_user\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Basic auth username (if provided)."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"client_ip\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"IP of client."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"custom\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"See "},{"type":"element","tag":"a","props":{"href":"#custom-logging"},"children":[{"type":"text","value":"Custom Logging"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"endpoint\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Path pattern of endpoint."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"handler\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"One of: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"file"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"method\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP request method, see "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods","rel":["nofollow"]},"children":[{"type":"text","value":"Mozilla HTTP Reference"}]},{"type":"text","value":" for more information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"port\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Current port accepting request."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"request\":"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Field regarding request information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"bytes\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request body size in bytes."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"headers\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Field regarding keys and values originating from configured keys/header names."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"host\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request host."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"method\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP request method, see "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods","rel":["nofollow"]},"children":[{"type":"text","value":"Mozilla HTTP Reference"}]},{"type":"text","value":" for more information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"origin\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request origin ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<proto>://<host>:<port>"}]},{"type":"text","value":"), for our purposes excluding "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<proto>://"}]},{"type":"text","value":" in printing, see "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Origin","rel":["nofollow"]},"children":[{"type":"text","value":"Mozilla HTTP Reference"}]},{"type":"text","value":" for more information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"path\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request path."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"proto\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request protocol."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"status\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request status code, see "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status","rel":["nofollow"]},"children":[{"type":"text","value":"Mozilla HTTP Reference"}]},{"type":"text","value":" for more information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"tls\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"TLS used "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"false"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"response\":"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Field regarding response information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"bytes\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Response body size in bytes."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"headers\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Field regarding keys and values originating from configured keys/header names."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"server\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Server name (if defined in couper file)."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"status\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Response status code, see "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status","rel":["nofollow"]},"children":[{"type":"text","value":"Mozilla HTTP Reference"}]},{"type":"text","value":" for more information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"timings\":"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Field regarding timing (ms)."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"total\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Total time taken."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"uid\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Unique request ID configurable in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"text","value":"Settings"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"url\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Complete URL ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<proto>://<host>:<port><path>"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<origin><path>"}]},{"type":"text","value":")."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"backend-fields"},"children":[{"type":"text","value":"Backend Fields"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These fields are found in the "},{"type":"element","tag":"a","props":{"href":"#log-types"},"children":[{"type":"text","value":"Log Type"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_backend"}]},{"type":"text","value":" in addition to the "},{"type":"element","tag":"a","props":{"href":"#common-fields"},"children":[{"type":"text","value":"Common Fields"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"auth_user\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request basic auth username (if provided)."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"backend\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Configured name ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" if not provided)."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"custom\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"See "},{"type":"element","tag":"a","props":{"href":"#custom-logging"},"children":[{"type":"text","value":"Custom Logging"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"method\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP request method, see "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods","rel":["nofollow"]},"children":[{"type":"text","value":"Mozilla HTTP Reference"}]},{"type":"text","value":" for more information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"proxy\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Used system proxy URL (if configured), see "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"request\":"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Field regarding request information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"bytes\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request body size in bytes."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"headers\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Field regarding keys and values originating from configured keys/header names."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"host\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request host."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"method\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP request method, see "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods","rel":["nofollow"]},"children":[{"type":"text","value":"Mozilla HTTP Reference"}]},{"type":"text","value":" for more information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"name\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Configured request name ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" if not provided)."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"origin\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request origin, for our purposes excluding "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<proto>://"}]},{"type":"text","value":" in printing, see "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Origin","rel":["nofollow"]},"children":[{"type":"text","value":"Mozilla HTTP Reference"}]},{"type":"text","value":" for more information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"path\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request path."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"port\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Current port accepting request."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"proto\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request protocol."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"response\":"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Field regarding response information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"bytes\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Raw size of read body bytes."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"headers\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Field regarding keys and values originating from configured keys/header names."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"status\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Response status code, see "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status","rel":["nofollow"]},"children":[{"type":"text","value":"Mozilla HTTP Reference"}]},{"type":"text","value":" for more information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"status\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Response status code, see "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status","rel":["nofollow"]},"children":[{"type":"text","value":"Mozilla HTTP Reference"}]},{"type":"text","value":" for more information."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"timings\":"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Field regarding timing (ms)."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"dns\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Time taken by DNS."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"tcp\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Time taken between attempting and establishing TCP connection."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"tls\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Time taken between attempt and success at TLS handshake."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"total\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Total time taken."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"ttfb\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Time to first byte/between establishing connection and receiving first byte."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"token_request\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Entry regarding request for token."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"token_request_retry\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"How many "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"token_request"}]},{"type":"text","value":" attempts were made."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"uid\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Unique request ID configurable in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"text","value":"Settings"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"url\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Complete URL ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<proto>://<host>:<port><path>"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<origin><path>"}]},{"type":"text","value":")."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"validation\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Validation result for open api, see "},{"type":"element","tag":"a","props":{"href":"/configuration/block/openapi"},"children":[{"type":"text","value":"OpenAPI Block"}]},{"type":"text","value":"."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"daemon-fields"},"children":[{"type":"text","value":"Daemon Fields"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These fields are found in the "},{"type":"element","tag":"a","props":{"href":"#log-types"},"children":[{"type":"text","value":"Log Type"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_daemon"}]},{"type":"text","value":" in addition to the "},{"type":"element","tag":"a","props":{"href":"#common-fields"},"children":[{"type":"text","value":"Common Fields"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"deadline\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Shutdown parameter, see "},{"type":"element","tag":"a","props":{"href":"/observation/health"},"children":[{"type":"text","value":"Health Check"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"delay\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Shutdown parameter, see "},{"type":"element","tag":"a","props":{"href":"/observation/health"},"children":[{"type":"text","value":"Health Check"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"watch\":"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Field watching configuration file changes, logs with this field only appear if "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"watch=true"}]},{"type":"text","value":", more in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"text","value":"Settings"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"max-retries\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Maximum retry count, see "},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#basic-options"},"children":[{"type":"text","value":"Basic Options"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"retry-delay\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Configured delay of each retry, see "},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#basic-options"},"children":[{"type":"text","value":"Basic Options"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"job-fields"},"children":[{"type":"text","value":"Job Fields"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The following fields are found in the "},{"type":"element","tag":"a","props":{"href":"#log-types"},"children":[{"type":"text","value":"log type"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_daemon"}]},{"type":"text","value":" in addition to the "},{"type":"element","tag":"a","props":{"href":"#common-fields"},"children":[{"type":"text","value":"common fields"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"name\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Job name, label of "},{"type":"element","tag":"a","props":{"href":"/configuration/block/job"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"beta_job"}]},{"type":"text","value":" block"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"timings\":"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Field regarding timing (ms)."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"interval\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Interval, see "},{"type":"element","tag":"a","props":{"href":"/configuration/block/job#attributes"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"interval"}]},{"type":"text","value":" attribute"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"total\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Total time taken."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"uid\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Unique request ID configurable in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":"."}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"custom-logging"},"children":[{"type":"text","value":"Custom Logging"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These fields are defined in the configuration as "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"custom_log_fields"}]},{"type":"text","value":" attribute in the following blocks:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/files"},"children":[{"type":"text","value":"Files Block"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/spa"},"children":[{"type":"text","value":"SPA Block"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"text","value":"API Block"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/basic_auth"},"children":[{"type":"text","value":"Basic Auth Block"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/jwt"},"children":[{"type":"text","value":"JWT Block"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/beta_oauth2"},"children":[{"type":"text","value":"OAuth2 AC (Beta) Block"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"text","value":"OIDC Block"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/saml"},"children":[{"type":"text","value":"SAML Block"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/error-handling"},"children":[{"type":"text","value":"Error Handler Block"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"custom_log_fields"}]},{"type":"text","value":" definitions will take place within the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_access"}]},{"type":"text","value":" log with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"custom"}]},{"type":"text","value":" field as parent.\nExcept the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"custom_log_fields"}]},{"type":"text","value":" defined in a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block"}]},{"type":"text","value":" which will take place\nin the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper_backend"}]},{"type":"text","value":" log."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Example:"}]}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server \"example\" {\n  endpoint \"/anything\" {\n    custom_log_fields = {\n      origin  = backend_responses.default.json_body.origin\n      success = backend_responses.default.status == 200\n    }\n\n    proxy {\n      backend = \"httpbin\"\n      path = \"/anything\"\n    }\n  }\n}\n\ndefinitions {\n  backend \"httpbin\" {\n    origin = \"https://httpbin.org\"\n\n    custom_log_fields = {\n      method = request.method\n    }\n  }\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"example\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/anything\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    custom_log_fields "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      origin"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"  ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" backend_responses.default.json_body.origin\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      success"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" backend_responses.default."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"= "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"200\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      backend "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"httpbin\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"/anything\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"definitions"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"httpbin\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    origin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"https://httpbin.org\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    custom_log_fields "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      method"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" request.method\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"settings"},"children":[{"type":"text","value":"Settings"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For more information regarding the usage of these settings, see the "},{"type":"element","tag":"a","props":{"href":"/configuration/command-line"},"children":[{"type":"text","value":"Command Line Interface"}]},{"type":"text","value":" documentation and the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" block  reference"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Feature"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"log-format"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Can be set to either "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"common"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"json"}]},{"type":"text","value":" output format."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"log-level"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Can be set to one of: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"panic"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"fatal"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"error"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"warn"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"info"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"debug"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"trace"}]},{"type":"text","value":". For more information regarding the usage of each, see the official documentation of "},{"type":"element","tag":"a","props":{"href":"https://pkg.go.dev/github.com/sirupsen/logrus@v1.8.1#Level","rel":["nofollow"]},"children":[{"type":"text","value":"Level"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"log-pretty"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Option for "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"log-format=json"}]},{"type":"text","value":" which pretty prints with basic key coloring."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"watch"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Watch for configuration file changes and reload on modifications. Resulting information manifests in "},{"type":"element","tag":"a","props":{"href":"#daemon-fields"},"children":[{"type":"text","value":"Daemon Logs"}]},{"type":"text","value":"."}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"introduction","depth":2,"text":"Introduction"},{"id":"log-types","depth":2,"text":"Log Types"},{"id":"fields","depth":2,"text":"Fields","children":[{"id":"common-fields","depth":3,"text":"Common Fields"},{"id":"access-fields","depth":3,"text":"Access Fields"},{"id":"backend-fields","depth":3,"text":"Backend Fields"},{"id":"daemon-fields","depth":3,"text":"Daemon Fields"}]},{"id":"job-fields","depth":2,"text":"Job Fields"},{"id":"custom-logging","depth":2,"text":"Custom Logging"},{"id":"settings","depth":2,"text":"Settings"}]}},"_type":"markdown","_id":"content:3.observation:logging.md","_source":"content","_file":"3.observation/logging.md","_extension":"md"},{"_path":"/observation/metrics","_dir":"observation","_draft":false,"_partial":false,"_locale":"","title":"Metrics","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"metrics"},"children":[{"type":"text","value":"Metrics"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#metrics"},"children":[{"type":"text","value":"Metrics"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#prometheus"},"children":[{"type":"text","value":"Prometheus"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#grafana-dashboard"},"children":[{"type":"text","value":"Grafana Dashboard"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#preview"},"children":[{"type":"text","value":"Preview"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#developers"},"children":[{"type":"text","value":"Developers"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Our metrics feature is "},{"type":"element","tag":"a","props":{"href":"/getting-started/beta-features"},"children":[{"type":"text","value":"beta"}]},{"type":"text","value":" for now. However, we want to provide some core metrics which can be directly collected from Couper."}]},{"type":"element","tag":"h2","props":{"id":"prometheus"},"children":[{"type":"text","value":"Prometheus"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper provides a built-in "},{"type":"element","tag":"a","props":{"href":"https://prometheus.io/","rel":["nofollow"]},"children":[{"type":"text","value":"Prometheus"}]},{"type":"text","value":" exporter. It is configurable with "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" like port or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"service_name"}]},{"type":"text","value":" label. If enabled the default scrape target port is "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"9090"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"grafana-dashboard"},"children":[{"type":"text","value":"Grafana Dashboard"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper provides a maintained Grafana dashboard which you can find here: "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper/blob/master/grafana.json","rel":["nofollow"]},"children":[{"type":"text","value":"grafana.json"}]},{"type":"text","value":"\nand import this JSON model to your grafana instance.\nYou may have to set your Datasource to your Prometheus one."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you're missing some configuration options or have feedback: Feel free to open a "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper/discussions","rel":["nofollow"]},"children":[{"type":"text","value":"discussion"}]},{"type":"text","value":" or\nan "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper/issues","rel":["nofollow"]},"children":[{"type":"text","value":"issue"}]},{"type":"text","value":" if something does not work as expected or shown values does not make any sense."}]},{"type":"element","tag":"h3","props":{"id":"preview"},"children":[{"type":"text","value":"Preview"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"dashboard","src":"/img/grafana.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"developers"},"children":[{"type":"text","value":"Developers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you are interested in contributing to our metrics or refine the grafana dashboard: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"make docker-telemetry"}]},{"type":"text","value":" will spin up the stack for you."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"prometheus","depth":2,"text":"Prometheus"},{"id":"grafana-dashboard","depth":2,"text":"Grafana Dashboard","children":[{"id":"preview","depth":3,"text":"Preview"}]},{"id":"developers","depth":2,"text":"Developers"}]}},"_type":"markdown","_id":"content:3.observation:metrics.md","_source":"content","_file":"3.observation/metrics.md","_extension":"md"},{"_path":"/","_dir":"","_draft":false,"_partial":false,"_locale":"","title":"Introduction","description":"Overview how Couper could work within a project.","draft":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"introduction"},"children":[{"type":"text","value":"Introduction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper is a lightweight open-source API gateway that acts as an entry point for clients to your application (frontend API gateway) and an exit point to upstream services (upstream API gateway)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It adds access control, observability, and back-end connectivity on a separate layer. This will keep your core application code more simple."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper does not need any special development skills and offers easy configuration and integration."}]},{"type":"element","tag":"h2","props":{"id":"architectural-overview"},"children":[{"type":"text","value":"Architectural Overview"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"architecture","src":"/img/architecture.png"},"children":[]}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Entity"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Frontend"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Browser, App or API Client that sends requests to Couper."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Frontend API"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Couper acts as an entry point for clients to your application."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend Service"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Your core application - no matter which technology, if monolithic or micro-services."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Upstream API"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Couper acts as an exit point to upstream services for your application."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Remote Service"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Any upstream service or system which is accessible via HTTP."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Protected System"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Representing a service or system that offers protected resources via HTTP."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/getting-started/running-couper"},"children":[{"type":"text","value":"Now, let's get started!"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"architectural-overview","depth":2,"text":"Architectural Overview"}]}},"_type":"markdown","_id":"content:index.md","_source":"content","_file":"index.md","_extension":"md"}],"navigation":[{"title":"Getting Started","_path":"/getting-started","children":[{"title":"Running Couper","_path":"/getting-started/running-couper"},{"title":"Examples","_path":"/getting-started/examples"},{"title":"About beta features","_path":"/getting-started/beta-features"}]},{"title":"Configuration","_path":"/configuration","children":[{"title":"Command Line Interface (CLI)","_path":"/configuration/command-line"},{"title":"Configuration File","_path":"/configuration/configuration-file"},{"title":"Expressions","_path":"/configuration/expressions"},{"title":"Modifiers","_path":"/configuration/modifiers"},{"title":"Block","_path":"/configuration/block","children":[{"title":"API","_path":"/configuration/block/api"},{"title":"TLS (Backend)","_path":"/configuration/block/backend_tls"},{"title":"Backend","_path":"/configuration/block/backend"},{"title":"Basic Auth","_path":"/configuration/block/basic_auth"},{"title":"OAuth2 AC (Beta)","_path":"/configuration/block/beta_oauth2"},{"title":"Client Certificate","_path":"/configuration/block/client_certificate"},{"title":"CORS","_path":"/configuration/block/cors"},{"title":"Defaults","_path":"/configuration/block/defaults"},{"title":"Definitions","_path":"/configuration/block/definitions"},{"title":"Endpoint","_path":"/configuration/block/endpoint"},{"title":"Environment","_path":"/configuration/block/environment"},{"title":"Error Handler","_path":"/configuration/block/error_handler"},{"title":"Files","_path":"/configuration/block/files"},{"title":"Health","_path":"/configuration/block/health"},{"title":"Job (Beta)","_path":"/configuration/block/job"},{"title":"JWT Signing Profile","_path":"/configuration/block/jwt_signing_profile"},{"title":"JWT","_path":"/configuration/block/jwt"},{"title":"OAuth2","_path":"/configuration/block/oauth2"},{"title":"OIDC","_path":"/configuration/block/oidc"},{"title":"OpenAPI","_path":"/configuration/block/openapi"},{"title":"Proxy","_path":"/configuration/block/proxy"},{"title":"Rate Limit (Beta)","_path":"/configuration/block/rate_limit"},{"title":"Request","_path":"/configuration/block/request"},{"title":"Response","_path":"/configuration/block/response"},{"title":"SAML","_path":"/configuration/block/saml"},{"title":"Server Certificate","_path":"/configuration/block/server_certificate"},{"title":"TLS (Server)","_path":"/configuration/block/server_tls"},{"title":"Server","_path":"/configuration/block/server"},{"title":"Settings","_path":"/configuration/block/settings"},{"title":"SPA","_path":"/configuration/block/spa"},{"title":"Token Request (Beta)","_path":"/configuration/block/token_request"},{"title":"WebSockets","_path":"/configuration/block/websockets"}]},{"title":"Variables","_path":"/configuration/variables"},{"title":"Functions","_path":"/configuration/functions"},{"title":"Errors","_path":"/configuration/error-handling"},{"title":"Merge of Configuration File(s)","_path":"/configuration/multiple-files"},{"title":"Access Control","_path":"/configuration/access-control"}]},{"title":"Observation","_path":"/observation","children":[{"title":"Health Check","_path":"/observation/health"},{"title":"Logging","_path":"/observation/logging"},{"title":"Metrics","_path":"/observation/metrics"}]},{"title":"Introduction","_path":"/"}]}