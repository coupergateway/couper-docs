[{"_path":"/configuration/block/beta_oauth2","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"OAuth2 AC (Beta)","description":"The beta_oauth2 block lets you configure the oauth2_authorization_url() function and an access\ncontrol for an OAuth2 Authorization Code Grant Flow redirect endpoint.\nLike all access control types, the beta_oauth2 block is defined in the definitions block and can be referenced in all configuration blocks by its required label.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"oauth2-ac-beta"},"children":[{"type":"text","value":"OAuth2 AC (Beta)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_oauth2"}]},{"type":"text","value":" block lets you configure the "},{"type":"element","tag":"a","props":{"href":"/configuration/functions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"oauth2_authorization_url()"}]},{"type":"text","value":" function"}]},{"type":"text","value":" and an access\ncontrol for an OAuth2 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Authorization Code Grant Flow"}]},{"type":"text","value":" redirect endpoint.\nLike all "},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_oauth2"}]},{"type":"text","value":" block is defined in the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block"}]},{"type":"text","value":" and can be referenced in all configuration blocks by its required "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_oauth2"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"âš  required"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A nested "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt_signing_profile"}]},{"type":"text","value":" block is used to create a client assertion if "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"token_endpoint_auth_method"}]},{"type":"text","value":" is either "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"client_secret_jwt\""}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"private_key_jwt\""}]},{"type":"text","value":"."}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"The authorization server endpoint URL used for authorization.\",\"name\":\"authorization_endpoint\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"References a [backend](/configuration/block/backend) in [definitions](/configuration/block/definitions) for token requests. Mutually exclusive with `backend` block.\",\"name\":\"backend\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The client identifier.\",\"name\":\"client_id\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The client password. Required unless `token_endpoint_auth_method` is `\\\"private_key_jwt\\\"`.\",\"name\":\"client_secret\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"The grant type. Required, to be set to: `\\\"authorization_code\\\"`\",\"name\":\"grant_type\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The Couper endpoint for receiving the authorization code. Relative URL references are resolved against the origin of the current request URL. The origin can be changed with the [`accept_forwarded_url` attribute](/configuration/block/settings) if Couper is running behind a proxy.\",\"name\":\"redirect_uri\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"A space separated list of requested scope values for the access token.\",\"name\":\"scope\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The authorization server endpoint URL used for requesting the token.\",\"name\":\"token_endpoint\",\"type\":\"string\"},{\"default\":\"\\\"client_secret_basic\\\"\",\"description\":\"Defines the method to authenticate the client at the token endpoint. If set to `\\\"client_secret_post\\\"`, the client credentials are transported in the request body. If set to `\\\"client_secret_basic\\\"`, the client credentials are transported via Basic Authentication. If set to `\\\"client_secret_jwt\\\"`, the client is authenticated via a JWT signed with the `client_secret`. If set to `\\\"private_key_jwt\\\"`, the client is authenticated via a JWT signed with its private key (see `jwt_signing_profile` block).\",\"name\":\"token_endpoint_auth_method\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The method to verify the integrity of the authorization code flow. Available values: `\\\"ccm_s256\\\"` (`code_challenge` parameter with `code_challenge_method` `S256`), `\\\"state\\\"` (`state` parameter)\",\"name\":\"verifier_method\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The value of the (unhashed) verifier. E.g. using cookie value created with `oauth2_verifier()` function](../functions)\",\"name\":\"verifier_value\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the authorization server supports the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"code_challenge_method"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"S256"}]},{"type":"text","value":" (a.k.a. PKCE, see RFC 7636), we recommend "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"verifier_method = \"ccm_s256\""}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The HTTP header field "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Accept: application/json"}]},{"type":"text","value":" is automatically added to the token request. This can be modified with "},{"type":"element","tag":"a","props":{"href":"/configuration/modifiers#request-header"},"children":[{"type":"text","value":"request header modifiers"}]},{"type":"text","value":" in a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"backend block"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a [backend](/configuration/block/backend) for token requests (zero or one). Mutually exclusive with `backend` attribute.\",\"name\":\"backend\"},{\"description\":\"Configures an [error handler](/configuration/block/error_handler) (zero or more).\",\"name\":\"error_handler\"},{\"description\":\"Configures a [JWT signing profile](/configuration/block/jwt_signing_profile) to create a client assertion if `token_endpoint_auth_method` is either `\\\"client_secret_jwt\\\"` or `\\\"private_key_jwt\\\"` (zero or one).\",\"name\":\"jwt_signing_profile\"}]"},"children":[]}]},"_type":"markdown","_id":"content:2.configuration:4.block:beta_oauth2.md","_source":"content","_file":"2.configuration/4.block/beta_oauth2.md","_extension":"md"},{"_path":"/configuration/block/cors","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"CORS","description":"The cors block configures the CORS (Cross-Origin Resource Sharing) behavior in Couper.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"cors"},"children":[{"type":"text","value":"CORS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block configures the CORS (Cross-Origin Resource Sharing) behavior in Couper."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/files"},"children":[{"type":"text","value":"Files Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/spa"},"children":[{"type":"text","value":"SPA Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"text","value":"API Block"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no label"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Access-Control-Allow-Methods"}]},{"type":"text","value":" is only sent in response to a CORS preflight request, if the method requested by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Access-Control-Request-Method"}]},{"type":"text","value":" is an allowed method (see the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"allowed_method"}]},{"type":"text","value":" attribute for "},{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]}]},{"type":"text","value":" blocks)."}]},{"type":"element","tag":"h3","props":{"id":"attribute-allowed_origins"},"children":[{"type":"text","value":"Attribute "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"allowed_origins"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Can be either of: a string with a single specific origin, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"*\""}]},{"type":"text","value":" (all origins are allowed) or an array of specific origins."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Example:"}]}]},{"type":"element","tag":"code","props":{"code":"allowed_origins = [\"https://www.example.com\", \"https://www.another.host.org\"]\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"allowed_origins = [\"https://www.example.com\", \"https://www.another.host.org\"]\n"}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"false\",\"description\":\"Set to `true` if the response can be shared with credentialed requests (containing `Cookie` or `Authorization` HTTP header fields).\",\"name\":\"allow_credentials\",\"type\":\"bool\"},{\"default\":\"\",\"description\":\"An allowed origin or a list of allowed origins.\",\"name\":\"allowed_origins\",\"type\":\"object\"},{\"default\":\"false\",\"description\":\"Set to `true` to disable the inheritance of CORS from parent context.\",\"name\":\"disable\",\"type\":\"bool\"},{\"default\":\"\",\"description\":\"Indicates the time the information provided by the `Access-Control-Allow-Methods` and `Access-Control-Allow-Headers` response HTTP header fields.\",\"name\":\"max_age\",\"type\":\"duration\"}]"},"children":[]},{"type":"element","tag":"duration","props":{},"children":[]}]},"_type":"markdown","_id":"content:2.configuration:4.block:cors.md","_source":"content","_file":"2.configuration/4.block/cors.md","_extension":"md"}]