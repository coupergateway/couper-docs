[{"_path":"/configuration/block/endpoint","_draft":false,"_partial":false,"_empty":false,"title":"Endpoint","description":"endpoint blocks define the entry points of Couper. The required label\ndefines the path suffix for the incoming client request. Each endpoint block must\nproduce an explicit or implicit client response.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"endpoint"},"children":[{"type":"text","value":"Endpoint"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" blocks define the entry points of Couper. The required "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"\ndefines the path suffix for the incoming client request. Each "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" block must\nproduce an explicit or implicit client response."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"server"},"children":[{"type":"text","value":"Server Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"api"},"children":[{"type":"text","value":"API Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, defines the path suffix for incoming client requests"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"proxy"},"children":[{"type":"text","value":"Proxy Block(s)"}]},{"type":"text","value":",  "},{"type":"element","tag":"a","props":{"href":"request"},"children":[{"type":"text","value":"Request Block(s)"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"response"},"children":[{"type":"text","value":"Response Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"error_handler"},"children":[{"type":"text","value":"Error Handler Block(s)"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"endpoint-sequence"},"children":[{"type":"text","value":"Endpoint Sequence"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" and/or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" block definitions are sequential based on their "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_responses.*"}]},{"type":"text","value":" variable references\nat load-time they will be executed sequentially. Unexpected responses can be caught with "},{"type":"element","tag":"a","props":{"href":"/configuration/error-handling"},"children":[{"type":"text","value":"error handling"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"attribute-allowed_methods"},"children":[{"type":"text","value":"Attribute "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"allowed_methods"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The default value "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"*\""}]},{"type":"text","value":" can be combined with additional methods. Methods are matched case-insensitively. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Access-Control-Allow-Methods"}]},{"type":"text","value":" is only sent in response to a "},{"type":"element","tag":"a","props":{"href":"cors"},"children":[{"type":"text","value":"CORS"}]},{"type":"text","value":" preflight request, if the method requested by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Access-Control-Request-Method"}]},{"type":"text","value":" is an allowed method."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Example:"}]}]},{"type":"element","tag":"code","props":{"code":"allowed_methods = [\"GET\", \"POST\"]` or `allowed_methods = [\"*\", \"BREW\"]\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"allowed_methods = [\"GET\", \"POST\"]` or `allowed_methods = [\"*\", \"BREW\"]\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"attribute-beta_required_permission"},"children":[{"type":"text","value":"Attribute "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_required_permission"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Overrides "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_required_permission"}]},{"type":"text","value":" in a containing "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" block. If the value is a string, the same permission applies to all request methods. If there are different permissions for different request methods, use an object with the request methods as keys and string values. Methods not specified in this object are not permitted. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"*\""}]},{"type":"text","value":" is the key for \"all other standard methods\". Methods other than "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"HEAD"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"PUT"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"PATCH"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DELETE"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"OPTIONS"}]},{"type":"text","value":" must be specified explicitly. A value "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"\""}]},{"type":"text","value":" means \"no permission required\". For "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" blocks with at least two "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":"s, all endpoints must have either a) no "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_required_permission"}]},{"type":"text","value":" set or b) either "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_required_permission"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"disable_access_control"}]},{"type":"text","value":" set. Otherwise, a configuration error is thrown."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Example:"}]}]},{"type":"element","tag":"code","props":{"code":"beta_required_permission = \"read\"\n# or\nbeta_required_permission = { post = \"write\", \"*\" = \"\" }\n# or\nbeta_required_permission = default(request.path_params.p, \"not_set\")\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"beta_required_permission = \"read\"\n# or\nbeta_required_permission = { post = \"write\", \"*\" = \"\" }\n# or\nbeta_required_permission = default(request.path_params.p, \"not_set\")\n"}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"name\":\"access_control\",\"type\":\"tuple (string)\",\"default\":\"[]\",\"description\":\"Sets predefined access control for this block context.\"},{\"name\":\"allowed_methods\",\"type\":\"tuple (string)\",\"default\":\"*\",\"description\":\"Sets allowed methods overriding a default set in the containing <code>api</code> block. Requests with a method that is not allowed result in an error response with a <code>405 Method Not Allowed</code> status.\"},{\"name\":\"disable_access_control\",\"type\":\"tuple (string)\",\"default\":\"[]\",\"description\":\"Disables access controls by name.\"},{\"name\":\"error_file\",\"type\":\"string\",\"default\":\"\\\"\\\"\",\"description\":\"Location of the error file template.\"},{\"name\":\"request_body_limit\",\"type\":\"string\",\"default\":\"\\\"64MiB\\\"\",\"description\":\"Configures the maximum buffer size while accessing <code>request.form_body</code> or <code>request.json_body</code> content. Valid units are: <code>KiB</code>, <code>MiB</code>, <code>GiB</code>\"},{\"name\":\"set_response_status\",\"type\":\"number\",\"default\":\"\",\"description\":\"Modifies the response status code.\"},{\"name\":\"custom_log_fields\",\"type\":\"object\",\"default\":\"\",\"description\":\"Defines log fields for custom logging\"},{\"name\":\"beta_required_permission\",\"type\":\"object\",\"default\":\"\",\"description\":\"expression evaluating to string or object (string)\"}]"},"children":[]}]},"_type":"markdown","_id":"content:2.configuration:4.block:endpoint.md","_source":"content","_file":"2.configuration/4.block/endpoint.md","_extension":"md"},{"_path":"/configuration/block/error_handler","_draft":false,"_partial":false,"_empty":false,"title":"Error Handler","description":"The error_handler block lets you configure the handling of errors thrown in components configured by the parent blocks.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"error-handler"},"children":[{"type":"text","value":"Error Handler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":" block lets you configure the handling of errors thrown in components configured by the parent blocks."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The error handler label specifies which "},{"type":"element","tag":"a","props":{"href":"/configuration/error-handling#error-types"},"children":[{"type":"text","value":"error type"}]},{"type":"text","value":" should be handled. Multiple labels are allowed. The label can be omitted to catch all relevant errors. This has the same behavior as the error type "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*"}]},{"type":"text","value":", that catches all errors explicitly."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Concerning child blocks and attributes, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":" block is similar to an "},{"type":"element","tag":"a","props":{"href":"endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":"."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"api"},"children":[{"type":"text","value":"API Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"basic_auth"},"children":[{"type":"text","value":"Basic Auth Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"jwt"},"children":[{"type":"text","value":"JWT Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"oauth2"},"children":[{"type":"text","value":"OAuth2 AC Block (Beta)"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"oidc"},"children":[{"type":"text","value":"OIDC Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"saml"},"children":[{"type":"text","value":"SAML Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"optional"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"proxy"},"children":[{"type":"text","value":"Proxy Block(s)"}]},{"type":"text","value":",  "},{"type":"element","tag":"a","props":{"href":"request"},"children":[{"type":"text","value":"Request Block(s)"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"response"},"children":[{"type":"text","value":"Response Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"error_handler"},"children":[{"type":"text","value":"Error Handler Block(s)"}]}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Attribute(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Characteristic(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"custom_log_fields"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines log fields for "},{"type":"element","tag":"a","props":{"href":"/observation/logging"},"children":[{"type":"text","value":"Custom Logging"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ Inherited by nested blocks."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/modifiers"},"children":[{"type":"text","value":"Modifiers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Examples:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/avenga/couper-examples/blob/master/error-handling-ba/README.md","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Error Handling for Access Controls"}]},{"type":"text","value":"."}]}]}]},"_type":"markdown","_id":"content:2.configuration:4.block:error_handler.md","_source":"content","_file":"2.configuration/4.block/error_handler.md","_extension":"md"}]