{"_path":"/configuration/block/server_tls","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"TLS (Server)","description":"TLS settings for the related server.","draft":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"tls-server"},"children":[{"type":"text","value":"TLS (Server)"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tls"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tls"}]},{"type":"text","value":" block allows to configure one or more server certificates in the first place.\nThe certificates will be served on all ports within the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"hosts"}]},{"type":"text","value":" list. Enabling "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tls"}]},{"type":"text","value":" also enables the upgrade option to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HTTP2"}]},{"type":"text","value":" protocol."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The simplest configuration is an empty "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tls {}"}]},{"type":"text","value":" block which will serve a self signed certificate\nfor local development."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Multiple "},{"type":"element","tag":"a","props":{"href":"/configuration/block/server_certificate"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server_certificate"}]}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/client_certificate"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client_certificate"}]}]},{"type":"text","value":" blocks are allowed."}]},{"type":"element","tag":"h2","props":{"id":"mtls"},"children":[{"type":"text","value":"mTLS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/client_certificate"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client_certificate"}]}]},{"type":"text","value":" block is defined the server automatically requests and verify a certificate from the client."}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server \"couper\" {\n  hosts = [\"*:443\"]\n\n  tls {\n    server_certificate \"api.example.com\" {\n      public_key_file = \"couperServer.crt\" # PEM\n      private_key_file = \"couperServer.key\" # PEM\n    }\n\n    # mTLS\n\n    client_certificate \"IOT\" {\n      ca_certificate_file = \"couperIntermediate.crt\" # PEM\n      # OR(AND!)\n      leaf_certificate_file = \"couperClient.crt\" # PEM\n    }\n  }\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"couper\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  hosts "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"*:443\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  tls"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    server_certificate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"api.example.com\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      public_key_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperServer.crt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      private_key_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperServer.key\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"    # mTLS\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    client_certificate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"IOT\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      ca_certificate_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperIntermediate.crt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"      # OR(AND!)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"      leaf_certificate_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperClient.crt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]}]}]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures a [client certificate](/configuration/block/client_certificate) (zero or more).\",\"name\":\"client_certificate\"},{\"description\":\"Configures a [server certificate](/configuration/block/server_certificate) (zero or more).\",\"name\":\"server_certificate\"}]"},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"mtls","depth":2,"text":"mTLS"},{"id":"example","depth":2,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:server_tls.md","_source":"content","_file":"2.configuration/4.block/server_tls.md","_extension":"md"}