{"_path":"/configuration/block/jwt_signing_profile","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"JWT Signing Profile","description":"The jwt_signing_profile block lets you configure a JSON Web Token signing\nprofile for your gateway. It is referenced in the jwt_sign() function\nby its required label.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"jwt-signing-profile"},"children":[{"type":"text","value":"JWT Signing Profile"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt_signing_profile"}]},{"type":"text","value":" block lets you configure a JSON Web Token signing\nprofile for your gateway. It is referenced in the "},{"type":"element","tag":"a","props":{"href":"/configuration/functions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt_sign()"}]},{"type":"text","value":" function"}]},{"type":"text","value":"\nby its required "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It can also be used (without "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":") in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"oauth2"}]}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"oidc"}]}]},{"type":"text","value":" or\n"},{"type":"element","tag":"a","props":{"href":"/configuration/block/beta_oauth2"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_oauth2"}]}]},{"type":"text","value":" blocks for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"token_endpoint_auth_method"}]},{"type":"text","value":"s "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"client_secret_jwt\""}]},{"type":"text","value":"\nor "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"private_key_jwt\""}]},{"type":"text","value":" or in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"oauth2"}]}]},{"type":"text","value":" blocks with\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"grant_type = \"urn:ietf:params:oauth:grant-type:jwt-bearer\""}]},{"type":"text","value":", in the absence of an\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"assertion"}]},{"type":"text","value":" attribute, for configuring a self-signed JWT assertion."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt_signing_profile"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2"},"children":[{"type":"text","value":"OAuth2 Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/beta_oauth2"},"children":[{"type":"text","value":"OAuth2 AC (Beta) Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"text","value":"OIDC Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"required if defined in defititions"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Claims for the JWT payload, claim values are evaluated per request.\",\"name\":\"claims\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Additional HTTP header fields for the JWT, `typ` has the default value `JWT`, `alg` cannot be set.\",\"name\":\"headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Private key (in PEM format) for `RS*` and `ES*` variants or the secret for `HS*` algorithms. Mutually exclusive with `key_file`.\",\"name\":\"key\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to file containing signing key. Mutually exclusive with `key`. See `key` for more information.\",\"name\":\"key_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Algorithm used for signing: `\\\"RS256\\\"`, `\\\"RS384\\\"`, `\\\"RS512\\\"`, `\\\"HS256\\\"`, `\\\"HS384\\\"`, `\\\"HS512\\\"`, `\\\"ES256\\\"`, `\\\"ES384\\\"`, `\\\"ES512\\\"`.\",\"name\":\"signature_algorithm\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The token's time-to-live, creates the `exp` claim.\",\"name\":\"ttl\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"duration","props":{},"children":[{"type":"element","tag":"hr","props":{},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"jwt_signing_profile \"myjwt\" {\n  signature_algorithm = \"RS256\"\n  key_file = \"priv_key.pem\"\n  ttl = \"600s\"\n  claims = {\n    iss = \"MyAS\"\n    iat = unixtime()\n  }\n  headers = {\n    kid = \"my-jwk-id\"\n  }\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"jwt_signing_profile \"myjwt\" {\n  signature_algorithm = \"RS256\"\n  key_file = \"priv_key.pem\"\n  ttl = \"600s\"\n  claims = {\n    iss = \"MyAS\"\n    iat = unixtime()\n  }\n  headers = {\n    kid = \"my-jwk-id\"\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A detailed example can be found "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-examples/blob/master/creating-jwt/README.md","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"jwt-signing-profile"},"children":[{"type":"text","value":"JWT Signing Profile"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt_signing_profile"}]},{"type":"text","value":" block lets you configure a JSON Web Token signing\nprofile for your gateway. It is referenced in the "},{"type":"element","tag":"a","props":{"href":"/configuration/functions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt_sign()"}]},{"type":"text","value":" function"}]},{"type":"text","value":"\nby its required "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It can also be used (without "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":") in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"oauth2"}]}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"oidc"}]}]},{"type":"text","value":" or\n"},{"type":"element","tag":"a","props":{"href":"/configuration/block/beta_oauth2"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_oauth2"}]}]},{"type":"text","value":" blocks for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"token_endpoint_auth_method"}]},{"type":"text","value":"s "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"client_secret_jwt\""}]},{"type":"text","value":"\nor "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"private_key_jwt\""}]},{"type":"text","value":" or in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"oauth2"}]}]},{"type":"text","value":" blocks with\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"grant_type = \"urn:ietf:params:oauth:grant-type:jwt-bearer\""}]},{"type":"text","value":", in the absence of an\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"assertion"}]},{"type":"text","value":" attribute, for configuring a self-signed JWT assertion."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt_signing_profile"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2"},"children":[{"type":"text","value":"OAuth2 Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/beta_oauth2"},"children":[{"type":"text","value":"OAuth2 AC (Beta) Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"text","value":"OIDC Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"required if defined in defititions"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Claims for the JWT payload, claim values are evaluated per request.\",\"name\":\"claims\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Additional HTTP header fields for the JWT, `typ` has the default value `JWT`, `alg` cannot be set.\",\"name\":\"headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Private key (in PEM format) for `RS*` and `ES*` variants or the secret for `HS*` algorithms. Mutually exclusive with `key_file`.\",\"name\":\"key\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to file containing signing key. Mutually exclusive with `key`. See `key` for more information.\",\"name\":\"key_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Algorithm used for signing: `\\\"RS256\\\"`, `\\\"RS384\\\"`, `\\\"RS512\\\"`, `\\\"HS256\\\"`, `\\\"HS384\\\"`, `\\\"HS512\\\"`, `\\\"ES256\\\"`, `\\\"ES384\\\"`, `\\\"ES512\\\"`.\",\"name\":\"signature_algorithm\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The token's time-to-live, creates the `exp` claim.\",\"name\":\"ttl\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"duration","props":{},"children":[{"type":"element","tag":"hr","props":{},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"jwt_signing_profile \"myjwt\" {\n  signature_algorithm = \"RS256\"\n  key_file = \"priv_key.pem\"\n  ttl = \"600s\"\n  claims = {\n    iss = \"MyAS\"\n    iat = unixtime()\n  }\n  headers = {\n    kid = \"my-jwk-id\"\n  }\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c54bf4"},"children":[{"type":"text","value":"jwt_signing_profile"}]},{"type":"element","tag":"span","props":{"class":"ct-e65821"},"children":[{"type":"text","value":" \"myjwt\""}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c54bf4"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8eca3c"},"children":[{"type":"text","value":"signature_algorithm"}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-928232"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e65821"},"children":[{"type":"text","value":"\"RS256\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8eca3c"},"children":[{"type":"text","value":"key_file"}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-928232"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e65821"},"children":[{"type":"text","value":"\"priv_key.pem\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8eca3c"},"children":[{"type":"text","value":"ttl"}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-928232"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e65821"},"children":[{"type":"text","value":"\"600s\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8eca3c"},"children":[{"type":"text","value":"claims"}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-928232"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c54bf4"},"children":[{"type":"text","value":"iss"}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-928232"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e65821"},"children":[{"type":"text","value":"\"MyAS\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c54bf4"},"children":[{"type":"text","value":"iat"}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-928232"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a5b55b"},"children":[{"type":"text","value":"unixtime"}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8eca3c"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-928232"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c54bf4"},"children":[{"type":"text","value":"kid"}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-928232"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e65821"},"children":[{"type":"text","value":"\"my-jwk-id\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45a064"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c54bf4"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A detailed example can be found "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-examples/blob/master/creating-jwt/README.md","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-a5b55b{color:#DCDCAA}.ct-928232{color:#D4D4D4}.ct-8eca3c{color:#9CDCFE}.ct-45a064{color:#E6E6E6}.ct-e65821{color:#CE9178}.ct-c54bf4{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example","depth":3,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:jwt_signing_profile.md","_source":"content","_file":"2.configuration/4.block/jwt_signing_profile.md","_extension":"md"}