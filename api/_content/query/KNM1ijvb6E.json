{"_path":"/configuration/block/spa","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"SPA","description":"The spa blocks configure the Web serving for SPA assets. Can be defined multiple times as long as the base_path+paths is unique.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"spa"},"children":[{"type":"text","value":"SPA"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":" blocks configure the Web serving for SPA assets. Can be defined multiple times as long as the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"base_path"}]},{"type":"text","value":"+"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"paths"}]},{"type":"text","value":" is unique."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"spa"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Optional"}]}]}]}]},{"type":"element","tag":"code","props":{"code":"spa {\n    base_path = \"/my-app\" # mounts on /my-app(/**,/special)\n    bootstrap_file = \"./htdocs/index.html\"\n    paths = [\"/**\", \"/special\"]\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"spa {\n    base_path = \"/my-app\" # mounts on /my-app(/**,/special)\n    bootstrap_file = \"./htdocs/index.html\"\n    paths = [\"/**\", \"/special\"]\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"bootstrap-data"},"children":[{"type":"text","value":"Bootstrap Data"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As it could get complicated to configure an SPA based on its environment (urls, clientIDs, ...) Couper can\ninject those environment based values into the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bootstrap_file"}]},{"type":"text","value":" before serving it to the client."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bootstrap_data_placeholder"}]},{"type":"text","value":" will be replaced with the evaluated value of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bootstrap_data"}]},{"type":"text","value":".\nThis happens on startup and is meant to inject "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" values."}]},{"type":"element","tag":"h3","props":{"id":"bootstrap_data-example"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bootstrap_data"}]},{"type":"text","value":" Example"}]},{"type":"element","tag":"code","props":{"code":"# couper.hcl\nspa {\n    bootstrap_file = \"./htdocs/index.html\"\n    paths = [\"/**\"]\n    bootstrap_data = {\n      url: env.MY_API_URL,\n      prop: \"value\",\n    }\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# couper.hcl\nspa {\n    bootstrap_file = \"./htdocs/index.html\"\n    paths = [\"/**\"]\n    bootstrap_data = {\n      url: env.MY_API_URL,\n      prop: \"value\",\n    }\n}\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"<!-- ./htdocs/index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <script>\n      try {\n        window.AppConfig = __BOOTSTRAP_DATA__;\n      } catch(e) {\n        console.warn('DEVELOPMENT MODE: ', e)\n        window.AppConfig = {} // fallback for local development\n      }\n    </script>\n  </head>\n  <body>App</body>\n</html>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<!-- ./htdocs/index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <script>\n      try {\n        window.AppConfig = __BOOTSTRAP_DATA__;\n      } catch(e) {\n        console.warn('DEVELOPMENT MODE: ', e)\n        window.AppConfig = {} // fallback for local development\n      }\n    </script>\n  </head>\n  <body>App</body>\n</html>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The result would be the following snippet. Just place this "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script>"}]},{"type":"text","value":" tag before all other script references in the head tag.\nThen the application can access the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window.AppConfig"}]},{"type":"text","value":" object to bootstrap its configuration."}]},{"type":"element","tag":"code","props":{"code":"<!-- ... -->\n  <script>\n    try {\n      window.AppConfig = {\n        \"url\": \"https://docs.couper.io/\",\n        \"prop\": \"value\",\n      };\n    } catch(e) {\n      console.warn('DEVELOPMENT MODE: ', e)\n      window.AppConfig = {} // fallback for local development\n    }\n  </script>\n<!-- ... -->\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<!-- ... -->\n  <script>\n    try {\n      window.AppConfig = {\n        \"url\": \"https://docs.couper.io/\",\n        \"prop\": \"value\",\n      };\n    } catch(e) {\n      console.warn('DEVELOPMENT MODE: ', e)\n      window.AppConfig = {} // fallback for local development\n    }\n  </script>\n<!-- ... -->\n"}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[]\",\"description\":\"Sets predefined [access control](/configuration/access-control) for `spa` block context.\",\"name\":\"access_control\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as response headers in the client response.\",\"name\":\"add_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Configures the path prefix for all requests.\",\"name\":\"base_path\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"JSON object which replaces the placeholder from `bootstrap_file` content.\",\"name\":\"bootstrap_data\",\"type\":\"object\"},{\"default\":\"\\\"__BOOTSTRAP_DATA__\\\"\",\"description\":\"String which will be replaced with `bootstrap_data`.\",\"name\":\"bootstrap_data_placeholder\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Location of the bootstrap file.\",\"name\":\"bootstrap_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"[]\",\"description\":\"Disables access controls by name.\",\"name\":\"disable_access_control\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of SPA paths that need the bootstrap file.\",\"name\":\"paths\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the client response.\",\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as response headers in the client response.\",\"name\":\"set_response_headers\",\"type\":\"object\"}]"},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures [CORS](/configuration/block/cors) settings (zero or one).\",\"name\":\"cors\"}]"},"children":[]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"spa"},"children":[{"type":"text","value":"SPA"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":" blocks configure the Web serving for SPA assets. Can be defined multiple times as long as the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"base_path"}]},{"type":"text","value":"+"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"paths"}]},{"type":"text","value":" is unique."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"spa"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Optional"}]}]}]}]},{"type":"element","tag":"code","props":{"code":"spa {\n    base_path = \"/my-app\" # mounts on /my-app(/**,/special)\n    bootstrap_file = \"./htdocs/index.html\"\n    paths = [\"/**\", \"/special\"]\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"spa"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"base_path"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"\"/my-app\""}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0eef1d"},"children":[{"type":"text","value":"# mounts on /my-app(/**,/special)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"bootstrap_file"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"\"./htdocs/index.html\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"paths"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"\"/**\""}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"\"/special\""}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"bootstrap-data"},"children":[{"type":"text","value":"Bootstrap Data"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As it could get complicated to configure an SPA based on its environment (urls, clientIDs, ...) Couper can\ninject those environment based values into the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bootstrap_file"}]},{"type":"text","value":" before serving it to the client."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bootstrap_data_placeholder"}]},{"type":"text","value":" will be replaced with the evaluated value of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bootstrap_data"}]},{"type":"text","value":".\nThis happens on startup and is meant to inject "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" values."}]},{"type":"element","tag":"h3","props":{"id":"bootstrap_data-example"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bootstrap_data"}]},{"type":"text","value":" Example"}]},{"type":"element","tag":"code","props":{"code":"# couper.hcl\nspa {\n    bootstrap_file = \"./htdocs/index.html\"\n    paths = [\"/**\"]\n    bootstrap_data = {\n      url: env.MY_API_URL,\n      prop: \"value\",\n    }\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0eef1d"},"children":[{"type":"text","value":"# couper.hcl"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"spa"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"bootstrap_file"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"\"./htdocs/index.html\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"paths"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"\"/**\""}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"bootstrap_data"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"MY_API_URL"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"prop"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"\"value\""}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"<!-- ./htdocs/index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <script>\n      try {\n        window.AppConfig = __BOOTSTRAP_DATA__;\n      } catch(e) {\n        console.warn('DEVELOPMENT MODE: ', e)\n        window.AppConfig = {} // fallback for local development\n      }\n    </script>\n  </head>\n  <body>App</body>\n</html>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0eef1d"},"children":[{"type":"text","value":"<!-- ./htdocs/index.html -->"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":"<!"}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"DOCTYPE"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"\"en\""}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"head"}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-c27ed7"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"AppConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"__BOOTSTRAP_DATA__"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"      } "}]},{"type":"element","tag":"span","props":{"class":"ct-c27ed7"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1758dd"},"children":[{"type":"text","value":"warn"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"'DEVELOPMENT MODE: '"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"AppConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":" = {} "}]},{"type":"element","tag":"span","props":{"class":"ct-0eef1d"},"children":[{"type":"text","value":"// fallback for local development"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"head"}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"App"}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The result would be the following snippet. Just place this "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script>"}]},{"type":"text","value":" tag before all other script references in the head tag.\nThen the application can access the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window.AppConfig"}]},{"type":"text","value":" object to bootstrap its configuration."}]},{"type":"element","tag":"code","props":{"code":"<!-- ... -->\n  <script>\n    try {\n      window.AppConfig = {\n        \"url\": \"https://docs.couper.io/\",\n        \"prop\": \"value\",\n      };\n    } catch(e) {\n      console.warn('DEVELOPMENT MODE: ', e)\n      window.AppConfig = {} // fallback for local development\n    }\n  </script>\n<!-- ... -->\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0eef1d"},"children":[{"type":"text","value":"<!-- ... -->"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b05890"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c27ed7"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"AppConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":" = {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"\"url\""}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"\"https://docs.couper.io/\""}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"\"prop\""}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"\"value\""}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"      };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-c27ed7"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1758dd"},"children":[{"type":"text","value":"warn"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-fd34b7"},"children":[{"type":"text","value":"'DEVELOPMENT MODE: '"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6a7e"},"children":[{"type":"text","value":"AppConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":" = {} "}]},{"type":"element","tag":"span","props":{"class":"ct-0eef1d"},"children":[{"type":"text","value":"// fallback for local development"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a4bfb"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-f1b032"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-4f1451"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0eef1d"},"children":[{"type":"text","value":"<!-- ... -->"}]}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[]\",\"description\":\"Sets predefined [access control](/configuration/access-control) for `spa` block context.\",\"name\":\"access_control\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to add as response headers in the client response.\",\"name\":\"add_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Configures the path prefix for all requests.\",\"name\":\"base_path\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"JSON object which replaces the placeholder from `bootstrap_file` content.\",\"name\":\"bootstrap_data\",\"type\":\"object\"},{\"default\":\"\\\"__BOOTSTRAP_DATA__\\\"\",\"description\":\"String which will be replaced with `bootstrap_data`.\",\"name\":\"bootstrap_data_placeholder\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Location of the bootstrap file.\",\"name\":\"bootstrap_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"[]\",\"description\":\"Disables access controls by name.\",\"name\":\"disable_access_control\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of SPA paths that need the bootstrap file.\",\"name\":\"paths\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"List of names to remove headers from the client response.\",\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Key/value pairs to set as response headers in the client response.\",\"name\":\"set_response_headers\",\"type\":\"object\"}]"},"children":[]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures [CORS](/configuration/block/cors) settings (zero or one).\",\"name\":\"cors\"}]"},"children":[]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-1758dd{color:#DCDCAA}.ct-c27ed7{color:#C586C0}.ct-4f1451{color:#808080}.ct-0eef1d{color:#6A9955}.ct-fd34b7{color:#CE9178}.ct-0a4bfb{color:#D4D4D4}.ct-0e6a7e{color:#9CDCFE}.ct-b05890{color:#E6E6E6}.ct-f1b032{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"bootstrap-data","depth":2,"text":"Bootstrap Data","children":[{"id":"bootstrap_data-example","depth":3,"text":"bootstrap_data Example"}]}]}},"_type":"markdown","_id":"content:2.configuration:4.block:spa.md","_source":"content","_file":"2.configuration/4.block/spa.md","_extension":"md"}