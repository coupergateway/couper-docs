[{"_path":"/configuration/block/request","_draft":false,"_partial":false,"_empty":false,"title":"Request","description":"The request block creates and executes a request to a backend service.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"request"},"children":[{"type":"text","value":"Request"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" block creates and executes a request to a backend service."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"üìù Multiple "},{"type":"element","tag":"a","props":{"href":"proxy"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy"}]}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" blocks are executed in parallel."}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"‚ö† A "},{"type":"element","tag":"a","props":{"href":"proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"request"},"children":[{"type":"text","value":"Request Block"}]},{"type":"text","value":" w/o a label has an implicit label "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"default\""}]},{"type":"text","value":". Only "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"one"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"request"},"children":[{"type":"text","value":"Request Block"}]},{"type":"text","value":" w/ label "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"default\""}]},{"type":"text","value":" per "},{"type":"element","tag":"a","props":{"href":"endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":" is allowed."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":" (‚ö† required, if no "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block reference is defined or no "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"url"}]},{"type":"text","value":" attribute is set."}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"name\":\"backend\",\"type\":\"string\",\"default\":\"\",\"description\":\"`backend` block reference, defined in [`definitions`](definitions). Required, if no [`backend` block](backend) is defined within.\"},{\"name\":\"body\",\"type\":\"string\",\"default\":\"\",\"description\":\"plain text request body, implicitly sets `Content-Type: text/plain` header field.\"},{\"name\":\"expected_status\",\"type\":\"tuple (int)\",\"default\":\"[]\",\"description\":\"If defined, the response status code will be verified against this list of codes. If the status code is not included in this list an [`unexpected_status` error](../error-handling#endpoint-error-types) will be thrown which can be handled with an [`error_handler`](../error-handling#endpoint-related-error_handler).\"},{\"name\":\"form_body\",\"type\":\"string\",\"default\":\"\",\"description\":\"form request body, implicitly sets `Content-Type: application/x-www-form-urlencoded` header field.\"},{\"name\":\"headers\",\"type\":\"object\",\"default\":\"\",\"description\":\"request headers\"},{\"name\":\"json_body\",\"type\":\"string\",\"default\":\"\",\"description\":\"JSON request body, implicitly sets `Content-Type: application/json` header field.\"},{\"name\":\"method\",\"type\":\"string\",\"default\":\"\\\"GET\\\"\",\"description\":\"the request method\"},{\"name\":\"query_params\",\"type\":\"object\",\"default\":\"\",\"description\":\"Key/value pairs to set query parameters for this request\"},{\"name\":\"url\",\"type\":\"string\",\"default\":\"\",\"description\":\"If defined, the host part of the URL must be the same as the `origin` attribute of the used backend.\"}]"},"children":[]},{"type":"element","tag":"h3","props":{"id":"examples"},"children":[{"type":"text","value":"Examples"}]},{"type":"element","tag":"code","props":{"code":"request {\n  url = \"https://httpbin.org/anything\"\n  body = \"foo\"\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"request {\n  url = \"https://httpbin.org/anything\"\n  body = \"foo\"\n}\n"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/avenga/couper-examples/tree/master/custom-requests","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Sending requests"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/avenga/couper-examples/tree/master/sending-json","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Sending JSON"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/avenga/couper-examples/tree/master/sending-form","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Sending forms"}]}]}]}]},"_type":"markdown","_id":"content:2.configuration:4.block:request.md","_source":"content","_file":"2.configuration/4.block/request.md","_extension":"md"},{"_path":"/configuration/block/saml","_draft":false,"_partial":false,"_empty":false,"title":"SAML","description":"The saml block lets you configure the saml_sso_url() function](../functions) and an access\ncontrol for a SAML Assertion Consumer Service (ACS) endpoint.\nLike all Access Control types, the saml block is defined in\nthe Definitions Block and can be referenced in all configuration blocks by its\nrequired label.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"saml"},"children":[{"type":"text","value":"SAML"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" block lets you configure the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml_sso_url()"}]},{"type":"text","value":" function](../functions) and an access\ncontrol for a SAML Assertion Consumer Service (ACS) endpoint.\nLike all "},{"type":"element","tag":"a","props":{"href":"#access-control"},"children":[{"type":"text","value":"Access Control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" block is defined in\nthe "},{"type":"element","tag":"a","props":{"href":"definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":" and can be referenced in all configuration blocks by its\nrequired "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"‚ö† required"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"error_handler"},"children":[{"type":"text","value":"Error Handler Block"}]}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Attribute(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Characteristic(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"idp_metadata_file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"File reference to the Identity Provider metadata XML file."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"‚ö† required"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sp_acs_url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The URL of the Service Provider's ACS endpoint."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"‚ö† required. Relative URL references are resolved against the origin of the current request URL. The origin can be changed with the "},{"type":"element","tag":"a","props":{"href":"settings"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"accept_forwarded_url"}]}]},{"type":"text","value":" attribute if Couper is running behind a proxy."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sp_entity_id"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The Service Provider's entity ID."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"‚ö† required"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"array_attributes"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"tuple (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[]"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A list of assertion attributes that may have several values."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Results in at least an empty array in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.attributes.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"array_attributes = [\"memberOf\"]"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"custom_log_fields"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines log fields for "},{"type":"element","tag":"a","props":{"href":"/observation/logging#custom-logging"},"children":[{"type":"text","value":"Custom Logging"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"‚ö† Inherited by nested blocks."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Some information from the assertion consumed at the ACS endpoint is provided in the context at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>"}]},{"type":"text","value":":"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NameID"}]},{"type":"text","value":" of the assertion's "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Subject"}]},{"type":"text","value":" ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.sub"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the session expiry date "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SessionNotOnOrAfter"}]},{"type":"text","value":" (as UNIX timestamp: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.exp"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the attributes ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.attributes.<name>"}]},{"type":"text","value":")"}]}]}]},"_type":"markdown","_id":"content:2.configuration:4.block:saml.md","_source":"content","_file":"2.configuration/4.block/saml.md","_extension":"md"}]