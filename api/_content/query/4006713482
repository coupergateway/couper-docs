[{"_path":"/configuration/block/openapi","_draft":false,"_partial":false,"_empty":false,"title":"OpenAPI","description":"The openapi block configures the backend's proxy behavior to validate outgoing\nand incoming requests to and from the origin, preventing the origin from invalid\nrequests and the Couper client from invalid answers.\nTo do so Couper uses the OpenAPI 3 standard to load\nthe definitions from a given document defined with the file attribute.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"openapi"},"children":[{"type":"text","value":"OpenAPI"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"openapi"}]},{"type":"text","value":" block configures the backend's proxy behavior to validate outgoing\nand incoming requests to and from the origin, preventing the origin from invalid\nrequests and the Couper client from invalid answers.\nTo do so Couper uses the "},{"type":"element","tag":"a","props":{"href":"https://www.openapis.org/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"OpenAPI 3 standard"}]},{"type":"text","value":" to load\nthe definitions from a given document defined with the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"file"}]},{"type":"text","value":" attribute."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"⚠️ While ignoring request violations an invalid method or path would\nlead to a non-matching "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"route"}]},{"type":"text","value":" which is still required for response validations.\nIn this case the response validation will fail if not ignored, too."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"openapi"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"backend"},"children":[{"type":"text","value":"Backend Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"name\":\"file\",\"type\":\"string\",\"default\":\"\",\"description\":\"OpenAPI YAML definition file\"},{\"name\":\"ignore_request_violations\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"logs request validation results, skips error handling\"},{\"name\":\"ignore_response_violations\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"logs response validation results, skips error handling\"}]"},"children":[]},{"type":"element","tag":"h3","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"openapi {\n  file = \"openapi.yaml\"\n  ignore_response_violations = true\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"openapi {\n  file = \"openapi.yaml\"\n  ignore_response_violations = true\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can find a detailed example "},{"type":"element","tag":"a","props":{"href":"https://github.com/avenga/couper-examples/blob/master/backend-validation/README.md","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]}]},"_type":"markdown","_id":"content:2.configuration:4.block:openapi.md","_source":"content","_file":"2.configuration/4.block/openapi.md","_extension":"md"},{"_path":"/configuration/block/rate_limit","_draft":false,"_partial":false,"_empty":false,"title":"Rate Limit (Beta)","description":"Rate limiting protects backend services. It implements quota management used to avoid cascading failures or to spare resources.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rate-limit-beta"},"children":[{"type":"text","value":"Rate Limit (Beta)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Rate limiting protects backend services. It implements quota management used to avoid cascading failures or to spare resources."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_rate_limit"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"named "},{"type":"element","tag":"a","props":{"href":"backend"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Attribute(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Characteristic(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#duration"},"children":[{"type":"text","value":"duration"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines the rate limit period."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, must not be negative or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" (zero)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period = \"1m\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines the number of allowed backend requests in a period."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, must not be negative or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" (zero)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period = 100"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period_window"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"sliding\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines the window of the period. A "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fixed"}]},{"type":"text","value":" window permits "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period"}]},{"type":"text","value":" requests within "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period"}]},{"type":"text","value":" after the first request to the parent backend. After the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period"}]},{"type":"text","value":" has expired, another "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period"}]},{"type":"text","value":" request is permitted. The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sliding"}]},{"type":"text","value":" window ensures that only "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period"}]},{"type":"text","value":" requests are sent in any interval of length "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Allowed values: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"fixed\""}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"sliding\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period_window = \"sliding\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mode"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"wait\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"If "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mode"}]},{"type":"text","value":" is set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"block"}]},{"type":"text","value":" and the rate limit is exceeded, the client request is immediately answered with HTTP status code "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"429"}]},{"type":"text","value":" (Too Many Requests) and no backend request is made. If "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mode"}]},{"type":"text","value":" is set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"wait"}]},{"type":"text","value":" and the rate limit is exceeded, the request waits for the next free rate limiting period."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Allowed values: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"wait\""}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"block\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mode = \"wait\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" Anonymous backends (inline backends without label) cannot define "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_rate_limit"}]},{"type":"text","value":" block(s)."}]},{"type":"element","tag":"duration","props":{},"children":[]}]},"_type":"markdown","_id":"content:2.configuration:4.block:rate_limit.md","_source":"content","_file":"2.configuration/4.block/rate_limit.md","_extension":"md"}]