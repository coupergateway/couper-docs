{"_path":"/configuration/block/rate_limit","_draft":false,"_partial":false,"_empty":false,"title":"Rate Limit (Beta)","description":"Rate limiting protects backend services. It implements quota management used to avoid cascading failures or to spare resources.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rate-limit-beta"},"children":[{"type":"text","value":"Rate Limit (Beta)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Rate limiting protects backend services. It implements quota management used to avoid cascading failures or to spare resources."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_rate_limit"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"named "},{"type":"element","tag":"a","props":{"href":"backend"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Attribute(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Characteristic(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#duration"},"children":[{"type":"text","value":"duration"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines the rate limit period."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, must not be negative or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" (zero)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period = \"1m\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines the number of allowed backend requests in a period."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, must not be negative or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" (zero)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period = 100"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period_window"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"sliding\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines the window of the period. A "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fixed"}]},{"type":"text","value":" window permits "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period"}]},{"type":"text","value":" requests within "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period"}]},{"type":"text","value":" after the first request to the parent backend. After the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period"}]},{"type":"text","value":" has expired, another "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period"}]},{"type":"text","value":" request is permitted. The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sliding"}]},{"type":"text","value":" window ensures that only "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period"}]},{"type":"text","value":" requests are sent in any interval of length "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Allowed values: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"fixed\""}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"sliding\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period_window = \"sliding\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mode"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"wait\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"If "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mode"}]},{"type":"text","value":" is set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"block"}]},{"type":"text","value":" and the rate limit is exceeded, the client request is immediately answered with HTTP status code "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"429"}]},{"type":"text","value":" (Too Many Requests) and no backend request is made. If "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mode"}]},{"type":"text","value":" is set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"wait"}]},{"type":"text","value":" and the rate limit is exceeded, the request waits for the next free rate limiting period."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Allowed values: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"wait\""}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"block\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mode = \"wait\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" Anonymous backends (inline backends without label) cannot define "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_rate_limit"}]},{"type":"text","value":" block(s)."}]},{"type":"element","tag":"duration","props":{},"children":[]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rate-limit-beta"},"children":[{"type":"text","value":"Rate Limit (Beta)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Rate limiting protects backend services. It implements quota management used to avoid cascading failures or to spare resources."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_rate_limit"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"named "},{"type":"element","tag":"a","props":{"href":"backend"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Attribute(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Characteristic(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#duration"},"children":[{"type":"text","value":"duration"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines the rate limit period."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, must not be negative or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" (zero)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period = \"1m\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines the number of allowed backend requests in a period."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, must not be negative or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" (zero)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period = 100"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period_window"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"sliding\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines the window of the period. A "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fixed"}]},{"type":"text","value":" window permits "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period"}]},{"type":"text","value":" requests within "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period"}]},{"type":"text","value":" after the first request to the parent backend. After the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period"}]},{"type":"text","value":" has expired, another "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period"}]},{"type":"text","value":" request is permitted. The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sliding"}]},{"type":"text","value":" window ensures that only "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"per_period"}]},{"type":"text","value":" requests are sent in any interval of length "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Allowed values: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"fixed\""}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"sliding\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"period_window = \"sliding\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mode"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"wait\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"If "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mode"}]},{"type":"text","value":" is set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"block"}]},{"type":"text","value":" and the rate limit is exceeded, the client request is immediately answered with HTTP status code "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"429"}]},{"type":"text","value":" (Too Many Requests) and no backend request is made. If "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mode"}]},{"type":"text","value":" is set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"wait"}]},{"type":"text","value":" and the rate limit is exceeded, the request waits for the next free rate limiting period."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Allowed values: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"wait\""}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"block\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mode = \"wait\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" Anonymous backends (inline backends without label) cannot define "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_rate_limit"}]},{"type":"text","value":" block(s)."}]},{"type":"element","tag":"duration","props":{},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:rate_limit.md","_source":"content","_file":"2.configuration/4.block/rate_limit.md","_extension":"md"}