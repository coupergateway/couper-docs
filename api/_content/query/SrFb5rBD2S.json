[{"_path":"/configuration/multiple-files","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Merge of Configuration File(s)","description":"For more complex situations you can configure Couper with multiple files.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"merging"},"children":[{"type":"text","value":"Merging"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper supports merging of blocks and attributes from multiple configuration files\n(see "},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#basic-options"},"children":[{"type":"text","value":"Basic Options of Command Line Interface"}]},{"type":"text","value":")."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging"},"children":[{"type":"text","value":"Merging"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#general-rules-of-merging"},"children":[{"type":"text","value":"General Rules of Merging"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging-of-server-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" Blocks"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging-of-definitions-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" Blocks"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging-of-defaults-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" Blocks"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging-of-settings-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" Blocks"}]}]}]},{"type":"element","tag":"h2","props":{"id":"general-rules-of-merging"},"children":[{"type":"text","value":"General Rules of Merging"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When merging, all attributes (except "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"environment_variables"}]},{"type":"text","value":" in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block) replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Blocks that cannot have labels (eg. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" etc.) replace existing blocks with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Blocks with optional labels (eg. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" etc.) are merged recursively with blocks with the same label (blocks without a label are merged with blocks with the same name and no label in each context), if any, otherwise they are added. Only one unlabeled block of the same type is allowed in each context (eg. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" blocks in a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" block)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Blocks with required label (eg. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":") replace existing blocks with the same name and label in each context, if any, otherwise they are added."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Blocks with (optional) multiple labels (eg. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":") replace existing blocks with identical labels, if any, otherwise they are added."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Currently, here is no way to remove an attribute or a block from the configuration."}]},{"type":"element","tag":"h2","props":{"id":"merging-of-server-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" blocks are merged:"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" blocks replace existing blocks with the same name, if any, otherwise, they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" blocks replace existing blocks with the same label, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" blocks are merged:"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block replaces existing "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block, if any, otherwise a new "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" blocks are merged:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block replaces existing "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block, if any, otherwise a new "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" blocks replace existing blocks with the same label, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":" blocks replace existing blocks with identical labels, if any, otherwise they are added."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" An "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":" block cannot be replaced in or added to an "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" block. Therefore, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" block must be completely replaced."}]},{"type":"element","tag":"h2","props":{"id":"merging-of-definitions-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" blocks are merged recursively, if any, otherwise a new "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All blocks inside a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block replace existing blocks with the same name and label."}]}]},{"type":"element","tag":"h2","props":{"id":"merging-of-defaults-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" blocks are merged recursively, if any, otherwise a new "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes inside a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block (except "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"environment_variables"}]},{"type":"text","value":") replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Single values of an "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"environment_variables"}]},{"type":"text","value":" attribute replace existing values with the same key, if any, otherwise they are added."}]}]},{"type":"element","tag":"h2","props":{"id":"merging-of-settings-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" blocks are merged recursively, if any, otherwise a new "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes inside a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" block replace existing attributes with the same name, if any, otherwise they are added."}]}]}]},"_type":"markdown","_id":"content:2.configuration:8.multiple-files.md","_source":"content","_file":"2.configuration/8.multiple-files.md","_extension":"md"},{"_path":"/observation/health","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Health Check","description":"The health check will answer with status 200 OK on every port with the configured\nhealth_path setting or the\nCOUPER_HEALTH_PATH environment variable.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"health-check"},"children":[{"type":"text","value":"Health Check"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The health check will answer with status "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"200 OK"}]},{"type":"text","value":" on every port with the configured\n"},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"health_path"}]},{"type":"text","value":" setting"}]},{"type":"text","value":" or the\n"},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#observation-options"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"COUPER_HEALTH_PATH"}]},{"type":"text","value":" environment variable"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As soon as the gateway instance receives a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SIGINT"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SIGTERM"}]},{"type":"text","value":" the check will return a status\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"500 Internal Server Error"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A shutdown delay ("},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#timing-environment-variables"},"children":[{"type":"text","value":"environment variable "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"COUPER_TIMING_SHUTDOWN_DELAY"}]}]},{"type":"text","value":")\nallows the server to finish all running requests and gives a load balancer time to pick another gateway instance.\nAfter this delay the server goes into shutdown mode and no new requests will be accepted."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The shutdown timings ("},{"type":"element","tag":"a","props":{"href":"/configuration/command-line#timing-environment-variables"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"COUPER_TIMING_SHUTDOWN_TIMEOUT"}]}]},{"type":"text","value":")\ndefault to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" which means no delaying with development setups."}]}]},"_type":"markdown","_id":"content:3.observation:health.md","_source":"content","_file":"3.observation/health.md","_extension":"md"}]