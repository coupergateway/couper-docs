{"_path":"/configuration/block/server_tls","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"TLS (Server)","description":"TLS settings for the related server.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"tls-server"},"children":[{"type":"text","value":"TLS (Server)"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server_certificate"},"children":[{"type":"text","value":"Server Certificate(s)"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/client_certificate"},"children":[{"type":"text","value":"Client Certificate(s)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls"}]},{"type":"text","value":" block allows to configure one or more server certificates in the first place.\nThe certificates will be served on all ports within the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hosts"}]},{"type":"text","value":" list. Enabling "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls"}]},{"type":"text","value":" also enables the upgrade option to the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"HTTP2"}]},{"type":"text","value":" protocol."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The simplest configuration is an empty "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls {}"}]},{"type":"text","value":" block which will serve a self signed certificate\nfor local development."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Multiple "},{"type":"element","tag":"a","props":{"href":"/configuration/block/server_certificate"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server_certificate"}]}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/client_certificate"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_certificate"}]}]},{"type":"text","value":" blocks are allowed."}]},{"type":"element","tag":"h2","props":{"id":"mtls"},"children":[{"type":"text","value":"mTLS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/client_certificate"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_certificate"}]}]},{"type":"text","value":" block is defined the server automatically requests and verify a certificate from the client."}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"server \"couper\" {\n  hosts = [\"*:443\"]\n\n  tls {\n    server_certificate \"api.example.com\" {\n      public_key_file = \"couperServer.crt\" # PEM\n      private_key_file = \"couperServer.key\" # PEM\n    }\n\n    # mTLS\n\n    client_certificate \"IOT\" {\n      ca_certificate_file = \"couperIntermediate.crt\" # PEM\n      # OR(AND!)\n      leaf_certificate_file = \"couperClient.crt\" # PEM\n    }\n  }\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"server \"couper\" {\n  hosts = [\"*:443\"]\n\n  tls {\n    server_certificate \"api.example.com\" {\n      public_key_file = \"couperServer.crt\" # PEM\n      private_key_file = \"couperServer.key\" # PEM\n    }\n\n    # mTLS\n\n    client_certificate \"IOT\" {\n      ca_certificate_file = \"couperIntermediate.crt\" # PEM\n      # OR(AND!)\n      leaf_certificate_file = \"couperClient.crt\" # PEM\n    }\n  }\n"}]}]}]}]},"draft":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"tls-server"},"children":[{"type":"text","value":"TLS (Server)"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server_certificate"},"children":[{"type":"text","value":"Server Certificate(s)"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/client_certificate"},"children":[{"type":"text","value":"Client Certificate(s)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls"}]},{"type":"text","value":" block allows to configure one or more server certificates in the first place.\nThe certificates will be served on all ports within the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hosts"}]},{"type":"text","value":" list. Enabling "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls"}]},{"type":"text","value":" also enables the upgrade option to the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"HTTP2"}]},{"type":"text","value":" protocol."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The simplest configuration is an empty "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls {}"}]},{"type":"text","value":" block which will serve a self signed certificate\nfor local development."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Multiple "},{"type":"element","tag":"a","props":{"href":"/configuration/block/server_certificate"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server_certificate"}]}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"/configuration/block/client_certificate"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_certificate"}]}]},{"type":"text","value":" blocks are allowed."}]},{"type":"element","tag":"h2","props":{"id":"mtls"},"children":[{"type":"text","value":"mTLS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once a "},{"type":"element","tag":"a","props":{"href":"/configuration/block/client_certificate"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_certificate"}]}]},{"type":"text","value":" block is defined the server automatically requests and verify a certificate from the client."}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"server \"couper\" {\n  hosts = [\"*:443\"]\n\n  tls {\n    server_certificate \"api.example.com\" {\n      public_key_file = \"couperServer.crt\" # PEM\n      private_key_file = \"couperServer.key\" # PEM\n    }\n\n    # mTLS\n\n    client_certificate \"IOT\" {\n      ca_certificate_file = \"couperIntermediate.crt\" # PEM\n      # OR(AND!)\n      leaf_certificate_file = \"couperClient.crt\" # PEM\n    }\n  }\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1042c"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-aa84f4"},"children":[{"type":"text","value":" \"couper\""}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1042c"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-eb6935"},"children":[{"type":"text","value":"hosts"}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2fdf5a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-aa84f4"},"children":[{"type":"text","value":"\"*:443\""}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b1042c"},"children":[{"type":"text","value":"tls"}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1042c"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1042c"},"children":[{"type":"text","value":"server_certificate"}]},{"type":"element","tag":"span","props":{"class":"ct-aa84f4"},"children":[{"type":"text","value":" \"api.example.com\""}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1042c"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-eb6935"},"children":[{"type":"text","value":"public_key_file"}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2fdf5a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa84f4"},"children":[{"type":"text","value":"\"couperServer.crt\""}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95ba3e"},"children":[{"type":"text","value":"# PEM"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-eb6935"},"children":[{"type":"text","value":"private_key_file"}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2fdf5a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa84f4"},"children":[{"type":"text","value":"\"couperServer.key\""}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95ba3e"},"children":[{"type":"text","value":"# PEM"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1042c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-95ba3e"},"children":[{"type":"text","value":"# mTLS"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1042c"},"children":[{"type":"text","value":"client_certificate"}]},{"type":"element","tag":"span","props":{"class":"ct-aa84f4"},"children":[{"type":"text","value":" \"IOT\""}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1042c"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-eb6935"},"children":[{"type":"text","value":"ca_certificate_file"}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2fdf5a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa84f4"},"children":[{"type":"text","value":"\"couperIntermediate.crt\""}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95ba3e"},"children":[{"type":"text","value":"# PEM"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-95ba3e"},"children":[{"type":"text","value":"# OR(AND!)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-eb6935"},"children":[{"type":"text","value":"leaf_certificate_file"}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2fdf5a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa84f4"},"children":[{"type":"text","value":"\"couperClient.crt\""}]},{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95ba3e"},"children":[{"type":"text","value":"# PEM"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1042c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1465b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b1042c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-95ba3e{color:#6A9955}.ct-2fdf5a{color:#D4D4D4}.ct-eb6935{color:#9CDCFE}.ct-c1465b{color:#E6E6E6}.ct-aa84f4{color:#CE9178}.ct-b1042c{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"mtls","depth":2,"text":"mTLS"},{"id":"example","depth":2,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:server_tls.md","_source":"content","_file":"2.configuration/4.block/server_tls.md","_extension":"md"}