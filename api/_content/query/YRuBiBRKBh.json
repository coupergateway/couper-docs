[{"_path":"/configuration/modifiers","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Modifiers","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"modifiers"},"children":[{"type":"text","value":"Modifiers"}]},{"type":"element","tag":"h2","props":{"id":"request-header"},"children":[{"type":"text","value":"Request Header"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper offers three attributes to manipulate the request header fields. The header\nattributes can be defined unordered within the configuration file but will be\nexecuted ordered as follows:"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Modifier"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Contexts"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"remove_request_headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list of request header to be removed from the upstream request."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set_request_headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to set request header in the upstream request."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"add_request_headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to add request header to the upstream request."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*_request_headers"}]},{"type":"text","value":" are executed from: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"response-header"},"children":[{"type":"text","value":"Response Header"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper offers three attributes to manipulate the response header fields. The header\nattributes can be defined unordered within the configuration file but will be\nexecuted ordered as follows:"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Modifier"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Contexts"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"remove_response_headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/files"},"children":[{"type":"text","value":"Files Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/spa"},"children":[{"type":"text","value":"SPA Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"text","value":"API Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list of response header to be removed from the client response."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set_response_headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/files"},"children":[{"type":"text","value":"Files Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/spa"},"children":[{"type":"text","value":"SPA Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"text","value":"API Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to set response header in the client response."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"add_response_headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server"},"children":[{"type":"text","value":"Server Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/files"},"children":[{"type":"text","value":"Files Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/spa"},"children":[{"type":"text","value":"SPA Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/api"},"children":[{"type":"text","value":"API Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to add response header to the client response."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*_response_headers"}]},{"type":"text","value":" are executed from: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"files"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"set-response-status"},"children":[{"type":"text","value":"Set Response Status"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set_response_status"}]},{"type":"text","value":" attribute allows to modify the HTTP status code to the\ngiven value."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Modifier"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Contexts"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set_response_status"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP status code to be set to the client response."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the HTTP status code ist set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"204"}]},{"type":"text","value":", the response body and the HTTP header\nfield "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Content-Length"}]},{"type":"text","value":" is removed from the client response, and a warning is logged."}]},{"type":"element","tag":"h2","props":{"id":"parameters"},"children":[{"type":"text","value":"Parameters"}]},{"type":"element","tag":"h3","props":{"id":"query-parameter"},"children":[{"type":"text","value":"Query Parameter"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper offers three attributes to manipulate the query parameter. The query\nattributes can be defined unordered within the configuration file but will be\nexecuted ordered as follows:"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Modifier"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Contexts"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"remove_query_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list of query parameters to be removed from the upstream request URL."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set_query_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to set query parameters in the upstream request URL."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"add_query_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to add query parameters to the upstream request URL."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*_query_params"}]},{"type":"text","value":" are executed from: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"server \"my_project\" {\n  api {\n    endpoint \"/\" {\n      proxy {\n        backend = \"example\"\n      }\n    }\n  }\n}\n\ndefinitions {\n  backend \"example\" {\n    origin = \"http://example.com\"\n\n    remove_query_params = [\"a\", \"b\"]\n\n    set_query_params = {\n      string = \"string\"\n      multi = [\"foo\", \"bar\"]\n      \"${request.headers.example}\" = \"yes\"\n    }\n\n    add_query_params = {\n      noop = request.headers.noop\n      null = null\n      empty = \"\"\n    }\n  }\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"server \"my_project\" {\n  api {\n    endpoint \"/\" {\n      proxy {\n        backend = \"example\"\n      }\n    }\n  }\n}\n\ndefinitions {\n  backend \"example\" {\n    origin = \"http://example.com\"\n\n    remove_query_params = [\"a\", \"b\"]\n\n    set_query_params = {\n      string = \"string\"\n      multi = [\"foo\", \"bar\"]\n      \"${request.headers.example}\" = \"yes\"\n    }\n\n    add_query_params = {\n      noop = request.headers.noop\n      null = null\n      empty = \"\"\n    }\n  }\n}\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"form-parameter"},"children":[{"type":"text","value":"Form Parameter"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper offers three attributes to manipulate the form parameter. The form\nattributes can be defined unordered within the configuration file but will be\nexecuted ordered as follows:"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Modifier"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Contexts"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"remove_form_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list of form parameters to be removed from the upstream request body."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set_form_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to set form parameters in the upstream request body."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"add_form_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/endpoint"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Key/value(s) pairs to add form parameters to the upstream request body."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*_form_params"}]},{"type":"text","value":" are executed from: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*_form_params"}]},{"type":"text","value":" apply only to requests with the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]},{"type":"text","value":" method and\nthe "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Content-Type: application/x-www-form-urlencoded"}]},{"type":"text","value":" HTTP header field."}]},{"type":"element","tag":"code","props":{"code":"server \"my_project\" {\n  api {\n    endpoint \"/\" {\n      proxy {\n        backend = \"example\"\n      }\n    }\n  }\n}\n\ndefinitions {\n  backend \"example\" {\n    origin = \"http://example.com\"\n\n    remove_form_params = [\"a\", \"b\"]\n\n    set_form_params = {\n      string = \"string\"\n      multi = [\"foo\", \"bar\"]\n      \"${request.headers.example}\" = \"yes\"\n    }\n\n    add_form_params = {\n      noop = request.headers.noop\n      null = null\n      empty = \"\"\n    }\n  }\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"server \"my_project\" {\n  api {\n    endpoint \"/\" {\n      proxy {\n        backend = \"example\"\n      }\n    }\n  }\n}\n\ndefinitions {\n  backend \"example\" {\n    origin = \"http://example.com\"\n\n    remove_form_params = [\"a\", \"b\"]\n\n    set_form_params = {\n      string = \"string\"\n      multi = [\"foo\", \"bar\"]\n      \"${request.headers.example}\" = \"yes\"\n    }\n\n    add_form_params = {\n      noop = request.headers.noop\n      null = null\n      empty = \"\"\n    }\n  }\n}\n"}]}]}]}]},"_type":"markdown","_id":"content:2.configuration:3.modifiers.md","_source":"content","_file":"2.configuration/3.modifiers.md","_extension":"md"},{"_path":"/configuration/block/backend","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Backend","description":"The backend defines the connection pool with given origin for outgoing connections.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"backend"},"children":[{"type":"text","value":"Backend"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block defines the connection to a local/remote backend service."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Backends can be defined in the "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":" and referenced by "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/request"},"children":[{"type":"text","value":"Request Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2req_auth"},"children":[{"type":"text","value":"OAuth2 CC Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/jwt"},"children":[{"type":"text","value":"JWT Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2"},"children":[{"type":"text","value":"OAuth2 AC Block (beta)"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oidc"},"children":[{"type":"text","value":"OIDC Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, when defined in "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/openapi"},"children":[{"type":"text","value":"OpenAPI Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/oauth2req_auth"},"children":[{"type":"text","value":"OAuth2 CC Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/health"},"children":[{"type":"text","value":"Health Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/token_request"},"children":[{"type":"text","value":"Token Request (Beta) Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"/configuration/block/rate_limit"},"children":[{"type":"text","value":"Rate Limit Block (beta)"}]}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"key/value pairs to add form parameters to the upstream request body\",\"name\":\"add_form_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"key/value pairs to add query parameters to the upstream request URL\",\"name\":\"add_query_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"key/value pairs to add as request headers in the upstream request\",\"name\":\"add_request_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"key/value pairs to add as response headers in the client response\",\"name\":\"add_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Basic auth for the upstream request with format user:pass .\",\"name\":\"basic_auth\",\"type\":\"string\"},{\"default\":\"\\\"10s\\\"\",\"description\":\"The total timeout for dialing and connect to the origin.\",\"name\":\"connect_timeout\",\"type\":\"duration\"},{\"default\":\"\",\"description\":\"log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"false\",\"description\":\"Disables the peer certificate validation. Must not be used in backend refinement.\",\"name\":\"disable_certificate_validation\",\"type\":\"bool\"},{\"default\":\"false\",\"description\":\"Disables reusage of connections to the origin. Must not be used in backend refinement.\",\"name\":\"disable_connection_reuse\",\"type\":\"bool\"},{\"default\":\"\",\"description\":\"Value of the HTTP host header field for the origin request. Since hostname replaces the request host the value will also be used for a server identity check during a TLS handshake with the origin.\",\"name\":\"hostname\",\"type\":\"string\"},{\"default\":\"false\",\"description\":\"Enables the HTTP2 support. Must not be used in backend refinement.\",\"name\":\"http2\",\"type\":\"bool\"},{\"default\":\"0\",\"description\":\"The maximum number of concurrent connections in any state (_active_ or _idle_) to the origin. Must not be used in backend refinement.\",\"name\":\"max_connections\",\"type\":\"number\"},{\"default\":\"\",\"description\":\"URL to connect to for backend requests.\",\"name\":\"origin\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Changeable part of upstream URL.\",\"name\":\"path\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Prefixes all backend request paths with the given prefix\",\"name\":\"path_prefix\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"A proxy URL for the related origin request.\",\"name\":\"proxy\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"list of names to remove form parameters from the upstream request body\",\"name\":\"remove_form_params\",\"type\":\"object\"},{\"default\":\"[]\",\"description\":\"list of names to remove query parameters from the upstream request URL\",\"name\":\"remove_query_params\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"list of names to remove headers from the upstream request\",\"name\":\"remove_request_headers\",\"type\":\"tuple (string)\"},{\"default\":\"[]\",\"description\":\"list of names to remove headers from the client response\",\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"key/value pairs to set query parameters in the upstream request URL\",\"name\":\"set_form_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"key/value pairs to set query parameters in the upstream request URL\",\"name\":\"set_query_params\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"key/value pairs to set as request headers in the upstream request\",\"name\":\"set_request_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"key/value pairs to set as response headers in the client response\",\"name\":\"set_response_headers\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"Modifies the response status code.\",\"name\":\"set_response_status\",\"type\":\"number\"},{\"default\":\"\\\"300s\\\"\",\"description\":\"The total deadline duration a backend request has for write and read/pipe.\",\"name\":\"timeout\",\"type\":\"duration\"},{\"default\":\"\\\"60s\\\"\",\"description\":\"The duration from writing the full request to the origin and receiving the answer.\",\"name\":\"ttfb_timeout\",\"type\":\"duration\"},{\"default\":\"false\",\"description\":\"Ignores the health state and continues with the outgoing request\",\"name\":\"use_when_unhealthy\",\"type\":\"bool\"}]"},"children":[]},{"type":"element","tag":"duration","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"refining-a-referenced-backend"},"children":[{"type":"text","value":"Refining a referenced backend"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Referenced backends may be \"refined\" by using a labeled "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block in places where an unlabeled "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block would also be allowed, e.g. in a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" block:"}]},{"type":"element","tag":"code","props":{"code":"    proxy {\n      backend \"ref_be\" {      # refine referenced backend\n        path = \"/b\"           # override existing attribute value\n        add_form_params = {   # set new attribute\n          # ...\n        }\n      }\n    }\n\n# ...\n\ndefinitions {\n  backend \"ref_be\" {\n    origin = \"https://example.com\"\n    path = \"/a\"\n  }\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"    proxy {\n      backend \"ref_be\" {      # refine referenced backend\n        path = \"/b\"           # override existing attribute value\n        add_form_params = {   # set new attribute\n          # ...\n        }\n      }\n    }\n\n# ...\n\ndefinitions {\n  backend \"ref_be\" {\n    origin = \"https://example.com\"\n    path = \"/a\"\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If an attribute is set in both the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"referenced"}]},{"type":"text","value":" and the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"refining"}]},{"type":"text","value":" block, the value in the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"refining"}]},{"type":"text","value":" block is used."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" Child "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"blocks"}]},{"type":"text","value":" and the following "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"attributes"}]},{"type":"text","value":" are not allowed in refining "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" blocks:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"disable_certificate_validation"}]},{"type":"text","value":","}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"disable_connection_reuse"}]},{"type":"text","value":","}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http2"}]},{"type":"text","value":" and"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"max_connections"}]},{"type":"text","value":"."}]}]}]},"draft":false,"_type":"markdown","_id":"content:2.configuration:4.block:backend.md","_source":"content","_file":"2.configuration/4.block/backend.md","_extension":"md"}]