{"_path":"/configuration/configuration-file","_dir":"configuration","_draft":false,"_partial":false,"_locale":"","title":"Configuration File","description":"Overview how to configure Couper with its configuration file.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"configuration-file"},"children":[{"type":"text","value":"Configuration File"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The language for Couper's configuration file is "},{"type":"element","tag":"a","props":{"href":"https://github.com/hashicorp/hcl/tree/hcl2#information-model-and-syntax","rel":["nofollow"]},"children":[{"type":"text","value":"HCL 2.0"}]},{"type":"text","value":", a configuration language by HashiCorp."}]},{"type":"element","tag":"h2","props":{"id":"ide-extension"},"children":[{"type":"text","value":"IDE Extension"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper provides its own IDE extension that adds Couper-specific highlighting and autocompletion to Couper's configuration file "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper.hcl"}]},{"type":"text","value":" in Visual Studio Code."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Get it from the "},{"type":"element","tag":"a","props":{"href":"https://marketplace.visualstudio.com/items?itemName=couper.couperconf","rel":["nofollow"]},"children":[{"type":"text","value":"Visual Studio Market Place"}]},{"type":"text","value":" or visit the "},{"type":"element","tag":"a","props":{"href":"https://github.com/coupergateway/couper-vscode","rel":["nofollow"]},"children":[{"type":"text","value":"Extension repository"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"file-name"},"children":[{"type":"text","value":"File Name"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The file-ending of your configuration file should be "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".hcl"}]},{"type":"text","value":" to have syntax highlighting within your IDE."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The file name defaults to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"couper.hcl"}]},{"type":"text","value":" in your working directory. This can be changed with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-f"}]},{"type":"text","value":" command-line flag. With "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-f /opt/couper/my_conf.hcl"}]},{"type":"text","value":" couper changes the working directory to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/opt/couper"}]},{"type":"text","value":" and loads "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"my_conf.hcl"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"basic-file-structure"},"children":[{"type":"text","value":"Basic File Structure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper's configuration file consists of nested configuration blocks that configure\nthe gateway. There are a large number of options, but let's focus on the main structure first:"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"server \"my_project\" {\n  files {\n    # ...\n  }\n\n  spa {\n    # ...\n  }\n\n  api {\n    access_control = [\"foo\"]\n    endpoint \"/bar\" {\n      proxy {\n        backend { }\n      }\n      request \"sub-request\" {\n        backend { }\n      }\n      response { }\n    }\n  }\n}\n\ndefinitions {\n  # ...\n}\n\nsettings {\n  # ...\n}\n\ndefaults {\n  # ...\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"my_project\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  files"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"    # ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  spa"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"    # ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"  api"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    access_control "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"foo\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"    endpoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"/bar\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      proxy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"        backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" { }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      request"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"sub-request\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"        backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" { }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"      response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" { }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"definitions"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"settings"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"defaults"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" main configuration block(s)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" configuration block for file serving."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":" configuration block for Web serving (SPA assets)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" configuration block(s) that bundle(s) endpoints under a certain base path or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":" list."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"access_control"}]},{"type":"text","value":" attribute that sets access control for a block context."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" configuration block for Couper's entry points."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":" configuration block for a proxy request and response to an origin."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" configuration block for connection to local/remote backend service(s)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" configuration block for a manual request to an origin."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" configuration block for connection to local/remote backend service(s)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"response"}]},{"type":"text","value":" configuration block for a manual client response."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block for predefined configurations, that can be referenced."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" block for server configuration which applies to the running instance."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block for default/fallback values."}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"ide-extension","depth":2,"text":"IDE Extension"},{"id":"file-name","depth":2,"text":"File Name"},{"id":"basic-file-structure","depth":2,"text":"Basic File Structure"}]}},"_type":"markdown","_id":"content:2.configuration:1.configuration-file.md","_source":"content","_file":"2.configuration/1.configuration-file.md","_extension":"md"}