{"_path":"/configuration/block/client_certificate","_dir":"block","_draft":false,"_partial":false,"_locale":"","title":"Client Certificate","description":"The `client_certificate` block is part of its parent `tls` block. Enables mTLS configuration.","draft":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"client-certificate"},"children":[{"type":"text","value":"Client Certificate"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client_certificate"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/server_tls"},"children":[{"type":"text","value":"tls Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"optional"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Define an optional "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client_certificate"}]},{"type":"text","value":" block with its optional "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":" to enable "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"mTLS"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"mTLS:"}]},{"type":"text","value":" stands for mutual TLS and will extend the normal handshake process with an additional request (client must present the certificate) and verification for the configured client certificate (CA)."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Configuring a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ca_certificate"}]},{"type":"text","value":" is the standard way to specify a client certificate. But you can also provide the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"leaf_certificate"}]},{"type":"text","value":"\nwhich effectively is the client certificate. The server will verify the given client certificate byte by byte against its own leaf certificate.\nA combination of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ca_certificate"}]},{"type":"text","value":"(or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ca_certificate_file"}]},{"type":"text","value":") or/and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"leaf_certificate"}]},{"type":"text","value":"(or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"leaf_certificate_file"}]},{"type":"text","value":") is valid.\nThis covers the use-case where the CA has signed multiple client certificates and you want to limit the access to specific ones."}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"pre","props":{"className":"language-hcl shiki shiki-themes slack-dark","code":"client_certificate \"IOT\" {\n  ca_certificate = \"base64_der\" # PEM or DER encoded\n  # OR\n  ca_certificate_file = \"couperIntermediate.crt\" # PEM\n\n  # OR/AND\n  # trusted client leaf cert\n\n  leaf_certificate = \"base64_der\"\n  # OR\n  leaf_certificate_file = \"couperClient.crt\" # PEM\n}\n","language":"hcl","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"client_certificate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" \"IOT\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  ca_certificate "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"base64_der\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM or DER encoded\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # OR\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  ca_certificate_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperIntermediate.crt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # OR/AND\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # trusted client leaf cert\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  leaf_certificate "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"base64_der\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"  # OR\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"  leaf_certificate_file "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"couperClient.crt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":" # PEM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Public part of the certificate authority in DER or PEM format. Mutually exclusive with `ca_certificate_file`.\",\"name\":\"ca_certificate\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the certificate authority file in DER or PEM format. Mutually exclusive with `ca_certificate`.\",\"name\":\"ca_certificate_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Public part of the client certificate in DER or PEM format. Mutually exclusive with `leaf_certificate_file`.\",\"name\":\"leaf_certificate\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the client certificate file in DER or PEM format. Mutually exclusive with `leaf_certificate`.\",\"name\":\"leaf_certificate_file\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example","depth":2,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:client_certificate.md","_source":"content","_file":"2.configuration/4.block/client_certificate.md","_extension":"md"}