{"_path":"/configuration/variables","_draft":false,"_partial":false,"_empty":false,"title":"Variables","description":"The configuration file allows the use of some predefined variables. There are two phases when those variables get evaluated.\nThe first phase is at config load which is currently related to env and simple function usage.\nThe second evaluation will happen during the request/response handling.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"variables"},"children":[{"type":"text","value":"Variables"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The configuration file allows the use of some predefined variables. There are two phases when those variables get evaluated.\nThe first phase is at config load which is currently related to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" and simple "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"function"}]},{"type":"text","value":" usage.\nThe second evaluation will happen during the request/response handling."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" are the environment variables"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" is the client request"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_requests"}]},{"type":"text","value":" contains all modified backend requests"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_responses"}]},{"type":"text","value":" contains all original backend responses"}]}]},{"type":"element","tag":"h2","props":{"id":"couper"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"couper"}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"version"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Couper's version number"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"1.3.1\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"env"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"env"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Environment variables can be accessed everywhere within the configuration file\nsince these references get evaluated at start."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You may provide default values by means of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"environment_variables"}]},{"type":"text","value":" in the "},{"type":"element","tag":"a","props":{"href":"block/defaults"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// ...\n   origin = env.ORIGIN\n// ...\ndefaults {\n  environment_variables = {\n    ORIGIN = \"http://localhost/\"\n    TIMEOUT = \"3s\"\n  }\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\n   origin = env.ORIGIN\n// ...\ndefaults {\n  environment_variables = {\n    ORIGIN = \"http://localhost/\"\n    TIMEOUT = \"3s\"\n  }\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"request"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request"}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Unique request id"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"method"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP method"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"GET\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"headers.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP request header value for requested lower-case key"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookies.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Cookie"}]},{"type":"text","value":" request header for requested key (⚠ last wins!)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"query.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Query parameter values"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"path_params.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value from a named path parameter defined within an endpoint path label"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request message body"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"form_body.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parameter in a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/x-www-form-urlencoded"}]},{"type":"text","value":" body"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"json_body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access JSON decoded message body. Media type must be "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/json"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/*+json"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"context.beta_granted_permissions"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Permissions granted to the requester as yielded by access controls (see e.g. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_permissions_claim"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_roles_claim"}]},{"type":"text","value":" in the "},{"type":"element","tag":"a","props":{"href":"block/jwt"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block"}]},{"type":"text","value":")."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[\"perm1\", \"perm2\"]"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"context.beta_required_permission"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Permission required to perform the requested operation (value of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_required_permission"}]},{"type":"text","value":" attribute of "},{"type":"element","tag":"a","props":{"href":"#endpoint-block"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]}]},{"type":"text","value":" (or "},{"type":"element","tag":"a","props":{"href":"block/api"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]}]},{"type":"text","value":") block)."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"context.<name>.<property_name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request context containing information from the "},{"type":"element","tag":"a","props":{"href":"#access-control"},"children":[{"type":"text","value":"Access Control"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"https://www.example.com/path/to?q=val&a=1\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Origin of the request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"https://www.example.com\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"protocol"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request protocol"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"https\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"host"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Host of the request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"www.example.com\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"port"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Port of the request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"443"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"path"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request URL path"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"/path/to\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The value of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"context.<name>"}]},{"type":"text","value":" depends on the type of block referenced by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<name>"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a "},{"type":"element","tag":"a","props":{"href":"block/basic_auth"},"children":[{"type":"text","value":"Basic Auth"}]},{"type":"text","value":" and successfully authenticated request the variable contains the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"user"}]},{"type":"text","value":" name."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a "},{"type":"element","tag":"a","props":{"href":"block/jwt"},"children":[{"type":"text","value":"JWT Block"}]},{"type":"text","value":" the variable contains claims from the JWT used for "},{"type":"element","tag":"a","props":{"href":"#access-control"},"children":[{"type":"text","value":"Access Control"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a "},{"type":"element","tag":"a","props":{"href":"block/saml"},"children":[{"type":"text","value":"SAML Block"}]},{"type":"text","value":" the variable contains"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sub"}]},{"type":"text","value":": the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NameID"}]},{"type":"text","value":" of the SAML assertion"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"exp"}]},{"type":"text","value":": optional expiration date (value of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SessionNotOnOrAfter"}]},{"type":"text","value":" of the SAML assertion)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"attributes"}]},{"type":"text","value":": a map of attributes from the SAML assertion"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For an "},{"type":"element","tag":"a","props":{"href":"block/oauth2"},"children":[{"type":"text","value":"OAuth2 AC Block"}]},{"type":"text","value":", the variable contains the response from the token endpoint, e.g."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"access_token"}]},{"type":"text","value":": the access token retrieved from the token endpoint"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"token_type"}]},{"type":"text","value":": the token type"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"expires_in"}]},{"type":"text","value":": the token lifetime"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"scope"}]},{"type":"text","value":": the granted scope (if different from the requested scope)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"and for OIDC additionally:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id_token"}]},{"type":"text","value":": the ID token"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id_token_claims"}]},{"type":"text","value":": a map of claims from the ID token"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"userinfo"}]},{"type":"text","value":": a map of claims retrieved from the userinfo endpoint"}]}]},{"type":"element","tag":"h2","props":{"id":"backends"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backends"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backends.<label>"}]},{"type":"text","value":" allows access to backend information."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"health"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"current "},{"type":"element","tag":"a","props":{"href":"block/health"},"children":[{"type":"text","value":"health state"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{\"error\": \"\", \"healthy\": true, \"state\": \"healthy\"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"backend_request"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_request"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_request"}]},{"type":"text","value":" holds information about the current backend request. It is only\navailable in a "},{"type":"element","tag":"a","props":{"href":"block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", and has the same attributes as a backend request in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_requests.<label>"}]},{"type":"text","value":" (see "},{"type":"element","tag":"a","props":{"href":"#backend_requests"},"children":[{"type":"text","value":"backend_requests"}]},{"type":"text","value":" below)."}]},{"type":"element","tag":"h2","props":{"id":"backend_requests"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_requests"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_requests"}]},{"type":"text","value":" is an object with all backend requests and their attributes.\nTo access a specific request use the related label. "},{"type":"element","tag":"a","props":{"href":"block/request"},"children":[{"type":"text","value":"Request"}]},{"type":"text","value":" and\n"},{"type":"element","tag":"a","props":{"href":"block/proxy"},"children":[{"type":"text","value":"Proxy"}]},{"type":"text","value":" blocks without a label will be available as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default"}]},{"type":"text","value":".\nTo access the HTTP method of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" request use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_requests.default.method"}]},{"type":"text","value":" ."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Unique request id"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"method"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP method"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"GET\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"headers.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP request header value for requested lower-case key"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookies.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Cookie"}]},{"type":"text","value":" request header for requested key (⚠ last wins!)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"query.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Query parameter values"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request message body"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"form_body.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parameter in a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/x-www-form-urlencoded"}]},{"type":"text","value":" body"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"json_body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access JSON decoded message body. Media type must be "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/json"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/*+json"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"context.<name>.<property_name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request context containing claims from JWT used for "},{"type":"element","tag":"a","props":{"href":"#access-control"},"children":[{"type":"text","value":"Access Control"}]},{"type":"text","value":" or information from a SAML assertion, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<name>"}]},{"type":"text","value":" being the "},{"type":"element","tag":"a","props":{"href":"block/jwt"},"children":[{"type":"text","value":"JWT Block's"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"block/saml"},"children":[{"type":"text","value":"SAML Block's"}]},{"type":"text","value":" label and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"property_name"}]},{"type":"text","value":" being the claim's or assertion information's name"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"https://www.example.com/path/to?q=val&a=1\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Origin of the backend request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"https://www.example.com\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"protocol"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request protocol"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"https\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"host"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Host of the backend request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"www.example.com\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"port"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Port of the backend request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"443"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"path"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request URL path"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"/path/to\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"backend_response"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_response"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_response"}]},{"type":"text","value":" represents the current backend response.  It is only\navailable in a "},{"type":"element","tag":"a","props":{"href":"block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", and has the same attributes as a backend response in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_responses.<label>"}]},{"type":"text","value":" (see "},{"type":"element","tag":"a","props":{"href":"#backend_responses"},"children":[{"type":"text","value":"backend_responses"}]},{"type":"text","value":" below)."}]},{"type":"element","tag":"h2","props":{"id":"backend_responses"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_responses"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_responses"}]},{"type":"text","value":" is an object with all backend responses and their attributes.\nUse the related label to access a specific response.\n"},{"type":"element","tag":"a","props":{"href":"block/request"},"children":[{"type":"text","value":"Request"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"block/proxy"},"children":[{"type":"text","value":"Proxy"}]},{"type":"text","value":" blocks without a label will be available as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default"}]},{"type":"text","value":".\nTo access the HTTP status code of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" response use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_responses.default.status"}]},{"type":"text","value":" ."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"status"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP status code"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"200"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"headers.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP response header value for requested lower-case key"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookies.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Set-Cookie"}]},{"type":"text","value":" response header for requested key (⚠ last wins!)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The response message body"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"json_body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access JSON decoded message body. Media type must be "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/json"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/*+json"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"path-parameter"},"children":[{"type":"text","value":"Path Parameter"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An endpoint label could be defined as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint \"/app/{section}/{project}/view\" { ... }"}]},{"type":"text","value":"\nto access the named path parameter "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"section"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"project"}]},{"type":"text","value":" via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.path_params.*"}]},{"type":"text","value":".\nThe values would map as following for the request path: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/app/nature/plant-a-tree/view"}]},{"type":"text","value":":"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Value"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.path_params.section"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nature"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.path_params.project"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"plant-a-tree"}]}]}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"variables"},"children":[{"type":"text","value":"Variables"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The configuration file allows the use of some predefined variables. There are two phases when those variables get evaluated.\nThe first phase is at config load which is currently related to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" and simple "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"function"}]},{"type":"text","value":" usage.\nThe second evaluation will happen during the request/response handling."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" are the environment variables"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" is the client request"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_requests"}]},{"type":"text","value":" contains all modified backend requests"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_responses"}]},{"type":"text","value":" contains all original backend responses"}]}]},{"type":"element","tag":"h2","props":{"id":"couper"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"couper"}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"version"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Couper's version number"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"1.3.1\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"env"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"env"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Environment variables can be accessed everywhere within the configuration file\nsince these references get evaluated at start."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You may provide default values by means of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"environment_variables"}]},{"type":"text","value":" in the "},{"type":"element","tag":"a","props":{"href":"block/defaults"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// ...\n   origin = env.ORIGIN\n// ...\ndefaults {\n  environment_variables = {\n    ORIGIN = \"http://localhost/\"\n    TIMEOUT = \"3s\"\n  }\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-57ba0f"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4699ee"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-ea18e5"},"children":[{"type":"text","value":"origin"}]},{"type":"element","tag":"span","props":{"class":"ct-4699ee"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0abb11"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4699ee"},"children":[{"type":"text","value":" env"}]},{"type":"element","tag":"span","props":{"class":"ct-f8b81c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4699ee"},"children":[{"type":"text","value":"ORIGIN"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-57ba0f"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d08f3"},"children":[{"type":"text","value":"defaults"}]},{"type":"element","tag":"span","props":{"class":"ct-4699ee"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4699ee"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ea18e5"},"children":[{"type":"text","value":"environment_variables"}]},{"type":"element","tag":"span","props":{"class":"ct-4699ee"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0abb11"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4699ee"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4699ee"},"children":[{"type":"text","value":"    ORIGIN = \"http://localhost/\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4699ee"},"children":[{"type":"text","value":"    TIMEOUT = \"3s\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4699ee"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4699ee"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"request"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request"}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Unique request id"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"method"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP method"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"GET\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"headers.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP request header value for requested lower-case key"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookies.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Cookie"}]},{"type":"text","value":" request header for requested key (⚠ last wins!)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"query.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Query parameter values"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"path_params.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value from a named path parameter defined within an endpoint path label"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request message body"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"form_body.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parameter in a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/x-www-form-urlencoded"}]},{"type":"text","value":" body"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"json_body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access JSON decoded message body. Media type must be "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/json"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/*+json"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"context.beta_granted_permissions"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Permissions granted to the requester as yielded by access controls (see e.g. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_permissions_claim"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_roles_claim"}]},{"type":"text","value":" in the "},{"type":"element","tag":"a","props":{"href":"block/jwt"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block"}]},{"type":"text","value":")."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[\"perm1\", \"perm2\"]"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"context.beta_required_permission"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Permission required to perform the requested operation (value of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_required_permission"}]},{"type":"text","value":" attribute of "},{"type":"element","tag":"a","props":{"href":"#endpoint-block"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]}]},{"type":"text","value":" (or "},{"type":"element","tag":"a","props":{"href":"block/api"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]}]},{"type":"text","value":") block)."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"context.<name>.<property_name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request context containing information from the "},{"type":"element","tag":"a","props":{"href":"#access-control"},"children":[{"type":"text","value":"Access Control"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"https://www.example.com/path/to?q=val&a=1\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Origin of the request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"https://www.example.com\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"protocol"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request protocol"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"https\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"host"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Host of the request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"www.example.com\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"port"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Port of the request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"443"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"path"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request URL path"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"/path/to\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The value of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"context.<name>"}]},{"type":"text","value":" depends on the type of block referenced by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<name>"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a "},{"type":"element","tag":"a","props":{"href":"block/basic_auth"},"children":[{"type":"text","value":"Basic Auth"}]},{"type":"text","value":" and successfully authenticated request the variable contains the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"user"}]},{"type":"text","value":" name."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a "},{"type":"element","tag":"a","props":{"href":"block/jwt"},"children":[{"type":"text","value":"JWT Block"}]},{"type":"text","value":" the variable contains claims from the JWT used for "},{"type":"element","tag":"a","props":{"href":"#access-control"},"children":[{"type":"text","value":"Access Control"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a "},{"type":"element","tag":"a","props":{"href":"block/saml"},"children":[{"type":"text","value":"SAML Block"}]},{"type":"text","value":" the variable contains"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sub"}]},{"type":"text","value":": the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NameID"}]},{"type":"text","value":" of the SAML assertion"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"exp"}]},{"type":"text","value":": optional expiration date (value of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SessionNotOnOrAfter"}]},{"type":"text","value":" of the SAML assertion)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"attributes"}]},{"type":"text","value":": a map of attributes from the SAML assertion"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For an "},{"type":"element","tag":"a","props":{"href":"block/oauth2"},"children":[{"type":"text","value":"OAuth2 AC Block"}]},{"type":"text","value":", the variable contains the response from the token endpoint, e.g."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"access_token"}]},{"type":"text","value":": the access token retrieved from the token endpoint"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"token_type"}]},{"type":"text","value":": the token type"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"expires_in"}]},{"type":"text","value":": the token lifetime"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"scope"}]},{"type":"text","value":": the granted scope (if different from the requested scope)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"and for OIDC additionally:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id_token"}]},{"type":"text","value":": the ID token"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id_token_claims"}]},{"type":"text","value":": a map of claims from the ID token"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"userinfo"}]},{"type":"text","value":": a map of claims retrieved from the userinfo endpoint"}]}]},{"type":"element","tag":"h2","props":{"id":"backends"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backends"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backends.<label>"}]},{"type":"text","value":" allows access to backend information."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"health"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"current "},{"type":"element","tag":"a","props":{"href":"block/health"},"children":[{"type":"text","value":"health state"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{\"error\": \"\", \"healthy\": true, \"state\": \"healthy\"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"backend_request"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_request"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_request"}]},{"type":"text","value":" holds information about the current backend request. It is only\navailable in a "},{"type":"element","tag":"a","props":{"href":"block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", and has the same attributes as a backend request in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_requests.<label>"}]},{"type":"text","value":" (see "},{"type":"element","tag":"a","props":{"href":"#backend_requests"},"children":[{"type":"text","value":"backend_requests"}]},{"type":"text","value":" below)."}]},{"type":"element","tag":"h2","props":{"id":"backend_requests"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_requests"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_requests"}]},{"type":"text","value":" is an object with all backend requests and their attributes.\nTo access a specific request use the related label. "},{"type":"element","tag":"a","props":{"href":"block/request"},"children":[{"type":"text","value":"Request"}]},{"type":"text","value":" and\n"},{"type":"element","tag":"a","props":{"href":"block/proxy"},"children":[{"type":"text","value":"Proxy"}]},{"type":"text","value":" blocks without a label will be available as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default"}]},{"type":"text","value":".\nTo access the HTTP method of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" request use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_requests.default.method"}]},{"type":"text","value":" ."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Unique request id"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"method"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP method"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"GET\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"headers.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP request header value for requested lower-case key"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookies.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Cookie"}]},{"type":"text","value":" request header for requested key (⚠ last wins!)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"query.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Query parameter values"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request message body"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"form_body.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parameter in a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/x-www-form-urlencoded"}]},{"type":"text","value":" body"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"json_body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access JSON decoded message body. Media type must be "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/json"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/*+json"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"context.<name>.<property_name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Request context containing claims from JWT used for "},{"type":"element","tag":"a","props":{"href":"#access-control"},"children":[{"type":"text","value":"Access Control"}]},{"type":"text","value":" or information from a SAML assertion, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<name>"}]},{"type":"text","value":" being the "},{"type":"element","tag":"a","props":{"href":"block/jwt"},"children":[{"type":"text","value":"JWT Block's"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"block/saml"},"children":[{"type":"text","value":"SAML Block's"}]},{"type":"text","value":" label and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"property_name"}]},{"type":"text","value":" being the claim's or assertion information's name"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"https://www.example.com/path/to?q=val&a=1\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Origin of the backend request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"https://www.example.com\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"protocol"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request protocol"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"https\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"host"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Host of the backend request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"www.example.com\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"port"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Port of the backend request URL"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"443"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"path"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Backend request URL path"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"/path/to\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"backend_response"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_response"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_response"}]},{"type":"text","value":" represents the current backend response.  It is only\navailable in a "},{"type":"element","tag":"a","props":{"href":"block/backend"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", and has the same attributes as a backend response in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_responses.<label>"}]},{"type":"text","value":" (see "},{"type":"element","tag":"a","props":{"href":"#backend_responses"},"children":[{"type":"text","value":"backend_responses"}]},{"type":"text","value":" below)."}]},{"type":"element","tag":"h2","props":{"id":"backend_responses"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_responses"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_responses"}]},{"type":"text","value":" is an object with all backend responses and their attributes.\nUse the related label to access a specific response.\n"},{"type":"element","tag":"a","props":{"href":"block/request"},"children":[{"type":"text","value":"Request"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"block/proxy"},"children":[{"type":"text","value":"Proxy"}]},{"type":"text","value":" blocks without a label will be available as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default"}]},{"type":"text","value":".\nTo access the HTTP status code of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" response use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_responses.default.status"}]},{"type":"text","value":" ."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"status"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"integer"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP status code"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"200"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"headers.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"HTTP response header value for requested lower-case key"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookies.<name>"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Value from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Set-Cookie"}]},{"type":"text","value":" response header for requested key (⚠ last wins!)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The response message body"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"json_body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"various"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Access JSON decoded message body. Media type must be "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/json"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"application/*+json"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"path-parameter"},"children":[{"type":"text","value":"Path Parameter"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An endpoint label could be defined as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint \"/app/{section}/{project}/view\" { ... }"}]},{"type":"text","value":"\nto access the named path parameter "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"section"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"project"}]},{"type":"text","value":" via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.path_params.*"}]},{"type":"text","value":".\nThe values would map as following for the request path: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/app/nature/plant-a-tree/view"}]},{"type":"text","value":":"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Variable"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Value"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.path_params.section"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nature"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.path_params.project"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"plant-a-tree"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-6d08f3{color:#569CD6}.ct-f8b81c{color:#B5CEA8}.ct-0abb11{color:#D4D4D4}.ct-ea18e5{color:#9CDCFE}.ct-4699ee{color:#E6E6E6}.ct-57ba0f{color:#6A9955}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"couper","depth":2,"text":"couper"},{"id":"env","depth":2,"text":"env"},{"id":"request","depth":2,"text":"request"},{"id":"backends","depth":2,"text":"backends"},{"id":"backend_request","depth":2,"text":"backend_request"},{"id":"backend_requests","depth":2,"text":"backend_requests"},{"id":"backend_response","depth":2,"text":"backend_response"},{"id":"backend_responses","depth":2,"text":"backend_responses"},{"id":"path-parameter","depth":2,"text":"Path Parameter"}]}},"_type":"markdown","_id":"content:2.configuration:5.variables.md","_source":"content","_file":"2.configuration/5.variables.md","_extension":"md"}