{"_path":"/configuration/block/health","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Health","description":"Defines a recurring health check request for its backend. Results can be obtained via the backends.<label>.health variables.\nChanges in health states and related requests will be logged. Default User-Agent will be Couper / <version> health-check if not provided\nvia headers attribute. An unhealthy backend will return with a backend_unhealthy error.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"health"},"children":[{"type":"text","value":"Health"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Defines a recurring health check request for its backend. Results can be obtained via the "},{"type":"element","tag":"a","props":{"href":"/configuration/variables#backends"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backends.<label>.health"}]},{"type":"text","value":" variables"}]},{"type":"text","value":".\nChanges in health states and related requests will be logged. Default User-Agent will be "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Couper / <version> health-check"}]},{"type":"text","value":" if not provided\nvia "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"headers"}]},{"type":"text","value":" attribute. An unhealthy backend will return with a "},{"type":"element","tag":"a","props":{"href":"/configuration/error-handling#api-error-types"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_unhealthy"}]}]},{"type":"text","value":" error."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_health"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no label"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[200, 204, 301]\",\"description\":\"One of wanted response status codes.\",\"name\":\"expected_status\",\"type\":\"tuple (int)\"},{\"default\":\"\",\"description\":\"Text which the response body must contain.\",\"name\":\"expected_text\",\"type\":\"string\"},{\"default\":\"2\",\"description\":\"Failed checks needed to consider backend unhealthy.\",\"name\":\"failure_threshold\",\"type\":\"number\"},{\"default\":\"\",\"description\":\"Request HTTP header fields.\",\"name\":\"headers\",\"type\":\"object\"},{\"default\":\"\\\"1s\\\"\",\"description\":\"Time interval for recheck.\",\"name\":\"interval\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"URL path with query on backend host.\",\"name\":\"path\",\"type\":\"string\"},{\"default\":\"\\\"1s\\\"\",\"description\":\"Maximum allowed time limit which is\\tbounded by `interval`.\",\"name\":\"timeout\",\"type\":\"string\"}]"},"children":[]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"health"},"children":[{"type":"text","value":"Health"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Defines a recurring health check request for its backend. Results can be obtained via the "},{"type":"element","tag":"a","props":{"href":"/configuration/variables#backends"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backends.<label>.health"}]},{"type":"text","value":" variables"}]},{"type":"text","value":".\nChanges in health states and related requests will be logged. Default User-Agent will be "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Couper / <version> health-check"}]},{"type":"text","value":" if not provided\nvia "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"headers"}]},{"type":"text","value":" attribute. An unhealthy backend will return with a "},{"type":"element","tag":"a","props":{"href":"/configuration/error-handling#api-error-types"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend_unhealthy"}]}]},{"type":"text","value":" error."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_health"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no label"}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[200, 204, 301]\",\"description\":\"One of wanted response status codes.\",\"name\":\"expected_status\",\"type\":\"tuple (int)\"},{\"default\":\"\",\"description\":\"Text which the response body must contain.\",\"name\":\"expected_text\",\"type\":\"string\"},{\"default\":\"2\",\"description\":\"Failed checks needed to consider backend unhealthy.\",\"name\":\"failure_threshold\",\"type\":\"number\"},{\"default\":\"\",\"description\":\"Request HTTP header fields.\",\"name\":\"headers\",\"type\":\"object\"},{\"default\":\"\\\"1s\\\"\",\"description\":\"Time interval for recheck.\",\"name\":\"interval\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"URL path with query on backend host.\",\"name\":\"path\",\"type\":\"string\"},{\"default\":\"\\\"1s\\\"\",\"description\":\"Maximum allowed time limit which is\\tbounded by `interval`.\",\"name\":\"timeout\",\"type\":\"string\"}]"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:health.md","_source":"content","_file":"2.configuration/4.block/health.md","_extension":"md"}