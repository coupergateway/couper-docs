{"_path":"/configuration/block/saml","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"SAML","description":"The saml block lets you configure the saml_sso_url() function and an access\ncontrol for a SAML Assertion Consumer Service (ACS) endpoint.\nLike all access control types, the saml block is defined in\nthe definitions block and can be referenced in all configuration blocks by its\nrequired label.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"saml"},"children":[{"type":"text","value":"SAML"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" block lets you configure the "},{"type":"element","tag":"a","props":{"href":"/configuration/functions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml_sso_url()"}]},{"type":"text","value":" function"}]},{"type":"text","value":" and an access\ncontrol for a SAML Assertion Consumer Service (ACS) endpoint.\nLike all "},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" block is defined in\nthe "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block"}]},{"type":"text","value":" and can be referenced in all configuration blocks by its\nrequired "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A complete example can be found "},{"type":"element","tag":"a","props":{"href":"https://github.com/avenga/couper-examples/tree/master/saml","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"saml \"SSO\" {\n  idp_metadata_file = \"idp-metadata.xml\"\n  sp_entity_id = env.SP_ENTITY_ID\n  sp_acs_url = \"http://localhost:8080/saml/acs\"\n  array_attributes = [\"eduPersonAffiliation\"] # or [\"memberOf\"]\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"saml \"SSO\" {\n  idp_metadata_file = \"idp-metadata.xml\"\n  sp_entity_id = env.SP_ENTITY_ID\n  sp_acs_url = \"http://localhost:8080/saml/acs\"\n  array_attributes = [\"eduPersonAffiliation\"] # or [\"memberOf\"]\n}\n"}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[]\",\"description\":\"A list of assertion attributes that may have several values. Results in at least an empty array in `request.context.<label>.attributes.<name>`\",\"name\":\"array_attributes\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"File reference to the Identity Provider metadata XML file.\",\"name\":\"idp_metadata_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The URL of the Service Provider's ACS endpoint. Relative URL references are resolved against the origin of the current request URL. The origin can be changed with the [`accept_forwarded_url` attribute](/configuration/block/settings) if Couper is running behind a proxy.\",\"name\":\"sp_acs_url\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The Service Provider's entity ID.\",\"name\":\"sp_entity_id\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Some information from the assertion consumed at the ACS endpoint is provided in the context at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>"}]},{"type":"text","value":":"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NameID"}]},{"type":"text","value":" of the assertion's "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Subject"}]},{"type":"text","value":" ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.sub"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the session expiry date "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SessionNotOnOrAfter"}]},{"type":"text","value":" (as UNIX timestamp: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.exp"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the attributes ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.attributes.<name>"}]},{"type":"text","value":")"}]}]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures an [error handler](/configuration/block/error_handler) (zero or more).\",\"name\":\"error_handler\"}]"},"children":[]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"saml"},"children":[{"type":"text","value":"SAML"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" block lets you configure the "},{"type":"element","tag":"a","props":{"href":"/configuration/functions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml_sso_url()"}]},{"type":"text","value":" function"}]},{"type":"text","value":" and an access\ncontrol for a SAML Assertion Consumer Service (ACS) endpoint.\nLike all "},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" block is defined in\nthe "},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block"}]},{"type":"text","value":" and can be referenced in all configuration blocks by its\nrequired "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A complete example can be found "},{"type":"element","tag":"a","props":{"href":"https://github.com/avenga/couper-examples/tree/master/saml","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"saml \"SSO\" {\n  idp_metadata_file = \"idp-metadata.xml\"\n  sp_entity_id = env.SP_ENTITY_ID\n  sp_acs_url = \"http://localhost:8080/saml/acs\"\n  array_attributes = [\"eduPersonAffiliation\"] # or [\"memberOf\"]\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4a57bc"},"children":[{"type":"text","value":"saml"}]},{"type":"element","tag":"span","props":{"class":"ct-ad409d"},"children":[{"type":"text","value":" \"SSO\""}]},{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4a57bc"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9f9cd6"},"children":[{"type":"text","value":"idp_metadata_file"}]},{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e66a9a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ad409d"},"children":[{"type":"text","value":"\"idp-metadata.xml\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9f9cd6"},"children":[{"type":"text","value":"sp_entity_id"}]},{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e66a9a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4a57bc"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-e66a9a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9f9cd6"},"children":[{"type":"text","value":"SP_ENTITY_ID"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9f9cd6"},"children":[{"type":"text","value":"sp_acs_url"}]},{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e66a9a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ad409d"},"children":[{"type":"text","value":"\"http://localhost:8080/saml/acs\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9f9cd6"},"children":[{"type":"text","value":"array_attributes"}]},{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e66a9a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-ad409d"},"children":[{"type":"text","value":"\"eduPersonAffiliation\""}]},{"type":"element","tag":"span","props":{"class":"ct-140b87"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-0acfe8"},"children":[{"type":"text","value":"# or [\"memberOf\"]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4a57bc"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"[]\",\"description\":\"A list of assertion attributes that may have several values. Results in at least an empty array in `request.context.<label>.attributes.<name>`\",\"name\":\"array_attributes\",\"type\":\"tuple (string)\"},{\"default\":\"\",\"description\":\"Log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"File reference to the Identity Provider metadata XML file.\",\"name\":\"idp_metadata_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The URL of the Service Provider's ACS endpoint. Relative URL references are resolved against the origin of the current request URL. The origin can be changed with the [`accept_forwarded_url` attribute](/configuration/block/settings) if Couper is running behind a proxy.\",\"name\":\"sp_acs_url\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The Service Provider's entity ID.\",\"name\":\"sp_entity_id\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Some information from the assertion consumed at the ACS endpoint is provided in the context at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>"}]},{"type":"text","value":":"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NameID"}]},{"type":"text","value":" of the assertion's "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Subject"}]},{"type":"text","value":" ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.sub"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the session expiry date "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SessionNotOnOrAfter"}]},{"type":"text","value":" (as UNIX timestamp: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.exp"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the attributes ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.attributes.<name>"}]},{"type":"text","value":")"}]}]},{"type":"element","tag":"blocks","props":{":values":"[{\"description\":\"Configures an [error handler](/configuration/block/error_handler) (zero or more).\",\"name\":\"error_handler\"}]"},"children":[]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-0acfe8{color:#6A9955}.ct-e66a9a{color:#D4D4D4}.ct-9f9cd6{color:#9CDCFE}.ct-140b87{color:#E6E6E6}.ct-ad409d{color:#CE9178}.ct-4a57bc{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example","depth":2,"text":"Example"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:saml.md","_source":"content","_file":"2.configuration/4.block/saml.md","_extension":"md"}