[{"_path":"/configuration/block/saml","_draft":false,"_partial":false,"_empty":false,"title":"SAML","description":"The saml block lets you configure the saml_sso_url() function and an access\ncontrol for a SAML Assertion Consumer Service (ACS) endpoint.\nLike all access control types, the saml block is defined in\nthe definitions block and can be referenced in all configuration blocks by its\nrequired label.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"saml"},"children":[{"type":"text","value":"SAML"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" block lets you configure the "},{"type":"element","tag":"a","props":{"href":"../functions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml_sso_url()"}]},{"type":"text","value":" function"}]},{"type":"text","value":" and an access\ncontrol for a SAML Assertion Consumer Service (ACS) endpoint.\nLike all "},{"type":"element","tag":"a","props":{"href":"../access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml"}]},{"type":"text","value":" block is defined in\nthe "},{"type":"element","tag":"a","props":{"href":"definitions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block"}]},{"type":"text","value":" and can be referenced in all configuration blocks by its\nrequired "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"saml"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"error_handler"},"children":[{"type":"text","value":"Error Handler Block"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A complete example can be found "},{"type":"element","tag":"a","props":{"href":"https://github.com/avenga/couper-examples/tree/master/saml","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"saml \"SSO\" {\n  idp_metadata_file = \"idp-metadata.xml\"\n  sp_entity_id = env.SP_ENTITY_ID\n  sp_acs_url = \"http://localhost:8080/saml/acs\"\n  array_attributes = [\"eduPersonAffiliation\"] # or [\"memberOf\"]\n}\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"saml \"SSO\" {\n  idp_metadata_file = \"idp-metadata.xml\"\n  sp_entity_id = env.SP_ENTITY_ID\n  sp_acs_url = \"http://localhost:8080/saml/acs\"\n  array_attributes = [\"eduPersonAffiliation\"] # or [\"memberOf\"]\n}\n"}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"name\":\"array_attributes\",\"type\":\"tuple (string)\",\"default\":\"[]\",\"description\":\"A list of assertion attributes that may have several values. Results in at least an empty array in `request.context.<label>.attributes.<name>`\"},{\"name\":\"custom_log_fields\",\"type\":\"object\",\"default\":\"\",\"description\":\"log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\"},{\"name\":\"idp_metadata_file\",\"type\":\"string\",\"default\":\"\",\"description\":\"File reference to the Identity Provider metadata XML file.\"},{\"name\":\"sp_acs_url\",\"type\":\"string\",\"default\":\"\",\"description\":\"The URL of the Service Provider's ACS endpoint. Relative URL references are resolved against the origin of the current request URL. The origin can be changed with the `accept_forwarded_url`([settings](settings)) attribute if Couper is running behind a proxy.\"},{\"name\":\"sp_entity_id\",\"type\":\"string\",\"default\":\"\",\"description\":\"The Service Provider's entity ID.\"}]"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Some information from the assertion consumed at the ACS endpoint is provided in the context at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>"}]},{"type":"text","value":":"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NameID"}]},{"type":"text","value":" of the assertion's "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Subject"}]},{"type":"text","value":" ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.sub"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the session expiry date "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SessionNotOnOrAfter"}]},{"type":"text","value":" (as UNIX timestamp: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.exp"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the attributes ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.attributes.<name>"}]},{"type":"text","value":")"}]}]}]},"_type":"markdown","_id":"content:2.configuration:4.block:saml.md","_source":"content","_file":"2.configuration/4.block/saml.md","_extension":"md"},{"_path":"/configuration/block/settings","_draft":false,"_partial":false,"_empty":false,"title":"Settings","description":"The settings block lets you configure the more basic and global behavior of your\ngateway instance.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"settings"},"children":[{"type":"text","value":"Settings"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" block lets you configure the more basic and global behavior of your\ngateway instance."}]},{"type":"element","tag":"attributes","props":{":values":"[{\"name\":\"accept_forwarded_url\",\"type\":\"tuple (string)\",\"default\":\"[]\",\"description\":\"Which `X-Forwarded-*` request headers should be accepted to change the [request variables](../variables#request) `url`, `origin`, `protocol`, `host`, `port`. Valid values: `\\\"proto\\\"`, `\\\"host\\\"` and `\\\"port\\\"`. The port in a `X-Forwarded-Port` header takes precedence over a port in `X-Forwarded-Host`. Affects relative URL values for [`sp_acs_url`](saml) attribute and `redirect_uri` attribute within [`beta_oauth2`](oauth2) and [`oidc`](oidc).\"},{\"name\":\"beta_metrics\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"enables the Prometheus [metrics](/observation/metrics) exporter\"},{\"name\":\"beta_metrics_port\",\"type\":\"number\",\"default\":\"9090\",\"description\":\"Prometheus exporter listen port\"},{\"name\":\"beta_service_name\",\"type\":\"string\",\"default\":\"\\\"couper\\\"\",\"description\":\"service name which applies to the `service_name` metric labels\"},{\"name\":\"ca_file\",\"type\":\"string\",\"default\":\"\",\"description\":\"adds the given PEM encoded CA certificate to the existing system certificate pool for all outgoing connections\"},{\"name\":\"default_port\",\"type\":\"number\",\"default\":\"8080\",\"description\":\"Port which will be used if not explicitly specified per host within the [`hosts`](server) attribute.\"},{\"name\":\"environment\",\"type\":\"string\",\"default\":\"\",\"description\":\"[environment](../command-line#global-options) Couper is to run in\"},{\"name\":\"health_path\",\"type\":\"string\",\"default\":\"\\\"/healthz\\\"\",\"description\":\"Health path for all configured servers and ports\"},{\"name\":\"https_dev_proxy\",\"type\":\"object\",\"default\":\"\",\"description\":\"TLS port mappings to define the TLS listen port and the target one. Self-signed certificates will be generated on the fly based on the given hostname. Certificates will be held in memory.\"},{\"name\":\"log_format\",\"type\":\"string\",\"default\":\"\\\"common\\\"\",\"description\":\"tab/field based colored logs or JSON logs: `\\\"common\\\"` or `\\\"json\\\"`\"},{\"name\":\"log_level\",\"type\":\"string\",\"default\":\"\\\"info\\\"\",\"description\":\"sets the log level: `\\\"panic\\\"`, `\\\"fatal\\\"`, `\\\"error\\\"`, `\\\"warn\\\"`, `\\\"info\\\"`, `\\\"debug\\\"`, `\\\"trace\\\"`\"},{\"name\":\"log_pretty\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"global option for `json` log format which pretty prints with basic key coloring\"},{\"name\":\"no_proxy_from_env\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"disables the connect hop to configured [proxy via environment](https://godoc.org/golang.org/x/net/http/httpproxy)\"},{\"name\":\"request_id_accept_from_header\",\"type\":\"string\",\"default\":\"\",\"description\":\"client request HTTP header field that transports the `request.id` which Couper takes for logging and transport to the backend (if configured)\"},{\"name\":\"request_id_backend_header\",\"type\":\"string\",\"default\":\"\\\"Couper-Request-ID\\\"\",\"description\":\"HTTP header field which Couper uses to transport the `request.id` to the backend\"},{\"name\":\"request_id_client_header\",\"type\":\"string\",\"default\":\"\\\"Couper-Request-ID\\\"\",\"description\":\"HTTP header field which Couper uses to transport the `request.id` to the client\"},{\"name\":\"request_id_format\",\"type\":\"string\",\"default\":\"\\\"common\\\"\",\"description\":\"`\\\"common\\\"` or `\\\"uuid4\\\"`. If set to `\\\"uuid4\\\"` an RFC 4122 UUID is used for `request.id` and related log fields. \"},{\"name\":\"secure_cookies\",\"type\":\"string\",\"default\":\"\\\"‌\\\"\",\"description\":\"`\\\"\\\"` or `\\\"strip\\\"`. If set to `\\\"strip\\\"`, the `Secure` flag is removed from all `Set-Cookie` HTTP header fields.\"},{\"name\":\"xfh\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"whether to use the `X-Forwarded-Host` header as the request host\"}]"},"children":[]}]},"_type":"markdown","_id":"content:2.configuration:4.block:settings.md","_source":"content","_file":"2.configuration/4.block/settings.md","_extension":"md"}]