[{"_path":"/configuration/block/backend_tls","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"TLS (Backend)","description":"TLS settings for the related backend.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"tls-backend"},"children":[{"type":"text","value":"TLS (Backend)"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper has a command-line argument to add a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ca-file"}]},{"type":"text","value":" to the backend CA-Pool for all backends.\nHowever, this "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls"}]},{"type":"text","value":" block allows a more specific pool configuration per backend if the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server_ca_certificate"}]},{"type":"text","value":" or\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server_ca_certificate_file"}]},{"type":"text","value":" is provided."}]},{"type":"element","tag":"h3","props":{"id":"mtls"},"children":[{"type":"text","value":"mTLS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Additionally the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_certificate"}]},{"type":"text","value":"(or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_certificate_file"}]},{"type":"text","value":") and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_private_key"}]},{"type":"text","value":" (or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_private_key_file"}]},{"type":"text","value":")\nattributes allow the backend to present certificate and key during a TLS handshake to an origin which requires them due to an mTLS setup."}]},{"type":"element","tag":"h4","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"backend \"secured\" {\n    origin = \"https://localhost\"\n\n    tls {\n      server_ca_certificate_file = \"rootCA.crt\"\n      # optional\n      client_certificate_file = \"client.crt\"\n      client_private_key_file = \"client.key\"\n    }\n  }\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"backend \"secured\" {\n    origin = \"https://localhost\"\n\n    tls {\n      server_ca_certificate_file = \"rootCA.crt\"\n      # optional\n      client_certificate_file = \"client.crt\"\n      client_private_key_file = \"client.key\"\n    }\n  }\n"}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Public part of the client certificate in DER or PEM format. Mutually exclusive with `client_certificate_file`.\",\"name\":\"client_certificate\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the client certificate file in DER or PEM format. Mutually exclusive with `client_certificate`.\",\"name\":\"client_certificate_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Private part of the client certificate in DER or PEM format. Required to complete an mTLS handshake. Mutually exclusive with `client_private_key_file`.\",\"name\":\"client_private_key\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the private part of the client certificate file in DER or PEM format. Required to complete an mTLS handshake. Mutually exclusive with `client_private_key`.\",\"name\":\"client_private_key_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Public part of the certificate authority in DER or PEM format. Mutually exclusive with `server_ca_certificate_file`.\",\"name\":\"server_ca_certificate\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the certificate authority file in DER or PEM format. Mutually exclusive with `server_ca_certificate`.\",\"name\":\"server_ca_certificate_file\",\"type\":\"string\"}]"},"children":[]}]},"draft":false,"_type":"markdown","_id":"content:2.configuration:4.block:backend_tls.md","_source":"content","_file":"2.configuration/4.block/backend_tls.md","_extension":"md"},{"_path":"/configuration/block/basic_auth","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Basic Auth","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"basic-auth"},"children":[{"type":"text","value":"Basic Auth"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basic_auth"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"required"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/error_handler"},"children":[{"type":"text","value":"Error Handler Block(s)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The  "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basic_auth"}]},{"type":"text","value":" block lets you configure basic auth for your gateway. Like all\n"},{"type":"element","tag":"a","props":{"href":"/configuration/access-control"},"children":[{"type":"text","value":"access control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basic_auth"}]},{"type":"text","value":" block is defined in the\n"},{"type":"element","tag":"a","props":{"href":"/configuration/block/definitions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block"}]},{"type":"text","value":" and can be referenced in all configuration\nblocks by its required "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If both "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"user"}]},{"type":"text","value":"/"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"password"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"htpasswd_file"}]},{"type":"text","value":" are configured, the incoming\ncredentials from the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Authorization"}]},{"type":"text","value":" request HTTP header field are checked against\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"user"}]},{"type":"text","value":"/"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"password"}]},{"type":"text","value":" if the user matches, and against the data in the file referenced\nby "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"htpasswd_file"}]},{"type":"text","value":" otherwise."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"user"}]},{"type":"text","value":" is accessible via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request.context.<label>.user"}]},{"type":"text","value":" variable for successfully authenticated requests."}]},{"type":"element","tag":"h3","props":{"id":"htpasswd_file"},"children":[{"type":"text","value":"htpasswd_file"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper uses "},{"type":"element","tag":"a","props":{"href":"https://httpd.apache.org/docs/current/programs/htpasswd.html","rel":["nofollow"]},"children":[{"type":"text","value":"Apache's httpasswd"}]},{"type":"text","value":" file format. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"apr1"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"md5"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bcrypt"}]},{"type":"text","value":" password encryption are supported. The file is loaded once at startup. Restart Couper after you have changed it."}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\",\"name\":\"custom_log_fields\",\"type\":\"object\"},{\"default\":\"\",\"description\":\"The htpasswd file.\",\"name\":\"htpasswd_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The corresponding password.\",\"name\":\"password\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The realm to be sent in a WWW-Authenticate response HTTP header field.\",\"name\":\"realm\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"The user name.\",\"name\":\"user\",\"type\":\"string\"}]"},"children":[]}]},"_type":"markdown","_id":"content:2.configuration:4.block:basic_auth.md","_source":"content","_file":"2.configuration/4.block/basic_auth.md","_extension":"md"}]