{"_path":"/configuration/block/backend_tls","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"TLS (Backend)","description":"TLS settings for the related backend.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"tls-backend"},"children":[{"type":"text","value":"TLS (Backend)"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper has a command-line argument to add a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ca-file"}]},{"type":"text","value":" to the backend CA-Pool for all backends.\nHowever, this "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls"}]},{"type":"text","value":" block allows a more specific pool configuration per backend if the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server_ca_certificate"}]},{"type":"text","value":" or\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server_ca_certificate_file"}]},{"type":"text","value":" is provided."}]},{"type":"element","tag":"h3","props":{"id":"mtls"},"children":[{"type":"text","value":"mTLS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Additionally the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_certificate"}]},{"type":"text","value":"(or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_certificate_file"}]},{"type":"text","value":") and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_private_key"}]},{"type":"text","value":" (or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_private_key_file"}]},{"type":"text","value":")\nattributes allow the backend to present certificate and key during a TLS handshake to an origin which requires them due to an mTLS setup."}]},{"type":"element","tag":"h4","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"backend \"secured\" {\n    origin = \"https://localhost\"\n\n    tls {\n      server_ca_certificate_file = \"rootCA.crt\"\n      # optional\n      client_certificate_file = \"client.crt\"\n      client_private_key_file = \"client.key\"\n    }\n  }\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"backend \"secured\" {\n    origin = \"https://localhost\"\n\n    tls {\n      server_ca_certificate_file = \"rootCA.crt\"\n      # optional\n      client_certificate_file = \"client.crt\"\n      client_private_key_file = \"client.key\"\n    }\n  }\n"}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Public part of the client certificate in DER or PEM format. Mutually exclusive with `client_certificate_file`.\",\"name\":\"client_certificate\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the client certificate file in DER or PEM format. Mutually exclusive with `client_certificate`.\",\"name\":\"client_certificate_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Private part of the client certificate in DER or PEM format. Required to complete an mTLS handshake. Mutually exclusive with `client_private_key_file`.\",\"name\":\"client_private_key\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the private part of the client certificate file in DER or PEM format. Required to complete an mTLS handshake. Mutually exclusive with `client_private_key`.\",\"name\":\"client_private_key_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Public part of the certificate authority in DER or PEM format. Mutually exclusive with `server_ca_certificate_file`.\",\"name\":\"server_ca_certificate\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the certificate authority file in DER or PEM format. Mutually exclusive with `server_ca_certificate`.\",\"name\":\"server_ca_certificate_file\",\"type\":\"string\"}]"},"children":[]}]},"draft":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"tls-backend"},"children":[{"type":"text","value":"TLS (Backend)"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"/configuration/block/backend"},"children":[{"type":"text","value":"Backend Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"no"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper has a command-line argument to add a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ca-file"}]},{"type":"text","value":" to the backend CA-Pool for all backends.\nHowever, this "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tls"}]},{"type":"text","value":" block allows a more specific pool configuration per backend if the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server_ca_certificate"}]},{"type":"text","value":" or\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server_ca_certificate_file"}]},{"type":"text","value":" is provided."}]},{"type":"element","tag":"h3","props":{"id":"mtls"},"children":[{"type":"text","value":"mTLS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Additionally the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_certificate"}]},{"type":"text","value":"(or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_certificate_file"}]},{"type":"text","value":") and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_private_key"}]},{"type":"text","value":" (or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_private_key_file"}]},{"type":"text","value":")\nattributes allow the backend to present certificate and key during a TLS handshake to an origin which requires them due to an mTLS setup."}]},{"type":"element","tag":"h4","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"backend \"secured\" {\n    origin = \"https://localhost\"\n\n    tls {\n      server_ca_certificate_file = \"rootCA.crt\"\n      # optional\n      client_certificate_file = \"client.crt\"\n      client_private_key_file = \"client.key\"\n    }\n  }\n","language":"hcl"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-059fcc"},"children":[{"type":"text","value":"backend"}]},{"type":"element","tag":"span","props":{"class":"ct-6be1ed"},"children":[{"type":"text","value":" \"secured\""}]},{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-059fcc"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-388c62"},"children":[{"type":"text","value":"origin"}]},{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-754852"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6be1ed"},"children":[{"type":"text","value":"\"https://localhost\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-059fcc"},"children":[{"type":"text","value":"tls"}]},{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-059fcc"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-388c62"},"children":[{"type":"text","value":"server_ca_certificate_file"}]},{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-754852"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6be1ed"},"children":[{"type":"text","value":"\"rootCA.crt\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-22cafa"},"children":[{"type":"text","value":"# optional"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-388c62"},"children":[{"type":"text","value":"client_certificate_file"}]},{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-754852"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6be1ed"},"children":[{"type":"text","value":"\"client.crt\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-388c62"},"children":[{"type":"text","value":"client_private_key_file"}]},{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-754852"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6be1ed"},"children":[{"type":"text","value":"\"client.key\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-059fcc"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1a9612"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-059fcc"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"default\":\"\",\"description\":\"Public part of the client certificate in DER or PEM format. Mutually exclusive with `client_certificate_file`.\",\"name\":\"client_certificate\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the client certificate file in DER or PEM format. Mutually exclusive with `client_certificate`.\",\"name\":\"client_certificate_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Private part of the client certificate in DER or PEM format. Required to complete an mTLS handshake. Mutually exclusive with `client_private_key_file`.\",\"name\":\"client_private_key\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the private part of the client certificate file in DER or PEM format. Required to complete an mTLS handshake. Mutually exclusive with `client_private_key`.\",\"name\":\"client_private_key_file\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Public part of the certificate authority in DER or PEM format. Mutually exclusive with `server_ca_certificate_file`.\",\"name\":\"server_ca_certificate\",\"type\":\"string\"},{\"default\":\"\",\"description\":\"Reference to a file containing the public part of the certificate authority file in DER or PEM format. Mutually exclusive with `server_ca_certificate`.\",\"name\":\"server_ca_certificate_file\",\"type\":\"string\"}]"},"children":[]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-22cafa{color:#6A9955}.ct-754852{color:#D4D4D4}.ct-388c62{color:#9CDCFE}.ct-1a9612{color:#E6E6E6}.ct-6be1ed{color:#CE9178}.ct-059fcc{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"mtls","depth":3,"text":"mTLS"}]}},"_type":"markdown","_id":"content:2.configuration:4.block:backend_tls.md","_source":"content","_file":"2.configuration/4.block/backend_tls.md","_extension":"md"}