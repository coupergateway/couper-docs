{"_path":"/configuration/block/backend","_draft":false,"_partial":false,"_empty":false,"title":"Backend","description":"The backend defines the connection pool with given origin for outgoing connections.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"backend"},"children":[{"type":"text","value":"Backend"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block defines the connection to a local/remote backend service."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Backends can be defined in the "},{"type":"element","tag":"a","props":{"href":"definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":" and referenced by "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"request"},"children":[{"type":"text","value":"Request Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"oauth2req_auth"},"children":[{"type":"text","value":"OAuth2 CC Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"jwt"},"children":[{"type":"text","value":"JWT Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"oauth2"},"children":[{"type":"text","value":"OAuth2 AC Block (beta)"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"oidc"},"children":[{"type":"text","value":"OIDC Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, when defined in "},{"type":"element","tag":"a","props":{"href":"definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"openapi"},"children":[{"type":"text","value":"OpenAPI Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"oauth2req_auth"},"children":[{"type":"text","value":"OAuth2 CC Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"health"},"children":[{"type":"text","value":"Health Block"}]}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"name\":\"add_form_params\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to add form parameters to the upstream request body\"},{\"name\":\"add_query_params\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to add query parameters to the upstream request URL\"},{\"name\":\"add_request_headers\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to add as request headers in the upstream request\"},{\"name\":\"add_response_headers\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to add as response headers in the client response\"},{\"name\":\"basic_auth\",\"type\":\"string\",\"default\":\"\",\"description\":\"Basic auth for the upstream request with format user:pass .\"},{\"name\":\"connect_timeout\",\"type\":\"duration\",\"default\":\"\\\"10s\\\"\",\"description\":\"The total timeout for dialing and connect to the origin.\"},{\"name\":\"custom_log_fields\",\"type\":\"object\",\"default\":\"\",\"description\":\"log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\"},{\"name\":\"disable_certificate_validation\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"Disables the peer certificate validation.\"},{\"name\":\"disable_connection_reuse\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"Disables reusage of connections to the origin.\"},{\"name\":\"hostname\",\"type\":\"string\",\"default\":\"\",\"description\":\"Value of the HTTP host header field for the origin request. Since hostname replaces the request host the value will also be used for a server identity check during a TLS handshake with the origin.\"},{\"name\":\"http2\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"Enables the HTTP2 support.\"},{\"name\":\"max_connections\",\"type\":\"number\",\"default\":\"0\",\"description\":\"The maximum number of concurrent connections in any state (_active_ or _idle_) to the origin.\"},{\"name\":\"origin\",\"type\":\"string\",\"default\":\"\",\"description\":\"URL to connect to for backend requests.\"},{\"name\":\"path\",\"type\":\"string\",\"default\":\"\",\"description\":\"Changeable part of upstream URL.\"},{\"name\":\"path_prefix\",\"type\":\"string\",\"default\":\"\",\"description\":\"Prefixes all backend request paths with the given prefix\"},{\"name\":\"proxy\",\"type\":\"string\",\"default\":\"\",\"description\":\"A proxy URL for the related origin request.\"},{\"name\":\"remove_form_params\",\"type\":\"object\",\"default\":\"\",\"description\":\"list of names to remove form parameters from the upstream request body\"},{\"name\":\"remove_query_params\",\"type\":\"tuple (string)\",\"default\":\"[]\",\"description\":\"list of names to remove query parameters from the upstream request URL\"},{\"name\":\"remove_request_headers\",\"type\":\"tuple (string)\",\"default\":\"[]\",\"description\":\"list of names to remove headers from the upstream request\"},{\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\",\"default\":\"[]\",\"description\":\"list of names to remove headers from the client response\"},{\"name\":\"set_form_params\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to set query parameters in the upstream request URL\"},{\"name\":\"set_query_params\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to set query parameters in the upstream request URL\"},{\"name\":\"set_request_headers\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to set as request headers in the upstream request\"},{\"name\":\"set_response_headers\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to set as response headers in the client response\"},{\"name\":\"set_response_status\",\"type\":\"number\",\"default\":\"\",\"description\":\"Modifies the response status code.\"},{\"name\":\"timeout\",\"type\":\"duration\",\"default\":\"\\\"300s\\\"\",\"description\":\"The total deadline duration a backend request has for write and read/pipe.\"},{\"name\":\"ttfb_timeout\",\"type\":\"duration\",\"default\":\"\\\"60s\\\"\",\"description\":\"The duration from writing the full request to the origin and receiving the answer.\"},{\"name\":\"use_when_unhealthy\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"Ignores the health state and continues with the outgoing request\"}]"},"children":[]},{"type":"element","tag":"duration","props":{},"children":[]}]},"draft":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"backend"},"children":[{"type":"text","value":"Backend"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block defines the connection to a local/remote backend service."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Backends can be defined in the "},{"type":"element","tag":"a","props":{"href":"definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":" and referenced by "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"definitions"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"proxy"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"request"},"children":[{"type":"text","value":"Request Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"oauth2req_auth"},"children":[{"type":"text","value":"OAuth2 CC Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"jwt"},"children":[{"type":"text","value":"JWT Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"oauth2"},"children":[{"type":"text","value":"OAuth2 AC Block (beta)"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"oidc"},"children":[{"type":"text","value":"OIDC Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, when defined in "},{"type":"element","tag":"a","props":{"href":"definitions"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"openapi"},"children":[{"type":"text","value":"OpenAPI Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"oauth2req_auth"},"children":[{"type":"text","value":"OAuth2 CC Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"health"},"children":[{"type":"text","value":"Health Block"}]}]}]}]}]},{"type":"element","tag":"attributes","props":{":values":"[{\"name\":\"add_form_params\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to add form parameters to the upstream request body\"},{\"name\":\"add_query_params\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to add query parameters to the upstream request URL\"},{\"name\":\"add_request_headers\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to add as request headers in the upstream request\"},{\"name\":\"add_response_headers\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to add as response headers in the client response\"},{\"name\":\"basic_auth\",\"type\":\"string\",\"default\":\"\",\"description\":\"Basic auth for the upstream request with format user:pass .\"},{\"name\":\"connect_timeout\",\"type\":\"duration\",\"default\":\"\\\"10s\\\"\",\"description\":\"The total timeout for dialing and connect to the origin.\"},{\"name\":\"custom_log_fields\",\"type\":\"object\",\"default\":\"\",\"description\":\"log fields for [custom logging](/observation/logging#custom-logging). Inherited by nested blocks.\"},{\"name\":\"disable_certificate_validation\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"Disables the peer certificate validation.\"},{\"name\":\"disable_connection_reuse\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"Disables reusage of connections to the origin.\"},{\"name\":\"hostname\",\"type\":\"string\",\"default\":\"\",\"description\":\"Value of the HTTP host header field for the origin request. Since hostname replaces the request host the value will also be used for a server identity check during a TLS handshake with the origin.\"},{\"name\":\"http2\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"Enables the HTTP2 support.\"},{\"name\":\"max_connections\",\"type\":\"number\",\"default\":\"0\",\"description\":\"The maximum number of concurrent connections in any state (_active_ or _idle_) to the origin.\"},{\"name\":\"origin\",\"type\":\"string\",\"default\":\"\",\"description\":\"URL to connect to for backend requests.\"},{\"name\":\"path\",\"type\":\"string\",\"default\":\"\",\"description\":\"Changeable part of upstream URL.\"},{\"name\":\"path_prefix\",\"type\":\"string\",\"default\":\"\",\"description\":\"Prefixes all backend request paths with the given prefix\"},{\"name\":\"proxy\",\"type\":\"string\",\"default\":\"\",\"description\":\"A proxy URL for the related origin request.\"},{\"name\":\"remove_form_params\",\"type\":\"object\",\"default\":\"\",\"description\":\"list of names to remove form parameters from the upstream request body\"},{\"name\":\"remove_query_params\",\"type\":\"tuple (string)\",\"default\":\"[]\",\"description\":\"list of names to remove query parameters from the upstream request URL\"},{\"name\":\"remove_request_headers\",\"type\":\"tuple (string)\",\"default\":\"[]\",\"description\":\"list of names to remove headers from the upstream request\"},{\"name\":\"remove_response_headers\",\"type\":\"tuple (string)\",\"default\":\"[]\",\"description\":\"list of names to remove headers from the client response\"},{\"name\":\"set_form_params\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to set query parameters in the upstream request URL\"},{\"name\":\"set_query_params\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to set query parameters in the upstream request URL\"},{\"name\":\"set_request_headers\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to set as request headers in the upstream request\"},{\"name\":\"set_response_headers\",\"type\":\"object\",\"default\":\"\",\"description\":\"key/value pairs to set as response headers in the client response\"},{\"name\":\"set_response_status\",\"type\":\"number\",\"default\":\"\",\"description\":\"Modifies the response status code.\"},{\"name\":\"timeout\",\"type\":\"duration\",\"default\":\"\\\"300s\\\"\",\"description\":\"The total deadline duration a backend request has for write and read/pipe.\"},{\"name\":\"ttfb_timeout\",\"type\":\"duration\",\"default\":\"\\\"60s\\\"\",\"description\":\"The duration from writing the full request to the origin and receiving the answer.\"},{\"name\":\"use_when_unhealthy\",\"type\":\"bool\",\"default\":\"false\",\"description\":\"Ignores the health state and continues with the outgoing request\"}]"},"children":[]},{"type":"element","tag":"duration","props":{},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.configuration:4.block:backend.md","_source":"content","_file":"2.configuration/4.block/backend.md","_extension":"md"}