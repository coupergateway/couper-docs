[{"data":1,"prerenderedAt":616},["Reactive",2],{"content-query-6zTuJtrUKk":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"body":10,"_type":611,"_id":612,"_source":613,"_file":614,"_extension":615},"/configuration/block/environment","block",false,"","Environment","The environment block lets you refine the Couper configuration based on the set\nenvironment.",{"type":11,"children":12,"toc":608},"root",[13,21,43,45,110,139,171,178,196,463,468,602],{"type":14,"tag":15,"props":16,"children":18},"element","h1",{"id":17},"environment",[19],{"type":20,"value":8},"text",{"type":14,"tag":22,"props":23,"children":24},"p",{},[25,27,33,35,41],{"type":20,"value":26},"The ",{"type":14,"tag":28,"props":29,"children":31},"code",{"className":30},[],[32],{"type":20,"value":17},{"type":20,"value":34}," block lets you refine the Couper configuration based on the set\n",{"type":14,"tag":36,"props":37,"children":39},"a",{"href":38},"/configuration/command-line#basic-options",[40],{"type":20,"value":17},{"type":20,"value":42},".",{"type":20,"value":44},"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",{"type":14,"tag":46,"props":47,"children":48},"table",{},[49,79],{"type":14,"tag":50,"props":51,"children":52},"thead",{},[53],{"type":14,"tag":54,"props":55,"children":56},"tr",{},[57,64,69,74],{"type":14,"tag":58,"props":59,"children":61},"th",{"align":60},"left",[62],{"type":20,"value":63},"Block name",{"type":14,"tag":58,"props":65,"children":66},{"align":60},[67],{"type":20,"value":68},"Context",{"type":14,"tag":58,"props":70,"children":71},{"align":60},[72],{"type":20,"value":73},"Label",{"type":14,"tag":58,"props":75,"children":76},{"align":60},[77],{"type":20,"value":78},"Nested block(s)",{"type":14,"tag":80,"props":81,"children":82},"tbody",{},[83],{"type":14,"tag":54,"props":84,"children":85},{},[86,95,100,105],{"type":14,"tag":87,"props":88,"children":89},"td",{"align":60},[90],{"type":14,"tag":28,"props":91,"children":93},{"className":92},[],[94],{"type":20,"value":17},{"type":14,"tag":87,"props":96,"children":97},{"align":60},[98],{"type":20,"value":99},"Overall.",{"type":14,"tag":87,"props":101,"children":102},{"align":60},[103],{"type":20,"value":104},"âš  required, multiple labels are supported.",{"type":14,"tag":87,"props":106,"children":107},{"align":60},[108],{"type":20,"value":109},"All configuration blocks of Couper.",{"type":14,"tag":22,"props":111,"children":112},{},[113,114,119,121,126,128,137],{"type":20,"value":26},{"type":14,"tag":28,"props":115,"children":117},{"className":116},[],[118],{"type":20,"value":17},{"type":20,"value":120}," block works like a preprocessor. If the label of an ",{"type":14,"tag":28,"props":122,"children":124},{"className":123},[],[125],{"type":20,"value":17},{"type":20,"value":127},"\nblock does not match the set ",{"type":14,"tag":36,"props":129,"children":130},{"href":38},[131],{"type":14,"tag":28,"props":132,"children":134},{"className":133},[],[135],{"type":20,"value":136},"COUPER_ENVIRONMENT",{"type":20,"value":138}," value, the preprocessor\nremoves this block and its content. Otherwise, the content of the block is added\nto the configuration.",{"type":14,"tag":22,"props":140,"children":141},{},[142,144,149,151,156,158,170],{"type":20,"value":143},"Starting Couper with a configuration containing ",{"type":14,"tag":28,"props":145,"children":147},{"className":146},[],[148],{"type":20,"value":17},{"type":20,"value":150}," blocks will fail, if ",{"type":14,"tag":28,"props":152,"children":154},{"className":153},[],[155],{"type":20,"value":136},{"type":20,"value":157},"\nis missing or empty. A default value can be set using the ",{"type":14,"tag":36,"props":159,"children":161},{"href":160},"/configuration/block/settings",[162,168],{"type":14,"tag":28,"props":163,"children":165},{"className":164},[],[166],{"type":20,"value":167},"settings",{"type":20,"value":169}," block",{"type":20,"value":42},{"type":14,"tag":172,"props":173,"children":175},"h2",{"id":174},"example",[176],{"type":20,"value":177},"Example",{"type":14,"tag":22,"props":179,"children":180},{},[181,183,188,190],{"type":20,"value":182},"Considering the following configuration with the ",{"type":14,"tag":28,"props":184,"children":186},{"className":185},[],[187],{"type":20,"value":136},{"type":20,"value":189}," value set to ",{"type":14,"tag":28,"props":191,"children":193},{"className":192},[],[194],{"type":20,"value":195},"prod",{"type":14,"tag":197,"props":198,"children":202},"pre",{"className":199,"code":200,"language":201,"meta":7,"style":7},"language-hcl shiki shiki-themes slack-dark","server {\n  api \"protected\" {\n    endpoint \"/secure\" {\n      environment \"prod\" {\n        access_control = [\"jwt\"]\n      }\n\n      proxy {\n        environment \"prod\" {\n          url = \"https://protected-resource.org\"\n        }\n        environment \"stage\" {\n          url = \"https://test-resource.org\"\n        }\n      }\n    }\n  }\n}\n","hcl",[203],{"type":14,"tag":28,"props":204,"children":205},{"__ignoreMap":7},[206,224,243,261,279,310,319,329,342,359,377,386,403,420,428,436,445,454],{"type":14,"tag":207,"props":208,"children":211},"span",{"class":209,"line":210},"line",1,[212,218],{"type":14,"tag":207,"props":213,"children":215},{"style":214},"--shiki-default:#4EC9B0",[216],{"type":20,"value":217},"server",{"type":14,"tag":207,"props":219,"children":221},{"style":220},"--shiki-default:#E6E6E6",[222],{"type":20,"value":223}," {\n",{"type":14,"tag":207,"props":225,"children":227},{"class":209,"line":226},2,[228,233,239],{"type":14,"tag":207,"props":229,"children":230},{"style":214},[231],{"type":20,"value":232},"  api",{"type":14,"tag":207,"props":234,"children":236},{"style":235},"--shiki-default:#9CDCFE",[237],{"type":20,"value":238}," \"protected\"",{"type":14,"tag":207,"props":240,"children":241},{"style":220},[242],{"type":20,"value":223},{"type":14,"tag":207,"props":244,"children":246},{"class":209,"line":245},3,[247,252,257],{"type":14,"tag":207,"props":248,"children":249},{"style":214},[250],{"type":20,"value":251},"    endpoint",{"type":14,"tag":207,"props":253,"children":254},{"style":235},[255],{"type":20,"value":256}," \"/secure\"",{"type":14,"tag":207,"props":258,"children":259},{"style":220},[260],{"type":20,"value":223},{"type":14,"tag":207,"props":262,"children":264},{"class":209,"line":263},4,[265,270,275],{"type":14,"tag":207,"props":266,"children":267},{"style":214},[268],{"type":20,"value":269},"      environment",{"type":14,"tag":207,"props":271,"children":272},{"style":235},[273],{"type":20,"value":274}," \"prod\"",{"type":14,"tag":207,"props":276,"children":277},{"style":220},[278],{"type":20,"value":223},{"type":14,"tag":207,"props":280,"children":282},{"class":209,"line":281},5,[283,288,294,299,305],{"type":14,"tag":207,"props":284,"children":285},{"style":235},[286],{"type":20,"value":287},"        access_control ",{"type":14,"tag":207,"props":289,"children":291},{"style":290},"--shiki-default:#D4D4D4",[292],{"type":20,"value":293},"=",{"type":14,"tag":207,"props":295,"children":296},{"style":220},[297],{"type":20,"value":298}," [",{"type":14,"tag":207,"props":300,"children":302},{"style":301},"--shiki-default:#CE9178",[303],{"type":20,"value":304},"\"jwt\"",{"type":14,"tag":207,"props":306,"children":307},{"style":220},[308],{"type":20,"value":309},"]\n",{"type":14,"tag":207,"props":311,"children":313},{"class":209,"line":312},6,[314],{"type":14,"tag":207,"props":315,"children":316},{"style":220},[317],{"type":20,"value":318},"      }\n",{"type":14,"tag":207,"props":320,"children":322},{"class":209,"line":321},7,[323],{"type":14,"tag":207,"props":324,"children":326},{"emptyLinePlaceholder":325},true,[327],{"type":20,"value":328},"\n",{"type":14,"tag":207,"props":330,"children":332},{"class":209,"line":331},8,[333,338],{"type":14,"tag":207,"props":334,"children":335},{"style":214},[336],{"type":20,"value":337},"      proxy",{"type":14,"tag":207,"props":339,"children":340},{"style":220},[341],{"type":20,"value":223},{"type":14,"tag":207,"props":343,"children":345},{"class":209,"line":344},9,[346,351,355],{"type":14,"tag":207,"props":347,"children":348},{"style":214},[349],{"type":20,"value":350},"        environment",{"type":14,"tag":207,"props":352,"children":353},{"style":235},[354],{"type":20,"value":274},{"type":14,"tag":207,"props":356,"children":357},{"style":220},[358],{"type":20,"value":223},{"type":14,"tag":207,"props":360,"children":362},{"class":209,"line":361},10,[363,368,372],{"type":14,"tag":207,"props":364,"children":365},{"style":235},[366],{"type":20,"value":367},"          url ",{"type":14,"tag":207,"props":369,"children":370},{"style":290},[371],{"type":20,"value":293},{"type":14,"tag":207,"props":373,"children":374},{"style":301},[375],{"type":20,"value":376}," \"https://protected-resource.org\"\n",{"type":14,"tag":207,"props":378,"children":380},{"class":209,"line":379},11,[381],{"type":14,"tag":207,"props":382,"children":383},{"style":220},[384],{"type":20,"value":385},"        }\n",{"type":14,"tag":207,"props":387,"children":389},{"class":209,"line":388},12,[390,394,399],{"type":14,"tag":207,"props":391,"children":392},{"style":214},[393],{"type":20,"value":350},{"type":14,"tag":207,"props":395,"children":396},{"style":235},[397],{"type":20,"value":398}," \"stage\"",{"type":14,"tag":207,"props":400,"children":401},{"style":220},[402],{"type":20,"value":223},{"type":14,"tag":207,"props":404,"children":406},{"class":209,"line":405},13,[407,411,415],{"type":14,"tag":207,"props":408,"children":409},{"style":235},[410],{"type":20,"value":367},{"type":14,"tag":207,"props":412,"children":413},{"style":290},[414],{"type":20,"value":293},{"type":14,"tag":207,"props":416,"children":417},{"style":301},[418],{"type":20,"value":419}," \"https://test-resource.org\"\n",{"type":14,"tag":207,"props":421,"children":423},{"class":209,"line":422},14,[424],{"type":14,"tag":207,"props":425,"children":426},{"style":220},[427],{"type":20,"value":385},{"type":14,"tag":207,"props":429,"children":431},{"class":209,"line":430},15,[432],{"type":14,"tag":207,"props":433,"children":434},{"style":220},[435],{"type":20,"value":318},{"type":14,"tag":207,"props":437,"children":439},{"class":209,"line":438},16,[440],{"type":14,"tag":207,"props":441,"children":442},{"style":220},[443],{"type":20,"value":444},"    }\n",{"type":14,"tag":207,"props":446,"children":448},{"class":209,"line":447},17,[449],{"type":14,"tag":207,"props":450,"children":451},{"style":220},[452],{"type":20,"value":453},"  }\n",{"type":14,"tag":207,"props":455,"children":457},{"class":209,"line":456},18,[458],{"type":14,"tag":207,"props":459,"children":460},{"style":220},[461],{"type":20,"value":462},"}\n",{"type":14,"tag":22,"props":464,"children":465},{},[466],{"type":20,"value":467},"the result will be:",{"type":14,"tag":197,"props":469,"children":471},{"className":199,"code":470,"language":201,"meta":7,"style":7},"server {\n  api \"protected\" {\n    endpoint \"/secure\" {\n      access_control = [\"jwt\"]\n\n      proxy {\n        url = \"https://protected-resource.org\"\n      }\n    }\n  }\n}\n",[472],{"type":14,"tag":28,"props":473,"children":474},{"__ignoreMap":7},[475,486,501,516,540,547,558,574,581,588,595],{"type":14,"tag":207,"props":476,"children":477},{"class":209,"line":210},[478,482],{"type":14,"tag":207,"props":479,"children":480},{"style":214},[481],{"type":20,"value":217},{"type":14,"tag":207,"props":483,"children":484},{"style":220},[485],{"type":20,"value":223},{"type":14,"tag":207,"props":487,"children":488},{"class":209,"line":226},[489,493,497],{"type":14,"tag":207,"props":490,"children":491},{"style":214},[492],{"type":20,"value":232},{"type":14,"tag":207,"props":494,"children":495},{"style":235},[496],{"type":20,"value":238},{"type":14,"tag":207,"props":498,"children":499},{"style":220},[500],{"type":20,"value":223},{"type":14,"tag":207,"props":502,"children":503},{"class":209,"line":245},[504,508,512],{"type":14,"tag":207,"props":505,"children":506},{"style":214},[507],{"type":20,"value":251},{"type":14,"tag":207,"props":509,"children":510},{"style":235},[511],{"type":20,"value":256},{"type":14,"tag":207,"props":513,"children":514},{"style":220},[515],{"type":20,"value":223},{"type":14,"tag":207,"props":517,"children":518},{"class":209,"line":263},[519,524,528,532,536],{"type":14,"tag":207,"props":520,"children":521},{"style":235},[522],{"type":20,"value":523},"      access_control ",{"type":14,"tag":207,"props":525,"children":526},{"style":290},[527],{"type":20,"value":293},{"type":14,"tag":207,"props":529,"children":530},{"style":220},[531],{"type":20,"value":298},{"type":14,"tag":207,"props":533,"children":534},{"style":301},[535],{"type":20,"value":304},{"type":14,"tag":207,"props":537,"children":538},{"style":220},[539],{"type":20,"value":309},{"type":14,"tag":207,"props":541,"children":542},{"class":209,"line":281},[543],{"type":14,"tag":207,"props":544,"children":545},{"emptyLinePlaceholder":325},[546],{"type":20,"value":328},{"type":14,"tag":207,"props":548,"children":549},{"class":209,"line":312},[550,554],{"type":14,"tag":207,"props":551,"children":552},{"style":214},[553],{"type":20,"value":337},{"type":14,"tag":207,"props":555,"children":556},{"style":220},[557],{"type":20,"value":223},{"type":14,"tag":207,"props":559,"children":560},{"class":209,"line":321},[561,566,570],{"type":14,"tag":207,"props":562,"children":563},{"style":235},[564],{"type":20,"value":565},"        url ",{"type":14,"tag":207,"props":567,"children":568},{"style":290},[569],{"type":20,"value":293},{"type":14,"tag":207,"props":571,"children":572},{"style":301},[573],{"type":20,"value":376},{"type":14,"tag":207,"props":575,"children":576},{"class":209,"line":331},[577],{"type":14,"tag":207,"props":578,"children":579},{"style":220},[580],{"type":20,"value":318},{"type":14,"tag":207,"props":582,"children":583},{"class":209,"line":344},[584],{"type":14,"tag":207,"props":585,"children":586},{"style":220},[587],{"type":20,"value":444},{"type":14,"tag":207,"props":589,"children":590},{"class":209,"line":361},[591],{"type":14,"tag":207,"props":592,"children":593},{"style":220},[594],{"type":20,"value":453},{"type":14,"tag":207,"props":596,"children":597},{"class":209,"line":379},[598],{"type":14,"tag":207,"props":599,"children":600},{"style":220},[601],{"type":20,"value":462},{"type":14,"tag":603,"props":604,"children":605},"style",{},[606],{"type":20,"value":607},"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":226,"depth":226,"links":609},[610],{"id":174,"depth":226,"text":177},"markdown","content:2.configuration:4.block:environment.md","content","2.configuration/4.block/environment.md","md",1710682182191]