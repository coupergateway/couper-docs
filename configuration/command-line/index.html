<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Command Line Interface (CLI) | Couper Documentation</title><script>(function(){const e=localStorage.getItem("theme"),t=e||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.add("light")})()</script><link rel=stylesheet href=/css/tailwind.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@8/themes/satellite-min.css><script src=https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4></script></head><body class="antialiasing text-slate-700"><header class="flex justify-between items-center p-4 headerShadow"><div class="flex items-center gap-4 w-2/5"><svg class="box-border h-16 w-16 md:w-18 md:h-18 xl:w-22 xl:h-22" viewBox="0 0 152 165" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><g id="Page-1"><g id="Desktop-HD-Copy"><g id="couper-4"><g id="Group-39"><g id="Layer1"><path d="M15 116S8.349 42.165 76 42c65.001-.158 62 74 62 74s-58.325 18.728-123 0z" style="fill:#fff"/></g><path id="Fill-2" d="M87.395 42.775c-3.714-.699-7.537-1.106-11.457-1.106-33.907.0-61.394 27.439-61.394 61.286v11.331l22.913 6.435v-17.766c0-29.935 21.511-54.818 49.938-60.18" style="fill:#e3e4e4"/><path id="Path" d="M97.262.364 88.698 15.17l-8.479-14.806-8.569 14.821-8.537-14.806-8.569 14.812-2.537-4.38H39.85v6.029h8.669l6.025 10.408 8.557-14.797 8.54 14.806 8.551-14.791 8.479 14.803 8.564-14.803 2.533 4.422h10.107V10.86h-6.604l-6.009-10.496z" style="fill:#65b32e"/><path id="Fill-12" d="M40.784 15.473c1.062-3.264-.732-6.771-4.002-7.827-3.27-1.056-6.778.731-7.84 3.999-1.059 3.26.736 6.766 4.001 7.823 3.274 1.056 6.783-.731 7.841-3.995" style="fill:#fff"/><path id="Fill-121" d="M122.784 15.473c1.062-3.264-.732-6.771-4.002-7.827-3.27-1.056-6.778.731-7.84 3.999-1.059 3.26.736 6.766 4.001 7.823 3.274 1.056 6.783-.731 7.841-3.995" style="fill:#fff"/><path id="Fill-4" d="M17.565 114.748v-11.795c0-32.129 26.186-58.269 58.372-58.269 32.189.0 58.375 26.14 58.375 58.269v11.756c-6.208 1.724-26.413 6.514-59.115 6.514-32.536.0-51.711-4.742-57.632-6.475m12.942-101.15c0-2.43 1.978-4.404 4.412-4.404 2.433.0 4.411 1.974 4.411 4.404.0 2.429-1.978 4.404-4.411 4.404-2.434.0-4.412-1.975-4.412-4.404m81.771.0c0-2.43 1.981-4.404 4.415-4.404 2.433.0 4.411 1.974 4.411 4.404.0 2.429-1.978 4.404-4.411 4.404-2.434.0-4.415-1.975-4.415-4.404m7.621 42.492V23.476c4.189-1.363 7.244-5.251 7.244-9.878.0-5.751-4.689-10.433-10.45-10.433-5.765.0-10.454 4.682-10.454 10.433.0 4.765 3.237 8.75 7.621 9.992v27.506c-10.653-7.786-23.737-12.44-37.923-12.44-14.183.0-27.267 4.654-37.92 12.44V23.509c4.245-1.326 7.352-5.245 7.352-9.911.0-5.751-4.689-10.433-10.45-10.433-5.762.0-10.451 4.682-10.451 10.433.0 4.726 3.185 8.681 7.509 9.959V56.09c-12.552 11.741-20.451 28.38-20.451 46.863v49.187h6.039v-31.113c5.628 1.54 17.175 4.105 34.846 5.408l-.021 25.702 6.039.006.021-25.332c5.146.272 10.69.441 16.747.441 6.58.0 12.601-.199 18.169-.513l-.018 25.398 6.039.006.021-25.802c17.532-1.353 29.236-3.888 34.904-5.377v31.176h6.039v-49.187c0-18.483-7.899-35.122-20.452-46.863" style="fill:#1a1b1c"/><path id="Fill-6" d="M82.703 87.309c0 7.479 6.072 13.54 13.564 13.54 7.492.0 13.561-6.061 13.561-13.54.0-7.475-6.069-13.54-13.561-13.54s-13.564 6.065-13.564 13.54" style="fill:#3ea1c1"/><path id="Fill-8" d="M96.266 76.784c-5.813.0-10.544 4.721-10.544 10.526.0 5.803 4.731 10.526 10.544 10.526s10.545-4.723 10.545-10.526c0-5.805-4.732-10.526-10.545-10.526m0 27.081c-9.143.0-16.584-7.425-16.584-16.555.0-9.127 7.441-16.554 16.584-16.554s16.584 7.427 16.584 16.554c0 9.13-7.441 16.555-16.584 16.555" style="fill:#1a1b1c"/><path id="Fill-10" d="M100.992 87.309c0-2.604-2.117-4.714-4.726-4.714s-4.723 2.11-4.723 4.714c0 2.605 2.114 4.718 4.723 4.718s4.726-2.113 4.726-4.718" style="fill:#1a1b1c"/><path id="Fill-122" d="M104.858 82.514c.806-2.478-.556-5.139-3.038-5.941s-5.145.555-5.952 3.035c-.803 2.475.559 5.137 3.038 5.938 2.485.802 5.149-.554 5.952-3.032" style="fill:#fff"/><path id="Fill-14" d="M28.878 164.681h-6.039v-3.014c0-4.612-3.756-8.361-8.373-8.361-4.62.0-8.377 3.749-8.377 8.361v3.014h-6.039v-3.014c0-7.933 6.468-14.39 14.416-14.39 7.944.0 14.412 6.457 14.412 14.39v3.014z" style="fill:#aa64aa"/><path id="Fill-16" d="M151.749 164.681h-6.04v-3.014c0-4.612-3.756-8.361-8.373-8.361-4.62.0-8.376 3.749-8.376 8.361v3.014h-6.04v-3.014c0-7.933 6.465-14.39 14.416-14.39 7.948.0 14.413 6.457 14.413 14.39v3.014z" style="fill:#eb3d3e"/><path id="Fill-18" d="M69.836 164.681h-6.039v-3.014c0-4.612-3.757-8.361-8.377-8.361-4.617.0-8.373 3.749-8.373 8.361v3.014h-6.039v-3.014c0-7.933 6.465-14.39 14.412-14.39 7.948.0 14.416 6.457 14.416 14.39v3.014z" style="fill:#3ea1c1"/><path id="Fill-20" d="M110.792 164.681h-6.039v-3.014c0-4.612-3.756-8.361-8.376-8.361-4.617.0-8.374 3.749-8.374 8.361v3.014h-6.039v-3.014c0-7.933 6.465-14.39 14.413-14.39 7.947.0 14.415 6.457 14.415 14.39v3.014z" style="fill:#f6ab1f"/></g></g></g></g></svg><h1 class="text-2xl font-medium">Couper Documentation</h1><div class="rounded-md bg-lime-500 px-2 py-1 text-sm">edge</div></div><div class="flex justify-center w-full"><div class=w-4/5><div class=relative><div id=searchbox></div><div id=search-results class="absolute top-full left-0 right-0 mt-2 z-50"></div></div></div></div><div class="flex items-center justify-end gap-4 w-1/5"><button id=dark-mode-toggle class="p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors" aria-label="Toggle dark mode">
<svg class="sun-icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
<svg class="moon-icon w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg>
</button>
<a href=https://github.com/coupergateway/couper target=_blank class="flex items-center"><svg class="w-8 h-8" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0C5.374.0.0 5.373.0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931.0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176.0.0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221.0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg></a></div></header><div class="flex justify-between m-2 p-2 min-h-screen"><nav class="w-1/5 min-w-min grow-0 p-2"><div class=mb-4><div class="font-semibold text-lg text-amber-500 mb-2">Getting Started</div><div class="text-base pl-2 border-l-2"><a href=/getting-started/running-couper/>Running Couper</a></div><div class="text-base pl-2 border-l-2"><a href=/getting-started/examples/>Examples</a></div><div class="text-base pl-2 border-l-2"><a href=/getting-started/beta-features/>Beta Features</a></div><div class="text-base pl-2 border-l-2"><a href=/getting-started/welcome/>Introduction</a></div></div><div class=mb-4><div class="font-semibold text-lg text-amber-500 mb-2">Configuration</div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/>Blocks</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/access-control/>Access Control</a></div><div class="text-base pl-2 border-l-2 border-sky-400 text-sky-500 rounded-r-md router-link-active router-link-exact-active"><a href=/configuration/command-line/>Command Line Interface (CLI)</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/configuration-file/>Configuration File</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/error-handling/>Errors</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/expressions/>Expressions</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/functions/>Functions</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/multiple-files/>Merge of Configuration File(s)</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/modifiers/>Modifiers</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/variables/>Variables</a></div><div class="pl-2 mt-2"><div class="font-semibold text-amber-500 mb-1">Blocks</div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/api/>API</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/backend/>Backend</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/basic_auth/>Basic Auth</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/client_certificate/>Client Certificate</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/cors/>CORS</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/defaults/>Defaults</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/definitions/>Definitions</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/endpoint/>Endpoint</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/environment/>Environment</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/error_handler/>Error Handler</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/files/>Files</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/health/>Health</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/job/>Job (Beta)</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/jwt/>JWT</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/jwt_signing_profile/>JWT Signing Profile</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/oauth2/>OAuth2</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/beta_oauth2/>OAuth2 AC (Beta)</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/oidc/>OIDC</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/openapi/>OpenAPI</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/proxy/>Proxy</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/rate_limit/>Rate Limit (Beta)</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/rate_limiter/>Rate Limiter (Beta)</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/request/>Request</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/response/>Response</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/saml/>SAML</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/server/>Server</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/server_certificate/>Server Certificate</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/settings/>Settings</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/spa/>SPA</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/backend_tls/>TLS (Backend)</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/server_tls/>TLS (Server)</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/token_request/>Token Request (Beta)</a></div><div class="text-base pl-2 border-l-2"><a href=/configuration/block/websockets/>WebSockets</a></div></div></div><div class=mb-4><div class="font-semibold text-lg text-amber-500 mb-2">Observation</div><div class="text-base pl-2 border-l-2"><a href=/observation/health/>Health Check</a></div><div class="text-base pl-2 border-l-2"><a href=/observation/metrics/>Metrics</a></div><div class="text-base pl-2 border-l-2"><a href=/observation/logging/>Logging</a></div></div></nav><main class="grow p-5 w-3/5 prose prose-slate prose-lg prose-code:bg-sky-100 prose-code:text-sky-900 prose-code:p-1 prose-code:rounded-md prose-code:text-sm prose-blockquote:bg-purple-100 prose-blockquote:rounded-md prose-a:text-sky-600 hover:prose-a:text-amber-500"><h1 id=command-line-interface>Command Line Interface</h1><p>Couper is build as binary called <code>couper</code> with the following commands:</p><table><thead><tr><th style=text-align:left>Command</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>run</code></td><td style=text-align:left>Start the server with given configuration file.</td></tr><tr><td style=text-align:left><code>help</code></td><td style=text-align:left>Print the usage for the given command: <code>help run</code></td></tr><tr><td style=text-align:left><code>verify</code></td><td style=text-align:left>Verify the syntax of the given configuration file.</td></tr><tr><td style=text-align:left><code>version</code></td><td style=text-align:left>Print the current version and build information.</td></tr></tbody></table><p>Most of the following command-line options map to <a href=/configuration/block/settings>settings</a>.</p><h2 id=basic-options>Basic Options</h2><table><thead><tr><th style=text-align:left>Argument</th><th style=text-align:left>Default</th><th style=text-align:left>Environment</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>-f</code></td><td style=text-align:left><code>couper.hcl</code></td><td style=text-align:left><code>COUPER_FILE</code></td><td style=text-align:left>Path to a Couper configuration file.</td></tr><tr><td style=text-align:left><code>-d</code></td><td style=text-align:left><code>""</code></td><td style=text-align:left><code>COUPER_FILE_DIRECTORY</code></td><td style=text-align:left>Path to a directory containing Couper configuration files.</td></tr><tr><td style=text-align:left><code>-p</code></td><td style=text-align:left><code>8080</code></td><td style=text-align:left><code>COUPER_DEFAULT_PORT</code></td><td style=text-align:left>Sets the default port to the given value and does not override explicit <code>[host:port]</code> configurations from file.</td></tr><tr><td style=text-align:left><code>-e</code></td><td style=text-align:left><code>""</code></td><td style=text-align:left><code>COUPER_ENVIRONMENT</code></td><td style=text-align:left>Name of environment in which Couper is currently running.</td></tr><tr><td style=text-align:left><code>-watch</code></td><td style=text-align:left><code>false</code></td><td style=text-align:left><code>COUPER_WATCH</code></td><td style=text-align:left>Watch for configuration file changes and reload on modifications.</td></tr><tr><td style=text-align:left><code>-watch-retries</code></td><td style=text-align:left><code>5</code></td><td style=text-align:left><code>COUPER_WATCH_RETRIES</code></td><td style=text-align:left>Maximum retry count for configuration reloads which could not bind the configured port.</td></tr><tr><td style=text-align:left><code>-watch-retry-delay</code></td><td style=text-align:left><code>500ms</code></td><td style=text-align:left><code>COUPER_WATCH_RETRY_DELAY</code></td><td style=text-align:left>Delay <a href=#duration>duration</a> before next attempt if an error occurs.</td></tr></tbody></table><blockquote><p>Note: Apart from <code>e</code> and <code>p</code>, these options <strong>do not</strong> map to <a href=/configuration/block/settings>settings</a>.</p></blockquote><blockquote><p>Note: Couper can be started with multiple <code>-f &lt;file></code> and <code>-d &lt;dir></code> arguments.</p></blockquote><p>Files in the <code>-d &lt;dir></code> are loaded in alphabetical order. Blocks and attributes defined in later files may override those defined earlier. See <a href=/configuration/multiple-files>Merging</a> for details.</p><div class=duration><h3 id=duration><a href=#duration>Duration</a></h3><div>Values of type duration are provided as number string followed by a unit listed below.<p>Example: <code>timeout = "300s"</code></p></div><table><thead><tr><th align=left>Duration units</th><th align=left>Description</th></tr></thead><tbody><tr><td align=left><code>ns</code></td><td align=left>nanoseconds</td></tr><tr><td align=left><code>us</code> (or <code>µs</code>)</td><td align=left>microseconds</td></tr><tr><td align=left><code>ms</code></td><td align=left>milliseconds</td></tr><tr><td align=left><code>s</code></td><td align=left>seconds</td></tr><tr><td align=left><code>m</code></td><td align=left>minutes</td></tr><tr><td align=left><code>h</code></td><td align=left>hours</td></tr></tbody></table></div><h2 id=example>Example</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tree
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>├── conf
</span></span><span style=display:flex><span>│ ├── a.hcl
</span></span><span style=display:flex><span>│ ├── b.hcl
</span></span><span style=display:flex><span>│ └── c.hcl
</span></span><span style=display:flex><span>├── devel.hcl
</span></span><span style=display:flex><span>└── global.hcl
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> directory, <span style=color:#ae81ff>5</span> files
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ couper run -f global.hcl -d conf/ -f devel.hcl -log-level<span style=color:#f92672>=</span>debug
</span></span><span style=display:flex><span>DEBU<span style=color:#f92672>[</span>0000<span style=color:#f92672>]</span> loaded files … <span style=color:#f92672>[</span>…/global.hcl …/conf/a.hcl …/conf/b.hcl …/conf/c.hcl …/devel.hcl<span style=color:#f92672>]</span> …
</span></span><span style=display:flex><span>…
</span></span></code></pre></div><h2 id=network-options>Network Options</h2><table><thead><tr><th style=text-align:left>Argument</th><th style=text-align:left>Default</th><th style=text-align:left>Environment Variable</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>-bind-address</code></td><td style=text-align:left><code>"*"</code></td><td style=text-align:left><code>COUPER_BIND_ADDRESS</code></td><td style=text-align:left>A comma-separated list of addresses to bind.</td></tr></tbody></table><h2 id=oberservation-options>Oberservation Options</h2><table><thead><tr><th style=text-align:left>Argument</th><th style=text-align:left>Default</th><th style=text-align:left>Environment Variable</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>-health-path</code></td><td style=text-align:left><code>/healthz</code></td><td style=text-align:left><code>COUPER_HEALTH_PATH</code></td><td style=text-align:left>Path for health-check requests for all servers and ports.</td></tr><tr><td style=text-align:left><code>-log-format</code></td><td style=text-align:left><code>common</code></td><td style=text-align:left><code>COUPER_LOG_FORMAT</code></td><td style=text-align:left>Can be set to <code>json</code> output format. This is the default on containers.</td></tr><tr><td style=text-align:left><code>-log-level</code></td><td style=text-align:left><code>info</code></td><td style=text-align:left><code>COUPER_LOG_LEVEL</code></td><td style=text-align:left>Set the log-level to one of: <code>info</code>, <code>panic</code>, <code>fatal</code>, <code>error</code>, <code>warn</code>, <code>debug</code>, <code>trace</code>.</td></tr><tr><td style=text-align:left><code>-log-pretty</code></td><td style=text-align:left><code>false</code></td><td style=text-align:left><code>COUPER_LOG_PRETTY</code></td><td style=text-align:left>Option for <code>json</code> log format which pretty prints with basic key coloring.</td></tr><tr><td style=text-align:left><code>-request-id-accept-from-header</code></td><td style=text-align:left><code>""</code></td><td style=text-align:left><code>COUPER_REQUEST_ID_ACCEPT_FROM_HEADER</code></td><td style=text-align:left>Name of a client request HTTP header field that transports the <code>request.id</code> which Couper takes for logging and transport to the backend (if configured).</td></tr><tr><td style=text-align:left><code>-request-id-backend-header</code></td><td style=text-align:left><code>Couper-Request-ID</code></td><td style=text-align:left><code>COUPER_REQUEST_ID_BACKEND_HEADER</code></td><td style=text-align:left>Name of a HTTP header field which Couper uses to transport the <code>request.id</code> to the backend.</td></tr><tr><td style=text-align:left><code>-request-id-client-header</code></td><td style=text-align:left><code>Couper-Request-ID</code></td><td style=text-align:left><code>COUPER_REQUEST_ID_CLIENT_HEADER</code></td><td style=text-align:left>Name of a HTTP header field which Couper uses to transport the <code>request.id</code> to the client.</td></tr><tr><td style=text-align:left><code>-request-id-format</code></td><td style=text-align:left><code>common</code></td><td style=text-align:left><code>COUPER_REQUEST_ID_FORMAT</code></td><td style=text-align:left>If set to <code>uuid4</code> a <a href=https://www.rfc-editor.org/rfc/rfc4122>RFC 4122 UUID</a> is used for <code>request.id</code> and related log fields.</td></tr><tr><td style=text-align:left><code>-server-timing-header</code></td><td style=text-align:left><code>false</code></td><td style=text-align:left><code>COUPER_SERVER_TIMING_HEADER</code></td><td style=text-align:left>If enabled, Couper includes an additional <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Server-Timing>Server-Timing</a> HTTP response header field detailing connection and transport relevant metrics for each backend request.</td></tr><tr><td style=text-align:left><code>-beta-metrics</code></td><td style=text-align:left><code>false</code></td><td style=text-align:left><code>COUPER_BETA_METRICS</code></td><td style=text-align:left>Option to enable the Prometheus <a href=/observation/metrics>metrics</a> exporter.</td></tr><tr><td style=text-align:left><code>-beta-metrics-port</code></td><td style=text-align:left><code>9090</code></td><td style=text-align:left><code>COUPER_BETA_METRICS_PORT</code></td><td style=text-align:left>Prometheus exporter listen port.</td></tr><tr><td style=text-align:left><code>-beta-service-name</code></td><td style=text-align:left><code>couper</code></td><td style=text-align:left><code>COUPER_BETA_SERVICE_NAME</code></td><td style=text-align:left>The service name which applies to the <code>service_name</code> metric labels.</td></tr></tbody></table><h3 id=oberservation-environment-variables>Oberservation Environment Variables</h3><p>The following environment variables have no corresponding command-line arguments or <a href=/configuration/block/settings>settings</a>:</p><table><thead><tr><th style=text-align:left>Environment Variable</th><th style=text-align:left>Default</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>COUPER_ACCESS_LOG_REQUEST_HEADERS</code></td><td style=text-align:left><code>User-Agent,Accept,Referer</code></td><td style=text-align:left>A comma separated list of request header names whose values should be logged.</td></tr><tr><td style=text-align:left><code>COUPER_ACCESS_LOG_RESPONSE_HEADERS</code></td><td style=text-align:left><code>Cache-Control,Content-Encoding,Content-Type,Location</code></td><td style=text-align:left>A comma separated list of response header names whose values should be logged.</td></tr><tr><td style=text-align:left><code>COUPER_ACCESS_LOG_TYPE_VALUE</code></td><td style=text-align:left><code>couper_access</code></td><td style=text-align:left>Value for the log field <code>type</code>.</td></tr><tr><td style=text-align:left><code>COUPER_BACKEND_LOG_REQUEST_HEADERS</code></td><td style=text-align:left><code>User-Agent, Accept, Referer</code></td><td style=text-align:left>A comma separated list of request header names whose values should be logged.</td></tr><tr><td style=text-align:left><code>COUPER_BACKEND_LOG_RESPONSE_HEADERS</code></td><td style=text-align:left><code>Cache-Control,Content-Encoding,Content-Type,Location</code></td><td style=text-align:left>A comma separated list of response header names whose values should be logged.</td></tr><tr><td style=text-align:left><code>COUPER_BACKEND_LOG_TYPE_VALUE</code></td><td style=text-align:left><code>couper_backend</code></td><td style=text-align:left>Value for the log field <code>type</code>.</td></tr><tr><td style=text-align:left><code>COUPER_LOG_PARENT_FIELD</code></td><td style=text-align:left><code>""</code></td><td style=text-align:left>An option for <code>json</code> log format to add all log fields as child properties.</td></tr><tr><td style=text-align:left><code>COUPER_LOG_TYPE_VALUE</code></td><td style=text-align:left><code>couper_daemon</code></td><td style=text-align:left>Value for the runtime log field <code>type</code>.</td></tr></tbody></table><h2 id=tls-options>TLS Options</h2><table><thead><tr><th style=text-align:left>Argument</th><th style=text-align:left>Default</th><th style=text-align:left>Environment Variable</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>-ca-file</code></td><td style=text-align:left><code>""</code></td><td style=text-align:left><code>COUPER_CA_FILE</code></td><td style=text-align:left>Option for adding the given PEM encoded CA certificate to the existing system certificate pool for all outgoing connections.</td></tr><tr><td style=text-align:left><code>-https-dev-proxy</code></td><td style=text-align:left><code>""</code></td><td style=text-align:left><code>COUPER_HTTPS_DEV_PROXY</code></td><td style=text-align:left>List of TLS port mappings to define the TLS listen port and the target one. A self-signed certificate will be generated on the fly based on the given hostname.</td></tr><tr><td style=text-align:left><code>-secure-cookies</code></td><td style=text-align:left><code>""</code></td><td style=text-align:left><code>COUPER_SECURE_COOKIES</code></td><td style=text-align:left>If set to <code>strip</code>, the <code>Secure</code> flag is removed from all <code>Set-Cookie</code> HTTP header fields.</td></tr></tbody></table><h2 id=profiling-options>Profiling Options</h2><table><thead><tr><th style=text-align:left>Argument</th><th style=text-align:left>Default</th><th style=text-align:left>Environment Variable</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>-pprof</code></td><td style=text-align:left><code>false</code></td><td style=text-align:left><code>COUPER_PPROF</code></td><td style=text-align:left>Enables profiling.</td></tr><tr><td style=text-align:left><code>-pprof-port</code></td><td style=text-align:left><code>6060</code></td><td style=text-align:left><code>COUPER_PPROF_PORT</code></td><td style=text-align:left>Port for profiling interface.</td></tr></tbody></table><h2 id=timing-environment-variables>Timing Environment Variables</h2><p>The following environment variables have no corresponding command-line arguments or <a href=/configuration/block/settings>settings</a>:</p><table><thead><tr><th style=text-align:left>Environment Variable</th><th style=text-align:left>Default</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>COUPER_TIMING_IDLE_TIMEOUT</code></td><td style=text-align:left><code>60s</code></td><td style=text-align:left>The maximum amount of time to wait for the next request on client connections when keep-alives are enabled.</td></tr><tr><td style=text-align:left><code>COUPER_TIMING_READ_HEADER_TIMEOUT</code></td><td style=text-align:left><code>10s</code></td><td style=text-align:left>The amount of time allowed to read client request headers.</td></tr><tr><td style=text-align:left><code>COUPER_TIMING_SHUTDOWN_DELAY</code></td><td style=text-align:left><code>0</code></td><td style=text-align:left>The amount of time the server is marked as unhealthy until calling server close finally.</td></tr><tr><td style=text-align:left><code>COUPER_TIMING_SHUTDOWN_TIMEOUT</code></td><td style=text-align:left><code>0</code></td><td style=text-align:left>The maximum amount of time allowed to close the server with all running connections.</td></tr></tbody></table><h2 id=surrounding-architecture-options>Surrounding Architecture Options</h2><table><thead><tr><th style=text-align:left>Argument</th><th style=text-align:left>Default</th><th style=text-align:left>Environment Variable</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>-accept-forwarded-url</code></td><td style=text-align:left><code>""</code></td><td style=text-align:left><code>COUPER_ACCEPT_FORWARDED_URL</code></td><td style=text-align:left>Which <code>X-Forwarded-*</code> request headers should be accepted to change the <a href=/configuration/variables#request>request variables</a> <code>url</code>, <code>origin</code>, <code>protocol</code>, <code>host</code>, <code>port</code>. Comma-separated list of values. Valid values: <code>proto</code>, <code>host</code>, <code>port</code></td></tr><tr><td style=text-align:left><code>-no-proxy-from-env</code></td><td style=text-align:left><code>false</code></td><td style=text-align:left><code>COUPER_NO_PROXY_FROM_ENV</code></td><td style=text-align:left>Disables the connect hop to configured <a href=https://godoc.org/golang.org/x/net/http/httpproxy>proxy via environment</a>.</td></tr><tr><td style=text-align:left><code>-xfh</code></td><td style=text-align:left><code>false</code></td><td style=text-align:left><code>COUPER_XFH</code></td><td style=text-align:left>Global configurations which uses the <code>X-Forwarded-Host</code> header instead of the request host.</td></tr></tbody></table></main><nav class="w-1/5 grow-0 p-2"><h2 class=text-amber-500>On this Page</h2><div class=toc><nav id=TableOfContents><ul><li><a href=#basic-options>Basic Options</a></li><li><a href=#example>Example</a></li><li><a href=#network-options>Network Options</a></li><li><a href=#oberservation-options>Oberservation Options</a><ul><li><a href=#oberservation-environment-variables>Oberservation Environment Variables</a></li></ul></li><li><a href=#tls-options>TLS Options</a></li><li><a href=#profiling-options>Profiling Options</a></li><li><a href=#timing-environment-variables>Timing Environment Variables</a></li><li><a href=#surrounding-architecture-options>Surrounding Architecture Options</a></li></ul></nav></div></nav></div><footer class="col-span-3 text-sm leading-6 m-10"><p>Copyright couper.io</p></footer><script>(function(){const t=document.getElementById("dark-mode-toggle"),e=document.documentElement,s=t.querySelector(".sun-icon"),o=t.querySelector(".moon-icon");function i(){const e=localStorage.getItem("theme");return e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function n(t){t==="dark"?(e.classList.add("dark"),e.classList.remove("light"),s.classList.add("hidden"),o.classList.remove("hidden")):(e.classList.remove("dark"),e.classList.add("light"),s.classList.remove("hidden"),o.classList.add("hidden")),localStorage.setItem("theme",t)}const a=i();n(a),t.addEventListener("click",function(){const t=e.classList.contains("dark")?"light":"dark";n(t)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(e){localStorage.getItem("theme")||n(e.matches?"dark":"light")})})()</script><script>document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre").forEach(function(e){e.addEventListener("click",function(t){const n=e.getBoundingClientRect(),s=t.clientX-n.left,o=t.clientY-n.top;if(s>n.width-60&&o<60){const t=e.querySelector("code");if(t){const n=t.textContent;navigator.clipboard.writeText(n).then(function(){e.classList.add("copied"),setTimeout(function(){e.classList.remove("copied")},2e3)}).catch(function(e){console.error("Failed to copy code: ",e)})}}})})})</script><script>const ALGOLIA_APP_ID="YOUR_APP_ID",ALGOLIA_SEARCH_KEY="YOUR_SEARCH_KEY",ALGOLIA_INDEX="docs";if(typeof algoliasearch!="undefined"&&typeof instantsearch!="undefined"){const t=algoliasearch(ALGOLIA_APP_ID,ALGOLIA_SEARCH_KEY),n={...t,search(e){return e.every(({params:e})=>!e.query||e.query==="")?Promise.resolve({results:e.map(()=>({hits:[],nbHits:0,nbPages:0,page:0,processingTimeMS:0}))}):t.search(e)}},e=instantsearch({indexName:ALGOLIA_INDEX,searchClient:n,stalledSearchDelay:150});e.addWidgets([instantsearch.widgets.searchBox({container:"#searchbox",placeholder:"Search documentation...",cssClasses:{root:"w-full",form:"w-full relative",input:"block mt-1 p-4 pl-10 w-full text-sm text-gray-900 rounded-lg border-2 border-lime-500 focus:ring-blue-500 focus:border-blue-500 bg-white",submit:"hidden",reset:"absolute right-3 top-1/2 transform -translate-y-1/2"}})]);const s=(e)=>{const{hits:n,widgetParams:s}=e;if(n.length===0){s.container.innerHTML="";return}const o=n.map(e=>(e._highlightResult&&e._highlightResult.attributes&&e._highlightResult.attributes.forEach(e=>{if(e.description&&!e.transformed){let t=e.description.value;t=t.replace(/\b_(.*?)_\b/g,"$1"),t=t.replace(/\[(.*?)\]\(.*?\)/g,"$1"),t=t.replace(/`(.*?)`/g,"<code>$1</code>"),e.description.value=t,e.transformed=!0}}),e)),i=o.filter(e=>e._highlightResult!==0[0]).sort((e,t)=>e.__position>t.__position?1:-1);s.container.innerHTML=i.map(e=>{const n=e._highlightResult?.name?.value||e.name||"",s=(e.url||"").toLowerCase(),t=(e._highlightResult?.attributes||[]).filter(e=>e.name?.matchedWords?.length>0||e.description?.matchedWords?.length>0).map(e=>({name:e.name?.value||"",desc:e.description?.value||""})),o=t.length>0?`<table class="table-auto w-full">
                            <tbody>
                                ${t.map(e=>`
                                    <tr class="align-top">
                                        <td class="font-semibold text-purple-600 w-1/3">${e.name}</td>
                                        <td>${e.desc}</td>
                                    </tr>
                                `).join("")}
                            </tbody>
                           </table>`:"";return`
                        <div class="bg-white border-4 border-gray-200 rounded-lg w-full mt-2">
                            <a href="${s}" class="text-sky-600 block">
                                <div class="pl-8 pr-2 py-1 relative cursor-pointer hover:bg-sky-50 hover:text-gray-900">
                                    <div class="flex flex-col prose prose-slate prose-lg prose-code:bg-sky-100 search-result">
                                        <div class="flex flex-col m-2">
                                            <h3 class="uppercase blockTitle pt-4 text-lg text-gray-800">${n}</h3>
                                            ${o}
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    `}).join("")},o=instantsearch.connectors.connectHits(s);e.addWidgets([o({container:document.querySelector("#search-results")})]),e.start(),document.addEventListener("click",e=>{const t=document.querySelector("#searchbox"),n=document.querySelector("#search-results");t&&!t.contains(e.target)&&n&&setTimeout(()=>{const e=document.querySelector(".ais-SearchBox-input");e&&(e.value=""),n.innerHTML=""},200)})}</script></body></html>